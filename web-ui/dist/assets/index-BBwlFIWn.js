(function(){const k=document.createElement("link").relList;if(k&&k.supports&&k.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))C(T);new MutationObserver(T=>{for(const d of T)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&C(h)}).observe(document,{childList:!0,subtree:!0});function v(T){const d={};return T.integrity&&(d.integrity=T.integrity),T.referrerPolicy&&(d.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?d.credentials="include":T.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function C(T){if(T.ep)return;T.ep=!0;const d=v(T);fetch(T.href,d)}})();var He,fe,Ct,Ce,rt,kt,At,It,Xe,$e,Ke,Re={},xt=[],Vt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Me=Array.isArray;function me(w,k){for(var v in k)w[v]=k[v];return w}function Ze(w){w&&w.parentNode&&w.parentNode.removeChild(w)}function Qe(w,k,v){var C,T,d,h={};for(d in k)d=="key"?C=k[d]:d=="ref"?T=k[d]:h[d]=k[d];if(arguments.length>2&&(h.children=arguments.length>3?He.call(arguments,2):v),typeof w=="function"&&w.defaultProps!=null)for(d in w.defaultProps)h[d]===void 0&&(h[d]=w.defaultProps[d]);return Ue(w,h,C,T,null)}function Ue(w,k,v,C,T){var d={type:w,props:k,key:v,ref:C,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:T??++Ct,__i:-1,__u:0};return T==null&&fe.vnode!=null&&fe.vnode(d),d}function ke(w){return w.children}function Se(w,k){this.props=w,this.context=k}function Ie(w,k){if(k==null)return w.__?Ie(w.__,w.__i+1):null;for(var v;k<w.__k.length;k++)if((v=w.__k[k])!=null&&v.__e!=null)return v.__e;return typeof w.type=="function"?Ie(w):null}function Rt(w){var k,v;if((w=w.__)!=null&&w.__c!=null){for(w.__e=w.__c.base=null,k=0;k<w.__k.length;k++)if((v=w.__k[k])!=null&&v.__e!=null){w.__e=w.__c.base=v.__e;break}return Rt(w)}}function nt(w){(!w.__d&&(w.__d=!0)&&Ce.push(w)&&!je.__r++||rt!=fe.debounceRendering)&&((rt=fe.debounceRendering)||kt)(je)}function je(){for(var w,k,v,C,T,d,h,p=1;Ce.length;)Ce.length>p&&Ce.sort(At),w=Ce.shift(),p=Ce.length,w.__d&&(v=void 0,C=void 0,T=(C=(k=w).__v).__e,d=[],h=[],k.__P&&((v=me({},C)).__v=C.__v+1,fe.vnode&&fe.vnode(v),Je(k.__P,v,C,k.__n,k.__P.namespaceURI,32&C.__u?[T]:null,d,T??Ie(C),!!(32&C.__u),h),v.__v=C.__v,v.__.__k[v.__i]=v,Ot(d,v,h),C.__e=C.__=null,v.__e!=T&&Rt(v)));je.__r=0}function Pt(w,k,v,C,T,d,h,p,c,i,r){var e,t,n,l,s,g,y,a=C&&C.__k||xt,o=k.length;for(c=qt(v,k,a,c,o),e=0;e<o;e++)(n=v.__k[e])!=null&&(t=n.__i==-1?Re:a[n.__i]||Re,n.__i=e,g=Je(w,n,t,T,d,h,p,c,i,r),l=n.__e,n.ref&&t.ref!=n.ref&&(t.ref&&et(t.ref,null,n),r.push(n.ref,n.__c||l,n)),s==null&&l!=null&&(s=l),(y=!!(4&n.__u))||t.__k===n.__k?c=Mt(n,c,w,y):typeof n.type=="function"&&g!==void 0?c=g:l&&(c=l.nextSibling),n.__u&=-7);return v.__e=s,c}function qt(w,k,v,C,T){var d,h,p,c,i,r=v.length,e=r,t=0;for(w.__k=new Array(T),d=0;d<T;d++)(h=k[d])!=null&&typeof h!="boolean"&&typeof h!="function"?(typeof h=="string"||typeof h=="number"||typeof h=="bigint"||h.constructor==String?h=w.__k[d]=Ue(null,h,null,null,null):Me(h)?h=w.__k[d]=Ue(ke,{children:h},null,null,null):h.constructor==null&&h.__b>0?h=w.__k[d]=Ue(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):w.__k[d]=h,c=d+t,h.__=w,h.__b=w.__b+1,p=null,(i=h.__i=Wt(h,v,c,e))!=-1&&(e--,(p=v[i])&&(p.__u|=2)),p==null||p.__v==null?(i==-1&&(T>r?t--:T<r&&t++),typeof h.type!="function"&&(h.__u|=4)):i!=c&&(i==c-1?t--:i==c+1?t++:(i>c?t--:t++,h.__u|=4))):w.__k[d]=null;if(e)for(d=0;d<r;d++)(p=v[d])!=null&&(2&p.__u)==0&&(p.__e==C&&(C=Ie(p)),Bt(p,p));return C}function Mt(w,k,v,C){var T,d;if(typeof w.type=="function"){for(T=w.__k,d=0;T&&d<T.length;d++)T[d]&&(T[d].__=w,k=Mt(T[d],k,v,C));return k}w.__e!=k&&(C&&(k&&w.type&&!k.parentNode&&(k=Ie(w)),v.insertBefore(w.__e,k||null)),k=w.__e);do k=k&&k.nextSibling;while(k!=null&&k.nodeType==8);return k}function De(w,k){return k=k||[],w==null||typeof w=="boolean"||(Me(w)?w.some(function(v){De(v,k)}):k.push(w)),k}function Wt(w,k,v,C){var T,d,h,p=w.key,c=w.type,i=k[v],r=i!=null&&(2&i.__u)==0;if(i===null&&p==null||r&&p==i.key&&c==i.type)return v;if(C>(r?1:0)){for(T=v-1,d=v+1;T>=0||d<k.length;)if((i=k[h=T>=0?T--:d++])!=null&&(2&i.__u)==0&&p==i.key&&c==i.type)return h}return-1}function it(w,k,v){k[0]=="-"?w.setProperty(k,v??""):w[k]=v==null?"":typeof v!="number"||Vt.test(k)?v:v+"px"}function Oe(w,k,v,C,T){var d,h;e:if(k=="style")if(typeof v=="string")w.style.cssText=v;else{if(typeof C=="string"&&(w.style.cssText=C=""),C)for(k in C)v&&k in v||it(w.style,k,"");if(v)for(k in v)C&&v[k]==C[k]||it(w.style,k,v[k])}else if(k[0]=="o"&&k[1]=="n")d=k!=(k=k.replace(It,"$1")),h=k.toLowerCase(),k=h in w||k=="onFocusOut"||k=="onFocusIn"?h.slice(2):k.slice(2),w.l||(w.l={}),w.l[k+d]=v,v?C?v.u=C.u:(v.u=Xe,w.addEventListener(k,d?Ke:$e,d)):w.removeEventListener(k,d?Ke:$e,d);else{if(T=="http://www.w3.org/2000/svg")k=k.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(k!="width"&&k!="height"&&k!="href"&&k!="list"&&k!="form"&&k!="tabIndex"&&k!="download"&&k!="rowSpan"&&k!="colSpan"&&k!="role"&&k!="popover"&&k in w)try{w[k]=v??"";break e}catch{}typeof v=="function"||(v==null||v===!1&&k[4]!="-"?w.removeAttribute(k):w.setAttribute(k,k=="popover"&&v==1?"":v))}}function ot(w){return function(k){if(this.l){var v=this.l[k.type+w];if(k.t==null)k.t=Xe++;else if(k.t<v.u)return;return v(fe.event?fe.event(k):k)}}}function Je(w,k,v,C,T,d,h,p,c,i){var r,e,t,n,l,s,g,y,a,o,b,A,P,B,U,L,Q,u=k.type;if(k.constructor!=null)return null;128&v.__u&&(c=!!(32&v.__u),d=[p=k.__e=v.__e]),(r=fe.__b)&&r(k);e:if(typeof u=="function")try{if(y=k.props,a="prototype"in u&&u.prototype.render,o=(r=u.contextType)&&C[r.__c],b=r?o?o.props.value:r.__:C,v.__c?g=(e=k.__c=v.__c).__=e.__E:(a?k.__c=e=new u(y,b):(k.__c=e=new Se(y,b),e.constructor=u,e.render=Kt),o&&o.sub(e),e.state||(e.state={}),e.__n=C,t=e.__d=!0,e.__h=[],e._sb=[]),a&&e.__s==null&&(e.__s=e.state),a&&u.getDerivedStateFromProps!=null&&(e.__s==e.state&&(e.__s=me({},e.__s)),me(e.__s,u.getDerivedStateFromProps(y,e.__s))),n=e.props,l=e.state,e.__v=k,t)a&&u.getDerivedStateFromProps==null&&e.componentWillMount!=null&&e.componentWillMount(),a&&e.componentDidMount!=null&&e.__h.push(e.componentDidMount);else{if(a&&u.getDerivedStateFromProps==null&&y!==n&&e.componentWillReceiveProps!=null&&e.componentWillReceiveProps(y,b),k.__v==v.__v||!e.__e&&e.shouldComponentUpdate!=null&&e.shouldComponentUpdate(y,e.__s,b)===!1){for(k.__v!=v.__v&&(e.props=y,e.state=e.__s,e.__d=!1),k.__e=v.__e,k.__k=v.__k,k.__k.some(function(E){E&&(E.__=k)}),A=0;A<e._sb.length;A++)e.__h.push(e._sb[A]);e._sb=[],e.__h.length&&h.push(e);break e}e.componentWillUpdate!=null&&e.componentWillUpdate(y,e.__s,b),a&&e.componentDidUpdate!=null&&e.__h.push(function(){e.componentDidUpdate(n,l,s)})}if(e.context=b,e.props=y,e.__P=w,e.__e=!1,P=fe.__r,B=0,a){for(e.state=e.__s,e.__d=!1,P&&P(k),r=e.render(e.props,e.state,e.context),U=0;U<e._sb.length;U++)e.__h.push(e._sb[U]);e._sb=[]}else do e.__d=!1,P&&P(k),r=e.render(e.props,e.state,e.context),e.state=e.__s;while(e.__d&&++B<25);e.state=e.__s,e.getChildContext!=null&&(C=me(me({},C),e.getChildContext())),a&&!t&&e.getSnapshotBeforeUpdate!=null&&(s=e.getSnapshotBeforeUpdate(n,l)),L=r,r!=null&&r.type===ke&&r.key==null&&(L=Lt(r.props.children)),p=Pt(w,Me(L)?L:[L],k,v,C,T,d,h,p,c,i),e.base=k.__e,k.__u&=-161,e.__h.length&&h.push(e),g&&(e.__E=e.__=null)}catch(E){if(k.__v=null,c||d!=null)if(E.then){for(k.__u|=c?160:128;p&&p.nodeType==8&&p.nextSibling;)p=p.nextSibling;d[d.indexOf(p)]=null,k.__e=p}else{for(Q=d.length;Q--;)Ze(d[Q]);Ge(k)}else k.__e=v.__e,k.__k=v.__k,E.then||Ge(k);fe.__e(E,k,v)}else d==null&&k.__v==v.__v?(k.__k=v.__k,k.__e=v.__e):p=k.__e=$t(v.__e,k,v,C,T,d,h,c,i);return(r=fe.diffed)&&r(k),128&k.__u?void 0:p}function Ge(w){w&&w.__c&&(w.__c.__e=!0),w&&w.__k&&w.__k.forEach(Ge)}function Ot(w,k,v){for(var C=0;C<v.length;C++)et(v[C],v[++C],v[++C]);fe.__c&&fe.__c(k,w),w.some(function(T){try{w=T.__h,T.__h=[],w.some(function(d){d.call(T)})}catch(d){fe.__e(d,T.__v)}})}function Lt(w){return typeof w!="object"||w==null||w.__b&&w.__b>0?w:Me(w)?w.map(Lt):me({},w)}function $t(w,k,v,C,T,d,h,p,c){var i,r,e,t,n,l,s,g=v.props||Re,y=k.props,a=k.type;if(a=="svg"?T="http://www.w3.org/2000/svg":a=="math"?T="http://www.w3.org/1998/Math/MathML":T||(T="http://www.w3.org/1999/xhtml"),d!=null){for(i=0;i<d.length;i++)if((n=d[i])&&"setAttribute"in n==!!a&&(a?n.localName==a:n.nodeType==3)){w=n,d[i]=null;break}}if(w==null){if(a==null)return document.createTextNode(y);w=document.createElementNS(T,a,y.is&&y),p&&(fe.__m&&fe.__m(k,d),p=!1),d=null}if(a==null)g===y||p&&w.data==y||(w.data=y);else{if(d=d&&He.call(w.childNodes),!p&&d!=null)for(g={},i=0;i<w.attributes.length;i++)g[(n=w.attributes[i]).name]=n.value;for(i in g)if(n=g[i],i!="children"){if(i=="dangerouslySetInnerHTML")e=n;else if(!(i in y)){if(i=="value"&&"defaultValue"in y||i=="checked"&&"defaultChecked"in y)continue;Oe(w,i,null,n,T)}}for(i in y)n=y[i],i=="children"?t=n:i=="dangerouslySetInnerHTML"?r=n:i=="value"?l=n:i=="checked"?s=n:p&&typeof n!="function"||g[i]===n||Oe(w,i,n,g[i],T);if(r)p||e&&(r.__html==e.__html||r.__html==w.innerHTML)||(w.innerHTML=r.__html),k.__k=[];else if(e&&(w.innerHTML=""),Pt(k.type=="template"?w.content:w,Me(t)?t:[t],k,v,C,a=="foreignObject"?"http://www.w3.org/1999/xhtml":T,d,h,d?d[0]:v.__k&&Ie(v,0),p,c),d!=null)for(i=d.length;i--;)Ze(d[i]);p||(i="value",a=="progress"&&l==null?w.removeAttribute("value"):l!=null&&(l!==w[i]||a=="progress"&&!l||a=="option"&&l!=g[i])&&Oe(w,i,l,g[i],T),i="checked",s!=null&&s!=w[i]&&Oe(w,i,s,g[i],T))}return w}function et(w,k,v){try{if(typeof w=="function"){var C=typeof w.__u=="function";C&&w.__u(),C&&k==null||(w.__u=w(k))}else w.current=k}catch(T){fe.__e(T,v)}}function Bt(w,k,v){var C,T;if(fe.unmount&&fe.unmount(w),(C=w.ref)&&(C.current&&C.current!=w.__e||et(C,null,k)),(C=w.__c)!=null){if(C.componentWillUnmount)try{C.componentWillUnmount()}catch(d){fe.__e(d,k)}C.base=C.__P=null}if(C=w.__k)for(T=0;T<C.length;T++)C[T]&&Bt(C[T],k,v||typeof w.type!="function");v||Ze(w.__e),w.__c=w.__=w.__e=void 0}function Kt(w,k,v){return this.constructor(w,v)}function Qt(w,k,v){var C,T,d,h;k==document&&(k=document.documentElement),fe.__&&fe.__(w,k),T=(C=!1)?null:k.__k,d=[],h=[],Je(k,w=k.__k=Qe(ke,null,[w]),T||Re,Re,k.namespaceURI,T?null:k.firstChild?He.call(k.childNodes):null,d,T?T.__e:k.firstChild,C,h),Ot(d,w,h)}He=xt.slice,fe={__e:function(w,k,v,C){for(var T,d,h;k=k.__;)if((T=k.__c)&&!T.__)try{if((d=T.constructor)&&d.getDerivedStateFromError!=null&&(T.setState(d.getDerivedStateFromError(w)),h=T.__d),T.componentDidCatch!=null&&(T.componentDidCatch(w,C||{}),h=T.__d),h)return T.__E=T}catch(p){w=p}throw w}},Ct=0,Se.prototype.setState=function(w,k){var v;v=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=me({},this.state),typeof w=="function"&&(w=w(me({},v),this.props)),w&&me(v,w),w!=null&&this.__v&&(k&&this._sb.push(k),nt(this))},Se.prototype.forceUpdate=function(w){this.__v&&(this.__e=!0,w&&this.__h.push(w),nt(this))},Se.prototype.render=ke,Ce=[],kt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,At=function(w,k){return w.__v.__b-k.__v.__b},je.__r=0,It=/(PointerCapture)$|Capture$/i,Xe=0,$e=ot(!1),Ke=ot(!0);var Gt=0;function ce(w,k,v,C,T,d){k||(k={});var h,p,c=k;if("ref"in c)for(p in c={},k)p=="ref"?h=k[p]:c[p]=k[p];var i={type:w,props:c,key:v,ref:h,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Gt,__i:-1,__u:0,__source:T,__self:d};if(typeof w=="function"&&(h=w.defaultProps))for(p in h)c[p]===void 0&&(c[p]=h[p]);return fe.vnode&&fe.vnode(i),i}var Pe,_e,Ve,st,Fe=0,Ut=[],ye=fe,at=ye.__b,lt=ye.__r,ut=ye.diffed,ft=ye.__c,ct=ye.unmount,ht=ye.__;function tt(w,k){ye.__h&&ye.__h(_e,w,Fe||k),Fe=0;var v=_e.__H||(_e.__H={__:[],__h:[]});return w>=v.__.length&&v.__.push({}),v.__[w]}function we(w){return Fe=1,Yt(Dt,w)}function Yt(w,k,v){var C=tt(Pe++,2);if(C.t=w,!C.__c&&(C.__=[v?v(k):Dt(void 0,k),function(p){var c=C.__N?C.__N[0]:C.__[0],i=C.t(c,p);c!==i&&(C.__N=[i,C.__[1]],C.__c.setState({}))}],C.__c=_e,!_e.__f)){var T=function(p,c,i){if(!C.__c.__H)return!0;var r=C.__c.__H.__.filter(function(t){return!!t.__c});if(r.every(function(t){return!t.__N}))return!d||d.call(this,p,c,i);var e=C.__c.props!==p;return r.forEach(function(t){if(t.__N){var n=t.__[0];t.__=t.__N,t.__N=void 0,n!==t.__[0]&&(e=!0)}}),d&&d.call(this,p,c,i)||e};_e.__f=!0;var d=_e.shouldComponentUpdate,h=_e.componentWillUpdate;_e.componentWillUpdate=function(p,c,i){if(this.__e){var r=d;d=void 0,T(p,c,i),d=r}h&&h.call(this,p,c,i)},_e.shouldComponentUpdate=T}return C.__N||C.__}function ze(w,k){var v=tt(Pe++,3);!ye.__s&&jt(v.__H,k)&&(v.__=w,v.u=k,_e.__H.__h.push(v))}function xe(w){return Fe=5,Nt(function(){return{current:w}},[])}function Nt(w,k){var v=tt(Pe++,7);return jt(v.__H,k)&&(v.__=w(),v.__H=k,v.__h=w),v.__}function Xt(){for(var w;w=Ut.shift();)if(w.__P&&w.__H)try{w.__H.__h.forEach(Ne),w.__H.__h.forEach(Ye),w.__H.__h=[]}catch(k){w.__H.__h=[],ye.__e(k,w.__v)}}ye.__b=function(w){_e=null,at&&at(w)},ye.__=function(w,k){w&&k.__k&&k.__k.__m&&(w.__m=k.__k.__m),ht&&ht(w,k)},ye.__r=function(w){lt&&lt(w),Pe=0;var k=(_e=w.__c).__H;k&&(Ve===_e?(k.__h=[],_e.__h=[],k.__.forEach(function(v){v.__N&&(v.__=v.__N),v.u=v.__N=void 0})):(k.__h.forEach(Ne),k.__h.forEach(Ye),k.__h=[],Pe=0)),Ve=_e},ye.diffed=function(w){ut&&ut(w);var k=w.__c;k&&k.__H&&(k.__H.__h.length&&(Ut.push(k)!==1&&st===ye.requestAnimationFrame||((st=ye.requestAnimationFrame)||Zt)(Xt)),k.__H.__.forEach(function(v){v.u&&(v.__H=v.u),v.u=void 0})),Ve=_e=null},ye.__c=function(w,k){k.some(function(v){try{v.__h.forEach(Ne),v.__h=v.__h.filter(function(C){return!C.__||Ye(C)})}catch(C){k.some(function(T){T.__h&&(T.__h=[])}),k=[],ye.__e(C,v.__v)}}),ft&&ft(w,k)},ye.unmount=function(w){ct&&ct(w);var k,v=w.__c;v&&v.__H&&(v.__H.__.forEach(function(C){try{Ne(C)}catch(T){k=T}}),v.__H=void 0,k&&ye.__e(k,v.__v))};var pt=typeof requestAnimationFrame=="function";function Zt(w){var k,v=function(){clearTimeout(C),pt&&cancelAnimationFrame(k),setTimeout(w)},C=setTimeout(v,35);pt&&(k=requestAnimationFrame(v))}function Ne(w){var k=_e,v=w.__c;typeof v=="function"&&(w.__c=void 0,v()),_e=k}function Ye(w){var k=_e;w.__c=w.__(),_e=k}function jt(w,k){return!w||w.length!==k.length||k.some(function(v,C){return v!==w[C]})}function Dt(w,k){return typeof k=="function"?k(w):k}function Jt(w,k){for(var v in k)w[v]=k[v];return w}function dt(w,k){for(var v in w)if(v!=="__source"&&!(v in k))return!0;for(var C in k)if(C!=="__source"&&w[C]!==k[C])return!0;return!1}function _t(w,k){this.props=w,this.context=k}(_t.prototype=new Se).isPureReactComponent=!0,_t.prototype.shouldComponentUpdate=function(w,k){return dt(this.props,w)||dt(this.state,k)};var vt=fe.__b;fe.__b=function(w){w.type&&w.type.__f&&w.ref&&(w.props.ref=w.ref,w.ref=null),vt&&vt(w)};var er=fe.__e;fe.__e=function(w,k,v,C){if(w.then){for(var T,d=k;d=d.__;)if((T=d.__c)&&T.__c)return k.__e==null&&(k.__e=v.__e,k.__k=v.__k),T.__c(w,k)}er(w,k,v,C)};var yt=fe.unmount;function Ft(w,k,v){return w&&(w.__c&&w.__c.__H&&(w.__c.__H.__.forEach(function(C){typeof C.__c=="function"&&C.__c()}),w.__c.__H=null),(w=Jt({},w)).__c!=null&&(w.__c.__P===v&&(w.__c.__P=k),w.__c.__e=!0,w.__c=null),w.__k=w.__k&&w.__k.map(function(C){return Ft(C,k,v)})),w}function zt(w,k,v){return w&&v&&(w.__v=null,w.__k=w.__k&&w.__k.map(function(C){return zt(C,k,v)}),w.__c&&w.__c.__P===k&&(w.__e&&v.appendChild(w.__e),w.__c.__e=!0,w.__c.__P=v)),w}function qe(){this.__u=0,this.o=null,this.__b=null}function Ht(w){var k=w.__.__c;return k&&k.__a&&k.__a(w)}function Le(){this.i=null,this.l=null}fe.unmount=function(w){var k=w.__c;k&&k.__R&&k.__R(),k&&32&w.__u&&(w.type=null),yt&&yt(w)},(qe.prototype=new Se).__c=function(w,k){var v=k.__c,C=this;C.o==null&&(C.o=[]),C.o.push(v);var T=Ht(C.__v),d=!1,h=function(){d||(d=!0,v.__R=null,T?T(p):p())};v.__R=h;var p=function(){if(!--C.__u){if(C.state.__a){var c=C.state.__a;C.__v.__k[0]=zt(c,c.__c.__P,c.__c.__O)}var i;for(C.setState({__a:C.__b=null});i=C.o.pop();)i.forceUpdate()}};C.__u++||32&k.__u||C.setState({__a:C.__b=C.__v.__k[0]}),w.then(h,h)},qe.prototype.componentWillUnmount=function(){this.o=[]},qe.prototype.render=function(w,k){if(this.__b){if(this.__v.__k){var v=document.createElement("div"),C=this.__v.__k[0].__c;this.__v.__k[0]=Ft(this.__b,v,C.__O=C.__P)}this.__b=null}var T=k.__a&&Qe(ke,null,w.fallback);return T&&(T.__u&=-33),[Qe(ke,null,k.__a?null:w.children),T]};var gt=function(w,k,v){if(++v[1]===v[0]&&w.l.delete(k),w.props.revealOrder&&(w.props.revealOrder[0]!=="t"||!w.l.size))for(v=w.i;v;){for(;v.length>3;)v.pop()();if(v[1]<v[0])break;w.i=v=v[2]}};(Le.prototype=new Se).__a=function(w){var k=this,v=Ht(k.__v),C=k.l.get(w);return C[0]++,function(T){var d=function(){k.props.revealOrder?(C.push(T),gt(k,w,C)):T()};v?v(d):d()}},Le.prototype.render=function(w){this.i=null,this.l=new Map;var k=De(w.children);w.revealOrder&&w.revealOrder[0]==="b"&&k.reverse();for(var v=k.length;v--;)this.l.set(k[v],this.i=[1,0,this.i]);return w.children},Le.prototype.componentDidUpdate=Le.prototype.componentDidMount=function(){var w=this;this.l.forEach(function(k,v){gt(w,v,k)})};var tr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ir=/[A-Z0-9]/g,or=typeof document<"u",sr=function(w){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(w)};Se.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(w){Object.defineProperty(Se.prototype,w,{configurable:!0,get:function(){return this["UNSAFE_"+w]},set:function(k){Object.defineProperty(this,w,{configurable:!0,writable:!0,value:k})}})});var bt=fe.event;function ar(){}function lr(){return this.cancelBubble}function ur(){return this.defaultPrevented}fe.event=function(w){return bt&&(w=bt(w)),w.persist=ar,w.isPropagationStopped=lr,w.isDefaultPrevented=ur,w.nativeEvent=w};var fr={enumerable:!1,configurable:!0,get:function(){return this.class}},mt=fe.vnode;fe.vnode=function(w){typeof w.type=="string"&&(function(k){var v=k.props,C=k.type,T={},d=C.indexOf("-")===-1;for(var h in v){var p=v[h];if(!(h==="value"&&"defaultValue"in v&&p==null||or&&h==="children"&&C==="noscript"||h==="class"||h==="className")){var c=h.toLowerCase();h==="defaultValue"&&"value"in v&&v.value==null?h="value":h==="download"&&p===!0?p="":c==="translate"&&p==="no"?p=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?h="ondblclick":c!=="onchange"||C!=="input"&&C!=="textarea"||sr(v.type)?c==="onfocus"?h="onfocusin":c==="onblur"?h="onfocusout":nr.test(h)&&(h=c):c=h="oninput":d&&rr.test(h)?h=h.replace(ir,"-$&").toLowerCase():p===null&&(p=void 0),c==="oninput"&&T[h=c]&&(h="oninputCapture"),T[h]=p}}C=="select"&&T.multiple&&Array.isArray(T.value)&&(T.value=De(v.children).forEach(function(i){i.props.selected=T.value.indexOf(i.props.value)!=-1})),C=="select"&&T.defaultValue!=null&&(T.value=De(v.children).forEach(function(i){i.props.selected=T.multiple?T.defaultValue.indexOf(i.props.value)!=-1:T.defaultValue==i.props.value})),v.class&&!v.className?(T.class=v.class,Object.defineProperty(T,"className",fr)):(v.className&&!v.class||v.class&&v.className)&&(T.class=T.className=v.className),k.props=T})(w),w.$$typeof=tr,mt&&mt(w)};var wt=fe.__r;fe.__r=function(w){wt&&wt(w),w.__c};var St=fe.diffed;fe.diffed=function(w){St&&St(w);var k=w.props,v=w.__e;v!=null&&w.type==="textarea"&&"value"in k&&k.value!==v.value&&(v.value=k.value==null?"":k.value)};var cr=ke;function hr({state:w,onStart:k,onStop:v,disabled:C,error:T,mqttState:d}){const h=C||w==="starting";return ce("div",{className:"control-bar",children:[ce("div",{children:[ce("div",{className:"eyebrow",children:"Pipeline"}),ce("div",{className:"actions",children:[ce("button",{className:"primary",disabled:h||w==="streaming",onClick:k,children:w==="starting"?"Starting…":"Start Pipeline"}),ce("button",{className:"secondary",disabled:h||w==="idle",onClick:v,children:"Stop"})]})]}),ce("div",{className:"helper",children:T?ce("span",{className:"error",children:T}):ce("span",{className:"pill",children:pr(w)})})]})}function pr(w){switch(w){case"idle":return"Idle. Click start to launch pipeline";case"starting":return"Starting services…";case"streaming":return"Running.";case"error":return"Error. Check logs.";default:return""}}const dr={idle:"Idle",starting:"Starting…",streaming:"Streaming",error:"Error"};function _r({pipelineState:w,videoState:k,mqttState:v,host:C,lastUpdated:T}){return ce("header",{className:"status-header",children:[ce("div",{children:[ce("div",{className:"eyebrow",children:"DeepStream Control"}),ce("h1",{children:"RTSP → WebRTC"})]}),ce("div",{className:"status-badges",children:[ce("span",{className:"badge",children:[ce("span",{className:`dot ${w}`}),dr[w]]}),ce("span",{className:"badge secondary",children:["Video: ",vr(k)]}),ce("span",{className:"badge secondary",children:["MQTT: ",yr(v)]}),ce("span",{className:"badge tertiary",children:["Host: ",C]}),T&&ce("span",{className:"badge tertiary",children:["Updated: ",T.toLocaleTimeString()]})]})]})}function vr(w){switch(w){case"idle":return"idle";case"connecting":return"connecting";case"streaming":return"streaming";case"error":return"error";default:return""}}function yr(w){switch(w){case"idle":return"idle";case"connecting":return"connecting";case"connected":return"connected";case"error":return"error";default:return""}}const gr="http://127.0.0.1:8889/ds-test/whep",br="deepstream/person_count";function mr(){return gr}function wr(){const w=window.location.protocol==="https:"?"wss:":"ws:",k=window.location.hostname||"127.0.0.1";return`${w}//${k}:9001`}function Sr(){return br}function Er({active:w,personCount:k,onStatusChange:v}){const C=xe(null),T=xe(null),[d,h]=we("idle"),[p,c]=we("Waiting to start"),i=xe(null),r=xe(!1),e="/camera.mp4";ze(()=>{v==null||v(d)},[d,v]),ze(()=>{if(!w){Et(T),i.current&&(clearTimeout(i.current),i.current=null),h("idle"),c("Waiting to start");return}let n=!1;const l=async()=>{if(!r.current){r.current=!0;try{h("connecting"),c("Connecting…"),await Tr(T,C,()=>{i.current||(h("connecting"),c("Reconnecting…"),i.current=setTimeout(()=>{i.current=null,l()},1500))}),n||(h("streaming"),c("Live"))}catch(s){console.error("WHEP connect failed",s),n||(h("error"),c("Video connection failed"),i.current=setTimeout(()=>{i.current=null,l()},2e3))}finally{r.current=!1}}};return l(),()=>{n=!0,Et(T),i.current&&(clearTimeout(i.current),i.current=null)}},[w]);const t=d!=="streaming";return ce("div",{className:"video-pane",children:ce("div",{className:"video-frame",children:[ce("video",{ref:C,autoPlay:!0,playsInline:!0,className:t?"hidden":""}),t&&ce("div",{className:"placeholder",children:[ce("video",{className:"placeholder-video",src:e,autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),ce("div",{className:"placeholder-copy",children:[ce("div",{className:"pill ghost",children:"Stream offline"}),ce("div",{className:"title",children:"DeepStream Surveillance"}),ce("div",{className:"subtitle",children:"Start the pipeline to begin streaming"})]})]}),ce("div",{className:`live-pill ${d==="streaming"?"on":""}`,children:[ce("span",{className:"dot"}),d==="streaming"?"Live":"Standby"]}),ce("div",{className:"count-pill",children:["Persons: ",k??0]}),ce("div",{className:"status-chip",children:p})]})})}async function Tr(w,k,v){var i;w.current&&(w.current.close(),w.current=null);const C=new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302"]}]});w.current=C,C.onconnectionstatechange=()=>{const r=C.connectionState;(r==="failed"||r==="disconnected")&&(C.close(),w.current=null,v())},C.ontrack=r=>{k.current&&(k.current.srcObject=r.streams[0])},C.addTransceiver("video",{direction:"recvonly"});const T=await C.createOffer();await C.setLocalDescription(T),await Cr(C);const d=(i=C.localDescription)==null?void 0:i.sdp;if(!d)throw new Error("Missing local SDP");const h=mr(),p=await fetch(h,{method:"POST",headers:{"Content-Type":"application/sdp"},body:d});if(!p.ok)throw new Error(`WHEP error: ${p.status}`);const c=await p.text();await C.setRemoteDescription({type:"answer",sdp:c})}function Cr(w){return w.iceGatheringState==="complete"?Promise.resolve():new Promise((k,v)=>{const C=setTimeout(()=>{w.removeEventListener("icegatheringstatechange",T),v(new Error("ICE gathering timeout"))},5e3),T=()=>{w.iceGatheringState==="complete"&&(clearTimeout(C),w.removeEventListener("icegatheringstatechange",T),k())};w.addEventListener("icegatheringstatechange",T)})}function Et(w){w&&w.current&&(w.current.close(),w.current=null)}async function kr(){const w=await fetch("/api/start",{method:"POST"});if(!w.ok)throw new Error(`Start failed: ${w.status} ${w.statusText}`)}async function Ar(){const w=await fetch("/api/stop",{method:"POST"});if(!w.ok)throw new Error(`Stop failed: ${w.status} ${w.statusText}`)}async function Ir(){const w=await fetch("/api/status");if(!w.ok)throw new Error(`Status failed: ${w.status} ${w.statusText}`);return w.json()}var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xr(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function Be(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var We={exports:{}},Tt;function Rr(){return Tt||(Tt=1,(function(w,k){(function(v){w.exports=v()})(function(){return(function(){function v(C,T,d){function h(i,r){if(!T[i]){if(!C[i]){var e=typeof Be=="function"&&Be;if(!r&&e)return e(i,!0);if(p)return p(i,!0);var t=new Error("Cannot find module '"+i+"'");throw t.code="MODULE_NOT_FOUND",t}var n=T[i]={exports:{}};C[i][0].call(n.exports,function(l){var s=C[i][1][l];return h(s||l)},n,n.exports,v,C,T,d)}return T[i].exports}for(var p=typeof Be=="function"&&Be,c=0;c<d.length;c++)h(d[c]);return h}return v})()({1:[function(v,C,T){(function(d,h){(function(){const p=v("events").EventEmitter,c=v("./store"),i=v("./topic-alias-recv"),r=v("./topic-alias-send"),e=v("mqtt-packet"),t=v("./default-message-id-provider"),n=v("readable-stream").Writable,l=v("inherits"),s=v("reinterval"),g=v("rfdc/default"),y=v("./validations"),a=v("xtend"),o=v("debug")("mqttjs:client"),b=d?d.nextTick:function(M){setTimeout(M,0)},A=h.setImmediate||function(M){b(M)},P={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0},B={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function U(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function L(M,x){if(M.options.protocolVersion===5&&x.cmd==="publish"){let z;x.properties&&(z=x.properties.topicAlias);const W=x.topic.toString();if(M.topicAliasSend)if(z){if(W.length!==0&&(o("applyTopicAlias :: register topic: %s - alias: %d",W,z),!M.topicAliasSend.put(W,z)))return o("applyTopicAlias :: error out of range. topic: %s - alias: %d",W,z),new Error("Sending Topic Alias out of range")}else W.length!==0&&(M.options.autoAssignTopicAlias?(z=M.topicAliasSend.getAliasByTopic(W),z?(x.topic="",x.properties={...x.properties,topicAlias:z},o("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",W,z)):(z=M.topicAliasSend.getLruAlias(),M.topicAliasSend.put(W,z),x.properties={...x.properties,topicAlias:z},o("applyTopicAlias :: auto assign topic: %s - alias: %d",W,z))):M.options.autoUseTopicAlias&&(z=M.topicAliasSend.getAliasByTopic(W),z&&(x.topic="",x.properties={...x.properties,topicAlias:z},o("applyTopicAlias :: auto use topic: %s - alias: %d",W,z))));else if(z)return o("applyTopicAlias :: error out of range. topic: %s - alias: %d",W,z),new Error("Sending Topic Alias out of range")}}function Q(M,x){let z;x.properties&&(z=x.properties.topicAlias);let W=x.topic.toString();if(W.length===0){if(typeof z>"u")return new Error("Unregistered Topic Alias");if(W=M.topicAliasSend.getTopicByAlias(z),typeof W>"u")return new Error("Unregistered Topic Alias");x.topic=W}z&&delete x.properties.topicAlias}function u(M,x,z){o("sendPacket :: packet: %O",x),o("sendPacket :: emitting `packetsend`"),M.emit("packetsend",x),o("sendPacket :: writing to stream");const W=e.writeToStream(x,M.stream,M.options);o("sendPacket :: writeToStream result %s",W),!W&&z&&z!==q?(o("sendPacket :: handle events on `drain` once through callback."),M.stream.once("drain",z)):z&&(o("sendPacket :: invoking cb"),z())}function E(M){M&&(o("flush: queue exists? %b",!!M),Object.keys(M).forEach(function(x){typeof M[x].cb=="function"&&(M[x].cb(new Error("Connection closed")),delete M[x])}))}function m(M){M&&(o("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(M).forEach(function(x){M[x].volatile&&typeof M[x].cb=="function"&&(M[x].cb(new Error("Connection closed")),delete M[x])}))}function D(M,x,z,W){o("storeAndSend :: store packet with cmd %s to outgoingStore",x.cmd);let se=x,oe;if(se.cmd==="publish"&&(se=g(x),oe=Q(M,se),oe))return z&&z(oe);M.outgoingStore.put(se,function(K){if(K)return z&&z(K);W(),u(M,x,z)})}function q(M){o("nop ::",M)}function H(M,x){let z;const W=this;if(!(this instanceof H))return new H(M,x);this.options=x||{};for(z in P)typeof this.options[z]>"u"?this.options[z]=P[z]:this.options[z]=x[z];o("MqttClient :: options.protocol",x.protocol),o("MqttClient :: options.protocolVersion",x.protocolVersion),o("MqttClient :: options.username",x.username),o("MqttClient :: options.keepalive",x.keepalive),o("MqttClient :: options.reconnectPeriod",x.reconnectPeriod),o("MqttClient :: options.rejectUnauthorized",x.rejectUnauthorized),o("MqttClient :: options.topicAliasMaximum",x.topicAliasMaximum),this.options.clientId=typeof x.clientId=="string"?x.clientId:U(),o("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=x.protocolVersion===5&&x.customHandleAcks?x.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=M,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new t:this.options.messageIdProvider,this.outgoingStore=x.outgoingStore||new c,this.incomingStore=x.incomingStore||new c,this.queueQoSZero=x.queueQoSZero===void 0?!0:x.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,x.topicAliasMaximum>0&&(x.topicAliasMaximum>65535?o("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new i(x.topicAliasMaximum)),this.on("connect",function(){const se=this.queue;function oe(){const te=se.shift();o("deliver :: entry %o",te);let K=null;if(!te){W._resubscribe();return}K=te.packet,o("deliver :: call _sendPacket for %o",K);let X=!0;K.messageId&&K.messageId!==0&&(W.messageIdProvider.register(K.messageId)||(X=!1)),X?W._sendPacket(K,function(J){te.cb&&te.cb(J),oe()}):(o("messageId: %d has already used. The message is skipped and removed.",K.messageId),oe())}o("connect :: sending queued packets"),oe()}),this.on("close",function(){o("close :: connected set to `false`"),this.connected=!1,o("close :: clearing connackTimer"),clearTimeout(this.connackTimer),o("close :: clearing ping timer"),W.pingTimer!==null&&(W.pingTimer.clear(),W.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),o("close :: calling _setupReconnect"),this._setupReconnect()}),p.call(this),o("MqttClient :: setting up stream"),this._setupStream()}l(H,p),H.prototype._setupStream=function(){const M=this,x=new n,z=e.parser(this.options);let W=null;const se=[];o("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),o("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),z.on("packet",function(J){o("parser :: on packet push to packets array."),se.push(J)});function oe(){if(se.length)b(te);else{const J=W;W=null,J()}}function te(){o("work :: getting next packet in queue");const J=se.shift();if(J)o("work :: packet pulled from queue"),M._handlePacket(J,oe);else{o("work :: no packets in queue");const ae=W;W=null,o("work :: done flag is %s",!!ae),ae&&ae()}}x._write=function(J,ae,le){W=le,o("writable stream :: parsing buffer"),z.parse(J),te()};function K(J){o("streamErrorHandler :: error",J.message),J.code?(o("streamErrorHandler :: emitting error"),M.emit("error",J)):q(J)}o("_setupStream :: pipe stream to writable stream"),this.stream.pipe(x),this.stream.on("error",K),this.stream.on("close",function(){o("(%s)stream :: on close",M.options.clientId),m(M.outgoing),o("stream: emit close to MqttClient"),M.emit("close")}),o("_setupStream: sending packet `connect`");const X=Object.create(this.options);if(X.cmd="connect",this.topicAliasRecv&&(X.properties||(X.properties={}),this.topicAliasRecv&&(X.properties.topicAliasMaximum=this.topicAliasRecv.max)),u(this,X),z.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return M.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){const J=a({cmd:"auth",reasonCode:0},this.options.authPacket);u(this,J)}}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){o("!!connectTimeout hit!! Calling _cleanUp with force `true`"),M._cleanUp(!0)},this.options.connectTimeout)},H.prototype._handlePacket=function(M,x){const z=this.options;if(z.protocolVersion===5&&z.properties&&z.properties.maximumPacketSize&&z.properties.maximumPacketSize<M.length)return this.emit("error",new Error("exceeding packets size "+M.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(o("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",M),M.cmd){case"publish":this._handlePublish(M,x);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(M),x();break;case"pubrel":this._handlePubrel(M,x);break;case"connack":this._handleConnack(M),x();break;case"auth":this._handleAuth(M),x();break;case"pingresp":this._handlePingresp(M),x();break;case"disconnect":this._handleDisconnect(M),x();break}},H.prototype._checkDisconnecting=function(M){return this.disconnecting&&(M&&M!==q?M(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},H.prototype.publish=function(M,x,z,W){o("publish :: message `%s` to topic `%s`",x,M);const se=this.options;if(typeof z=="function"&&(W=z,z=null),z=a({qos:0,retain:!1,dup:!1},z),this._checkDisconnecting(W))return this;const te=this,K=function(){let X=0;if((z.qos===1||z.qos===2)&&(X=te._nextId(),X===null))return o("No messageId left"),!1;const J={cmd:"publish",topic:M,payload:x,qos:z.qos,retain:z.retain,messageId:X,dup:z.dup};switch(se.protocolVersion===5&&(J.properties=z.properties),o("publish :: qos",z.qos),z.qos){case 1:case 2:te.outgoing[J.messageId]={volatile:!1,cb:W||q},o("MqttClient:publish: packet cmd: %s",J.cmd),te._sendPacket(J,void 0,z.cbStorePut);break;default:o("MqttClient:publish: packet cmd: %s",J.cmd),te._sendPacket(J,W,z.cbStorePut);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,cbStorePut:z.cbStorePut,callback:W}),this},H.prototype.subscribe=function(){const M=this,x=new Array(arguments.length);for(let le=0;le<arguments.length;le++)x[le]=arguments[le];const z=[];let W=x.shift();const se=W.resubscribe;let oe=x.pop()||q,te=x.pop();const K=this.options.protocolVersion;delete W.resubscribe,typeof W=="string"&&(W=[W]),typeof oe!="function"&&(te=oe,oe=q);const X=y.validateTopics(W);if(X!==null)return A(oe,new Error("Invalid topic "+X)),this;if(this._checkDisconnecting(oe))return o("subscribe: discconecting true"),this;const J={qos:0};if(K===5&&(J.nl=!1,J.rap=!1,J.rh=0),te=a(J,te),Array.isArray(W)?W.forEach(function(le){if(o("subscribe: array topic %s",le),!Object.prototype.hasOwnProperty.call(M._resubscribeTopics,le)||M._resubscribeTopics[le].qos<te.qos||se){const ie={topic:le,qos:te.qos};K===5&&(ie.nl=te.nl,ie.rap=te.rap,ie.rh=te.rh,ie.properties=te.properties),o("subscribe: pushing topic `%s` and qos `%s` to subs list",ie.topic,ie.qos),z.push(ie)}}):Object.keys(W).forEach(function(le){if(o("subscribe: object topic %s",le),!Object.prototype.hasOwnProperty.call(M._resubscribeTopics,le)||M._resubscribeTopics[le].qos<W[le].qos||se){const ie={topic:le,qos:W[le].qos};K===5&&(ie.nl=W[le].nl,ie.rap=W[le].rap,ie.rh=W[le].rh,ie.properties=te.properties),o("subscribe: pushing `%s` to subs list",ie),z.push(ie)}}),!z.length)return oe(null,[]),this;const ae=function(){const le=M._nextId();if(le===null)return o("No messageId left"),!1;const ie={cmd:"subscribe",subscriptions:z,qos:1,retain:!1,dup:!1,messageId:le};if(te.properties&&(ie.properties=te.properties),M.options.resubscribe){o("subscribe :: resubscribe true");const Y=[];z.forEach(function(F){if(M.options.reconnectPeriod>0){const ee={qos:F.qos};K===5&&(ee.nl=F.nl||!1,ee.rap=F.rap||!1,ee.rh=F.rh||0,ee.properties=F.properties),M._resubscribeTopics[F.topic]=ee,Y.push(F.topic)}}),M.messageIdToTopic[ie.messageId]=Y}return M.outgoing[ie.messageId]={volatile:!0,cb:function(Y,F){if(!Y){const ee=F.granted;for(let j=0;j<ee.length;j+=1)z[j].qos=ee[j]}oe(Y,z)}},o("subscribe :: call _sendPacket"),M._sendPacket(ie),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ae())&&this._storeProcessingQueue.push({invoke:ae,callback:oe}),this},H.prototype.unsubscribe=function(){const M=this,x=new Array(arguments.length);for(let K=0;K<arguments.length;K++)x[K]=arguments[K];let z=x.shift(),W=x.pop()||q,se=x.pop();typeof z=="string"&&(z=[z]),typeof W!="function"&&(se=W,W=q);const oe=y.validateTopics(z);if(oe!==null)return A(W,new Error("Invalid topic "+oe)),this;if(M._checkDisconnecting(W))return this;const te=function(){const K=M._nextId();if(K===null)return o("No messageId left"),!1;const X={cmd:"unsubscribe",qos:1,messageId:K};return typeof z=="string"?X.unsubscriptions=[z]:Array.isArray(z)&&(X.unsubscriptions=z),M.options.resubscribe&&X.unsubscriptions.forEach(function(J){delete M._resubscribeTopics[J]}),typeof se=="object"&&se.properties&&(X.properties=se.properties),M.outgoing[X.messageId]={volatile:!0,cb:W},o("unsubscribe: call _sendPacket"),M._sendPacket(X),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!te())&&this._storeProcessingQueue.push({invoke:te,callback:W}),this},H.prototype.end=function(M,x,z){const W=this;o("end :: (%s)",this.options.clientId),(M==null||typeof M!="boolean")&&(z=x||q,x=M,M=!1,typeof x!="object"&&(z=x,x=null,typeof z!="function"&&(z=q))),typeof x!="object"&&(z=x,x=null),o("end :: cb? %s",!!z),z=z||q;function se(){o("end :: closeStores: closing incoming and outgoing stores"),W.disconnected=!0,W.incomingStore.close(function(te){W.outgoingStore.close(function(K){if(o("end :: closeStores: emitting end"),W.emit("end"),z){const X=te||K;o("end :: closeStores: invoking callback with args"),z(X)}})}),W._deferredReconnect&&W._deferredReconnect()}function oe(){o("end :: (%s) :: finish :: calling _cleanUp with force %s",W.options.clientId,M),W._cleanUp(M,()=>{o("end :: finish :: calling process.nextTick on closeStores"),b(se.bind(W))},x)}return this.disconnecting?(z(),this):(this._clearReconnect(),this.disconnecting=!0,!M&&Object.keys(this.outgoing).length>0?(o("end :: (%s) :: calling finish in 10ms once outgoing is empty",W.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,oe,10))):(o("end :: (%s) :: immediately calling finish",W.options.clientId),oe()),this)},H.prototype.removeOutgoingMessage=function(M){const x=this.outgoing[M]?this.outgoing[M].cb:null;return delete this.outgoing[M],this.outgoingStore.del({messageId:M},function(){x(new Error("Message removed"))}),this},H.prototype.reconnect=function(M){o("client reconnect");const x=this,z=function(){M?(x.options.incomingStore=M.incomingStore,x.options.outgoingStore=M.outgoingStore):(x.options.incomingStore=null,x.options.outgoingStore=null),x.incomingStore=x.options.incomingStore||new c,x.outgoingStore=x.options.outgoingStore||new c,x.disconnecting=!1,x.disconnected=!1,x._deferredReconnect=null,x._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=z:z(),this},H.prototype._reconnect=function(){o("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),o("client already connected. disconnecting first.")):(o("_reconnect: calling _setupStream"),this._setupStream())},H.prototype._setupReconnect=function(){const M=this;!M.disconnecting&&!M.reconnectTimer&&M.options.reconnectPeriod>0?(this.reconnecting||(o("_setupReconnect :: emit `offline` state"),this.emit("offline"),o("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),o("_setupReconnect :: setting reconnectTimer for %d ms",M.options.reconnectPeriod),M.reconnectTimer=setInterval(function(){o("reconnectTimer :: reconnect triggered!"),M._reconnect()},M.options.reconnectPeriod)):o("_setupReconnect :: doing nothing...")},H.prototype._clearReconnect=function(){o("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},H.prototype._cleanUp=function(M,x){const z=arguments[2];if(x&&(o("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",x)),o("_cleanUp :: forced? %s",M),M)this.options.reconnectPeriod===0&&this.options.clean&&E(this.outgoing),o("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const W=a({cmd:"disconnect"},z);o("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(W,A.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(o("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(o("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),x&&!this.connected&&(o("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",x),x())},H.prototype._sendPacket=function(M,x,z){o("_sendPacket :: (%s) ::  start",this.options.clientId),z=z||q,x=x||q;const W=L(this,M);if(W){x(W);return}if(!this.connected){if(M.cmd==="auth"){this._shiftPingInterval(),u(this,M,x);return}o("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(M,x,z);return}switch(this._shiftPingInterval(),M.cmd){case"publish":break;case"pubrel":D(this,M,x,z);return;default:u(this,M,x);return}switch(M.qos){case 2:case 1:D(this,M,x,z);break;case 0:default:u(this,M,x);break}o("_sendPacket :: (%s) ::  end",this.options.clientId)},H.prototype._storePacket=function(M,x,z){o("_storePacket :: packet: %o",M),o("_storePacket :: cb? %s",!!x),z=z||q;let W=M;if(W.cmd==="publish"){W=g(M);const se=Q(this,W);if(se)return x&&x(se)}(W.qos||0)===0&&this.queueQoSZero||W.cmd!=="publish"?this.queue.push({packet:W,cb:x}):W.qos>0?(x=this.outgoing[W.messageId]?this.outgoing[W.messageId].cb:null,this.outgoingStore.put(W,function(se){if(se)return x&&x(se);z()})):x&&x(new Error("No connection to broker"))},H.prototype._setupPingTimer=function(){o("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const M=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=s(function(){M._checkPing()},this.options.keepalive*1e3))},H.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(this.options.keepalive*1e3)},H.prototype._checkPing=function(){o("_checkPing :: checking ping..."),this.pingResp?(o("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(o("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},H.prototype._handlePingresp=function(){this.pingResp=!0},H.prototype._handleConnack=function(M){o("_handleConnack");const x=this.options,W=x.protocolVersion===5?M.reasonCode:M.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,M.properties){if(M.properties.topicAliasMaximum){if(M.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}M.properties.topicAliasMaximum>0&&(this.topicAliasSend=new r(M.properties.topicAliasMaximum))}M.properties.serverKeepAlive&&x.keepalive&&(x.keepalive=M.properties.serverKeepAlive,this._shiftPingInterval()),M.properties.maximumPacketSize&&(x.properties||(x.properties={}),x.properties.maximumPacketSize=M.properties.maximumPacketSize)}if(W===0)this.reconnecting=!1,this._onConnect(M);else if(W>0){const se=new Error("Connection refused: "+B[W]);se.code=W,this.emit("error",se)}},H.prototype._handleAuth=function(M){const z=this.options.protocolVersion,W=z===5?M.reasonCode:M.returnCode;if(z!==5){const oe=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+z);oe.code=W,this.emit("error",oe);return}const se=this;this.handleAuth(M,function(oe,te){if(oe){se.emit("error",oe);return}if(W===24)se.reconnecting=!1,se._sendPacket(te);else{const K=new Error("Connection refused: "+B[W]);oe.code=W,se.emit("error",K)}})},H.prototype.handleAuth=function(M,x){x()},H.prototype._handlePublish=function(M,x){o("_handlePublish: packet %o",M),x=typeof x<"u"?x:q;let z=M.topic.toString();const W=M.payload,se=M.qos,oe=M.messageId,te=this,K=this.options,X=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let J;if(M.properties&&(J=M.properties.topicAlias),typeof J<"u")if(z.length===0)if(J>0&&J<=65535){const ae=this.topicAliasRecv.getTopicByAlias(J);if(ae)z=ae,o("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",z,J);else{o("_handlePublish :: unregistered topic alias. alias: %d",J),this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{o("_handlePublish :: topic alias out of range. alias: %d",J),this.emit("error",new Error("Received Topic Alias is out of range"));return}else if(this.topicAliasRecv.put(z,J))o("_handlePublish :: registered topic: %s - alias: %d",z,J);else{o("_handlePublish :: topic alias out of range. alias: %d",J),this.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(o("_handlePublish: qos %d",se),se){case 2:{K.customHandleAcks(z,W,M,function(J,ae){if(J instanceof Error||(ae=J,J=null),J)return te.emit("error",J);if(X.indexOf(ae)===-1)return te.emit("error",new Error("Wrong reason code for pubrec"));ae?te._sendPacket({cmd:"pubrec",messageId:oe,reasonCode:ae},x):te.incomingStore.put(M,function(){te._sendPacket({cmd:"pubrec",messageId:oe},x)})});break}case 1:{K.customHandleAcks(z,W,M,function(J,ae){if(J instanceof Error||(ae=J,J=null),J)return te.emit("error",J);if(X.indexOf(ae)===-1)return te.emit("error",new Error("Wrong reason code for puback"));ae||te.emit("message",z,W,M),te.handleMessage(M,function(le){if(le)return x&&x(le);te._sendPacket({cmd:"puback",messageId:oe,reasonCode:ae},x)})});break}case 0:this.emit("message",z,W,M),this.handleMessage(M,x);break;default:o("_handlePublish: unknown QoS. Doing nothing.");break}},H.prototype.handleMessage=function(M,x){x()},H.prototype._handleAck=function(M){const x=M.messageId,z=M.cmd;let W=null;const se=this.outgoing[x]?this.outgoing[x].cb:null,oe=this;let te;if(!se){o("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(o("_handleAck :: packet type",z),z){case"pubcomp":case"puback":{const K=M.reasonCode;K&&K>0&&K!==16&&(te=new Error("Publish error: "+B[K]),te.code=K,se(te,M)),delete this.outgoing[x],this.outgoingStore.del(M,se),this.messageIdProvider.deallocate(x),this._invokeStoreProcessingQueue();break}case"pubrec":{W={cmd:"pubrel",qos:2,messageId:x};const K=M.reasonCode;K&&K>0&&K!==16?(te=new Error("Publish error: "+B[K]),te.code=K,se(te,M)):this._sendPacket(W);break}case"suback":{delete this.outgoing[x],this.messageIdProvider.deallocate(x);for(let K=0;K<M.granted.length;K++)if((M.granted[K]&128)!==0){const X=this.messageIdToTopic[x];X&&X.forEach(function(J){delete oe._resubscribeTopics[J]})}this._invokeStoreProcessingQueue(),se(null,M);break}case"unsuback":{delete this.outgoing[x],this.messageIdProvider.deallocate(x),this._invokeStoreProcessingQueue(),se(null);break}default:oe.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")},H.prototype._handlePubrel=function(M,x){o("handling pubrel packet"),x=typeof x<"u"?x:q;const z=M.messageId,W=this,se={cmd:"pubcomp",messageId:z};W.incomingStore.get(M,function(oe,te){oe?W._sendPacket(se,x):(W.emit("message",te.topic,te.payload,te),W.handleMessage(te,function(K){if(K)return x(K);W.incomingStore.del(te,q),W._sendPacket(se,x)}))})},H.prototype._handleDisconnect=function(M){this.emit("disconnect",M)},H.prototype._nextId=function(){return this.messageIdProvider.allocate()},H.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},H.prototype._resubscribe=function(){o("_resubscribe");const M=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&M.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){o("_resubscribe: protocolVersion 5");for(let x=0;x<M.length;x++){const z={};z[M[x]]=this._resubscribeTopics[M[x]],z.resubscribe=!0,this.subscribe(z,{properties:z[M[x]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},H.prototype._onConnect=function(M){if(this.disconnected){this.emit("connect",M);return}const x=this;this.connackPacket=M,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;function z(){let W=x.outgoingStore.createStream();function se(){x._storeProcessing=!1,x._packetIdsDuringStoreProcessing={}}x.once("close",oe),W.on("error",function(K){se(),x._flushStoreProcessingQueue(),x.removeListener("close",oe),x.emit("error",K)});function oe(){W.destroy(),W=null,x._flushStoreProcessingQueue(),se()}function te(){if(!W)return;x._storeProcessing=!0;const K=W.read(1);let X;if(!K){W.once("readable",te);return}if(x._packetIdsDuringStoreProcessing[K.messageId]){te();return}!x.disconnecting&&!x.reconnectTimer?(X=x.outgoing[K.messageId]?x.outgoing[K.messageId].cb:null,x.outgoing[K.messageId]={volatile:!1,cb:function(J,ae){X&&X(J,ae),te()}},x._packetIdsDuringStoreProcessing[K.messageId]=!0,x.messageIdProvider.register(K.messageId)?x._sendPacket(K):o("messageId: %d has already used.",K.messageId)):W.destroy&&W.destroy()}W.on("end",function(){let K=!0;for(const X in x._packetIdsDuringStoreProcessing)if(!x._packetIdsDuringStoreProcessing[X]){K=!1;break}K?(se(),x.removeListener("close",oe),x._invokeAllStoreProcessingQueue(),x.emit("connect",M)):z()}),te()}z()},H.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const M=this._storeProcessingQueue[0];if(M&&M.invoke())return this._storeProcessingQueue.shift(),!0}return!1},H.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},H.prototype._flushStoreProcessingQueue=function(){for(const M of this._storeProcessingQueue)M.cbStorePut&&M.cbStorePut(new Error("Connection closed")),M.callback&&M.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},C.exports=H}).call(this)}).call(this,v("_process"),typeof ge<"u"?ge:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(v,C,T){const{Buffer:d}=v("buffer"),h=v("readable-stream").Transform,p=v("duplexify");let c,i,r,e=!1;function t(){const y=new h;return y._write=function(a,o,b){c.sendSocketMessage({data:a.buffer,success:function(){b()},fail:function(){b(new Error)}})},y._flush=function(o){c.closeSocket({success:function(){o()}})},y}function n(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function l(y,a){const o=y.protocol==="alis"?"wss":"ws";let b=o+"://"+y.hostname+y.path;return y.port&&y.port!==80&&y.port!==443&&(b=o+"://"+y.hostname+":"+y.port+y.path),typeof y.transformWsUrl=="function"&&(b=y.transformWsUrl(b,y,a)),b}function s(){e||(e=!0,c.onSocketOpen(function(){r.setReadable(i),r.setWritable(i),r.emit("connect")}),c.onSocketMessage(function(y){if(typeof y.data=="string"){const a=d.from(y.data,"base64");i.push(a)}else{const a=new FileReader;a.addEventListener("load",function(){let o=a.result;o instanceof ArrayBuffer?o=d.from(o):o=d.from(o,"utf8"),i.push(o)}),a.readAsArrayBuffer(y.data)}}),c.onSocketClose(function(){r.end(),r.destroy()}),c.onSocketError(function(y){r.destroy(y)}))}function g(y,a){if(a.hostname=a.hostname||a.host,!a.hostname)throw new Error("Could not determine host. Specify host manually.");const o=a.protocolId==="MQIsdp"&&a.protocolVersion===3?"mqttv3.1":"mqtt";n(a);const b=l(a,y);return c=a.my,c.connectSocket({url:b,protocols:o}),i=t(),r=p.obj(),s(),r}C.exports=g},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(v,C,T){const d=v("net"),h=v("debug")("mqttjs:tcp");function p(c,i){i.port=i.port||1883,i.hostname=i.hostname||i.host||"localhost";const r=i.port,e=i.hostname;return h("port %d and host %s",r,e),d.createConnection(r,e)}C.exports=p},{debug:18,net:16}],4:[function(v,C,T){const d=v("tls"),h=v("net"),p=v("debug")("mqttjs:tls");function c(i,r){r.port=r.port||8883,r.host=r.hostname||r.host||"localhost",h.isIP(r.host)===0&&(r.servername=r.host),r.rejectUnauthorized=r.rejectUnauthorized!==!1,delete r.path,p("port %d host %s rejectUnauthorized %b",r.port,r.host,r.rejectUnauthorized);const e=d.connect(r);e.on("secureConnect",function(){r.rejectUnauthorized&&!e.authorized?e.emit("error",new Error("TLS not authorized")):e.removeListener("error",t)});function t(n){r.rejectUnauthorized&&i.emit("error",n),e.end()}return e.on("error",t),e}C.exports=c},{debug:18,net:16,tls:16}],5:[function(v,C,T){(function(d){(function(){const{Buffer:h}=v("buffer"),p=v("ws"),c=v("debug")("mqttjs:ws"),i=v("duplexify"),r=v("readable-stream").Transform,e=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],t=typeof d<"u"&&d.title==="browser"||typeof __webpack_require__=="function";function n(b,A){let P=b.protocol+"://"+b.hostname+":"+b.port+b.path;return typeof b.transformWsUrl=="function"&&(P=b.transformWsUrl(P,b,A)),P}function l(b){const A=b;return b.hostname||(A.hostname="localhost"),b.port||(b.protocol==="wss"?A.port=443:A.port=80),b.path||(A.path="/"),b.wsOptions||(A.wsOptions={}),!t&&b.protocol==="wss"&&e.forEach(function(P){Object.prototype.hasOwnProperty.call(b,P)&&!Object.prototype.hasOwnProperty.call(b.wsOptions,P)&&(A.wsOptions[P]=b[P])}),A}function s(b){const A=l(b);if(A.hostname||(A.hostname=A.host),!A.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const P=new URL(document.URL);A.hostname=P.hostname,A.port||(A.port=P.port)}return A.objectMode===void 0&&(A.objectMode=!(A.binary===!0||A.binary===void 0)),A}function g(b,A,P){c("createWebSocket"),c("protocol: "+P.protocolId+" "+P.protocolVersion);const B=P.protocolId==="MQIsdp"&&P.protocolVersion===3?"mqttv3.1":"mqtt";return c("creating new Websocket for url: "+A+" and protocol: "+B),new p(A,[B],P.wsOptions)}function y(b,A){const P=A.protocolId==="MQIsdp"&&A.protocolVersion===3?"mqttv3.1":"mqtt",B=n(A,b),U=new WebSocket(B,[P]);return U.binaryType="arraybuffer",U}function a(b,A){c("streamBuilder");const P=l(A),B=n(P,b),U=g(b,B,P),L=p.createWebSocketStream(U,P.wsOptions);return L.url=B,U.on("close",()=>{L.destroy()}),L}function o(b,A){c("browserStreamBuilder");let P;const U=s(A).browserBufferSize||1024*512,L=A.browserBufferTimeout||1e3,Q=!A.objectMode,u=y(b,A),E=D(A,W,se);A.objectMode||(E._writev=z),E.on("close",()=>{u.close()});const m=typeof u.addEventListener<"u";u.readyState===u.OPEN?P=E:(P=P=i(void 0,void 0,A),A.objectMode||(P._writev=z),m?u.addEventListener("open",q):u.onopen=q),P.socket=u,m?(u.addEventListener("close",H),u.addEventListener("error",M),u.addEventListener("message",x)):(u.onclose=H,u.onerror=M,u.onmessage=x);function D(oe,te,K){const X=new r({objectModeMode:oe.objectMode});return X._write=te,X._flush=K,X}function q(){P.setReadable(E),P.setWritable(E),P.emit("connect")}function H(){P.end(),P.destroy()}function M(oe){P.destroy(oe)}function x(oe){let te=oe.data;te instanceof ArrayBuffer?te=h.from(te):te=h.from(te,"utf8"),E.push(te)}function z(oe,te){const K=new Array(oe.length);for(let X=0;X<oe.length;X++)typeof oe[X].chunk=="string"?K[X]=h.from(oe[X],"utf8"):K[X]=oe[X].chunk;this._write(h.concat(K),"binary",te)}function W(oe,te,K){u.bufferedAmount>U&&setTimeout(W,L,oe,te,K),Q&&typeof oe=="string"&&(oe=h.from(oe,"utf8"));try{u.send(oe)}catch(X){return K(X)}K()}function se(oe){u.close(),oe()}return P}t?C.exports=o:C.exports=a}).call(this)}).call(this,v("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(v,C,T){const{Buffer:d}=v("buffer"),h=v("readable-stream").Transform,p=v("duplexify");let c,i,r;function e(){const g=new h;return g._write=function(y,a,o){c.send({data:y.buffer,success:function(){o()},fail:function(b){o(new Error(b))}})},g._flush=function(a){c.close({success:function(){a()}})},g}function t(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function n(g,y){const a=g.protocol==="wxs"?"wss":"ws";let o=a+"://"+g.hostname+g.path;return g.port&&g.port!==80&&g.port!==443&&(o=a+"://"+g.hostname+":"+g.port+g.path),typeof g.transformWsUrl=="function"&&(o=g.transformWsUrl(o,g,y)),o}function l(){c.onOpen(function(){r.setReadable(i),r.setWritable(i),r.emit("connect")}),c.onMessage(function(g){let y=g.data;y instanceof ArrayBuffer?y=d.from(y):y=d.from(y,"utf8"),i.push(y)}),c.onClose(function(){r.end(),r.destroy()}),c.onError(function(g){r.destroy(new Error(g.errMsg))})}function s(g,y){if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");const a=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";t(y);const o=n(y,g);c=wx.connectSocket({url:o,protocols:[a]}),i=e(),r=p.obj(),r._destroy=function(A,P){c.close({success:function(){P&&P(A)}})};const b=r.destroy;return r.destroy=(function(){r.destroy=b;const A=this;setTimeout(function(){c.close({fail:function(){A._destroy(new Error)}})},0)}).bind(r),l(),r}C.exports=s},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(v,C,T){function d(){if(!(this instanceof d))return new d;this.nextId=Math.max(1,Math.floor(Math.random()*65535))}d.prototype.allocate=function(){const h=this.nextId++;return this.nextId===65536&&(this.nextId=1),h},d.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1},d.prototype.register=function(h){return!0},d.prototype.deallocate=function(h){},d.prototype.clear=function(){},C.exports=d},{}],8:[function(v,C,T){const d=v("xtend"),h=v("readable-stream").Readable,p={objectMode:!0},c={clean:!0};function i(r){if(!(this instanceof i))return new i(r);this.options=r||{},this.options=d(c,r),this._inflights=new Map}i.prototype.put=function(r,e){return this._inflights.set(r.messageId,r),e&&e(),this},i.prototype.createStream=function(){const r=new h(p),e=[];let t=!1,n=0;return this._inflights.forEach(function(l,s){e.push(l)}),r._read=function(){!t&&n<e.length?this.push(e[n++]):this.push(null)},r.destroy=function(){if(t)return;const l=this;t=!0,setTimeout(function(){l.emit("close")},0)},r},i.prototype.del=function(r,e){return r=this._inflights.get(r.messageId),r?(this._inflights.delete(r.messageId),e(null,r)):e&&e(new Error("missing packet")),this},i.prototype.get=function(r,e){return r=this._inflights.get(r.messageId),r?e(null,r):e&&e(new Error("missing packet")),this},i.prototype.close=function(r){this.options.clean&&(this._inflights=null),r&&r()},C.exports=i},{"readable-stream":69,xtend:81}],9:[function(v,C,T){function d(h){if(!(this instanceof d))return new d(h);this.aliasToTopic={},this.max=h}d.prototype.put=function(h,p){return p===0||p>this.max?!1:(this.aliasToTopic[p]=h,this.length=Object.keys(this.aliasToTopic).length,!0)},d.prototype.getTopicByAlias=function(h){return this.aliasToTopic[h]},d.prototype.clear=function(){this.aliasToTopic={}},C.exports=d},{}],10:[function(v,C,T){const d=v("lru-cache"),h=v("number-allocator").NumberAllocator;function p(c){if(!(this instanceof p))return new p(c);c>0&&(this.aliasToTopic=new d({max:c}),this.topicToAlias={},this.numberAllocator=new h(1,c),this.max=c,this.length=0)}p.prototype.put=function(c,i){if(i===0||i>this.max)return!1;const r=this.aliasToTopic.get(i);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(i,c),this.topicToAlias[c]=i,this.numberAllocator.use(i),this.length=this.aliasToTopic.length,!0},p.prototype.getTopicByAlias=function(c){return this.aliasToTopic.get(c)},p.prototype.getAliasByTopic=function(c){const i=this.topicToAlias[c];return typeof i<"u"&&this.aliasToTopic.get(i),i},p.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},p.prototype.getLruAlias=function(){const c=this.numberAllocator.firstVacant();return c||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},C.exports=p},{"lru-cache":37,"number-allocator":46}],11:[function(v,C,T){function d(p){const c=p.split("/");for(let i=0;i<c.length;i++)if(c[i]!=="+"){if(c[i]==="#")return i===c.length-1;if(c[i].indexOf("+")!==-1||c[i].indexOf("#")!==-1)return!1}return!0}function h(p){if(p.length===0)return"empty_topic_list";for(let c=0;c<p.length;c++)if(!d(p[c]))return p[c];return null}C.exports={validateTopics:h}},{}],12:[function(v,C,T){(function(d){(function(){const h=v("../client"),p=v("../store"),c=v("url"),i=v("xtend"),r=v("debug")("mqttjs"),e={};typeof d<"u"&&d.title!=="browser"||typeof __webpack_require__!="function"?(e.mqtt=v("./tcp"),e.tcp=v("./tcp"),e.ssl=v("./tls"),e.tls=v("./tls"),e.mqtts=v("./tls")):(e.wx=v("./wx"),e.wxs=v("./wx"),e.ali=v("./ali"),e.alis=v("./ali")),e.ws=v("./ws"),e.wss=v("./ws");function t(l){let s;l.auth&&(s=l.auth.match(/^(.+):(.+)$/),s?(l.username=s[1],l.password=s[2]):l.username=l.auth)}function n(l,s){if(r("connecting to an MQTT broker..."),typeof l=="object"&&!s&&(s=l,l=null),s=s||{},l){const a=c.parse(l,!0);if(a.port!=null&&(a.port=Number(a.port)),s=i(a,s),s.protocol===null)throw new Error("Missing protocol");s.protocol=s.protocol.replace(/:$/,"")}if(t(s),s.query&&typeof s.query.clientId=="string"&&(s.clientId=s.query.clientId),s.cert&&s.key)if(s.protocol){if(["mqtts","wss","wxs","alis"].indexOf(s.protocol)===-1)switch(s.protocol){case"mqtt":s.protocol="mqtts";break;case"ws":s.protocol="wss";break;case"wx":s.protocol="wxs";break;case"ali":s.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+s.protocol+'"!')}}else throw new Error("Missing secure protocol key");if(!e[s.protocol]){const a=["mqtts","wss"].indexOf(s.protocol)!==-1;s.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(o,b){return a&&b%2===0?!1:typeof e[o]=="function"})[0]}if(s.clean===!1&&!s.clientId)throw new Error("Missing clientId for unclean clients");s.protocol&&(s.defaultProtocol=s.protocol);function g(a){return s.servers&&((!a._reconnectCount||a._reconnectCount===s.servers.length)&&(a._reconnectCount=0),s.host=s.servers[a._reconnectCount].host,s.port=s.servers[a._reconnectCount].port,s.protocol=s.servers[a._reconnectCount].protocol?s.servers[a._reconnectCount].protocol:s.defaultProtocol,s.hostname=s.host,a._reconnectCount++),r("calling streambuilder for",s.protocol),e[s.protocol](a,s)}const y=new h(g,s);return y.on("error",function(){}),y}C.exports=n,C.exports.connect=n,C.exports.MqttClient=h,C.exports.Store=p}).call(this)}).call(this,v("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(v,C,T){T.byteLength=t,T.toByteArray=l,T.fromByteArray=y;for(var d=[],h=[],p=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,r=c.length;i<r;++i)d[i]=c[i],h[c.charCodeAt(i)]=i;h[45]=62,h[95]=63;function e(a){var o=a.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=a.indexOf("=");b===-1&&(b=o);var A=b===o?0:4-b%4;return[b,A]}function t(a){var o=e(a),b=o[0],A=o[1];return(b+A)*3/4-A}function n(a,o,b){return(o+b)*3/4-b}function l(a){var o,b=e(a),A=b[0],P=b[1],B=new p(n(a,A,P)),U=0,L=P>0?A-4:A,Q;for(Q=0;Q<L;Q+=4)o=h[a.charCodeAt(Q)]<<18|h[a.charCodeAt(Q+1)]<<12|h[a.charCodeAt(Q+2)]<<6|h[a.charCodeAt(Q+3)],B[U++]=o>>16&255,B[U++]=o>>8&255,B[U++]=o&255;return P===2&&(o=h[a.charCodeAt(Q)]<<2|h[a.charCodeAt(Q+1)]>>4,B[U++]=o&255),P===1&&(o=h[a.charCodeAt(Q)]<<10|h[a.charCodeAt(Q+1)]<<4|h[a.charCodeAt(Q+2)]>>2,B[U++]=o>>8&255,B[U++]=o&255),B}function s(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[a&63]}function g(a,o,b){for(var A,P=[],B=o;B<b;B+=3)A=(a[B]<<16&16711680)+(a[B+1]<<8&65280)+(a[B+2]&255),P.push(s(A));return P.join("")}function y(a){for(var o,b=a.length,A=b%3,P=[],B=16383,U=0,L=b-A;U<L;U+=B)P.push(g(a,U,U+B>L?L:U+B));return A===1?(o=a[b-1],P.push(d[o>>2]+d[o<<4&63]+"==")):A===2&&(o=(a[b-2]<<8)+a[b-1],P.push(d[o>>10]+d[o>>4&63]+d[o<<2&63]+"=")),P.join("")}},{}],14:[function(v,C,T){const{Buffer:d}=v("buffer"),h=Symbol.for("BufferList");function p(c){if(!(this instanceof p))return new p(c);p._init.call(this,c)}p._init=function(i){Object.defineProperty(this,h,{value:!0}),this._bufs=[],this.length=0,i&&this.append(i)},p.prototype._new=function(i){return new p(i)},p.prototype._offset=function(i){if(i===0)return[0,0];let r=0;for(let e=0;e<this._bufs.length;e++){const t=r+this._bufs[e].length;if(i<t||e===this._bufs.length-1)return[e,i-r];r=t}},p.prototype._reverseOffset=function(c){const i=c[0];let r=c[1];for(let e=0;e<i;e++)r+=this._bufs[e].length;return r},p.prototype.get=function(i){if(i>this.length||i<0)return;const r=this._offset(i);return this._bufs[r[0]][r[1]]},p.prototype.slice=function(i,r){return typeof i=="number"&&i<0&&(i+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,i,r)},p.prototype.copy=function(i,r,e,t){if((typeof e!="number"||e<0)&&(e=0),(typeof t!="number"||t>this.length)&&(t=this.length),e>=this.length||t<=0)return i||d.alloc(0);const n=!!i,l=this._offset(e),s=t-e;let g=s,y=n&&r||0,a=l[1];if(e===0&&t===this.length){if(!n)return this._bufs.length===1?this._bufs[0]:d.concat(this._bufs,this.length);for(let o=0;o<this._bufs.length;o++)this._bufs[o].copy(i,y),y+=this._bufs[o].length;return i}if(g<=this._bufs[l[0]].length-a)return n?this._bufs[l[0]].copy(i,r,a,a+g):this._bufs[l[0]].slice(a,a+g);n||(i=d.allocUnsafe(s));for(let o=l[0];o<this._bufs.length;o++){const b=this._bufs[o].length-a;if(g>b)this._bufs[o].copy(i,y,a),y+=b;else{this._bufs[o].copy(i,y,a,a+g),y+=b;break}g-=b,a&&(a=0)}return i.length>y?i.slice(0,y):i},p.prototype.shallowSlice=function(i,r){if(i=i||0,r=typeof r!="number"?this.length:r,i<0&&(i+=this.length),r<0&&(r+=this.length),i===r)return this._new();const e=this._offset(i),t=this._offset(r),n=this._bufs.slice(e[0],t[0]+1);return t[1]===0?n.pop():n[n.length-1]=n[n.length-1].slice(0,t[1]),e[1]!==0&&(n[0]=n[0].slice(e[1])),this._new(n)},p.prototype.toString=function(i,r,e){return this.slice(r,e).toString(i)},p.prototype.consume=function(i){if(i=Math.trunc(i),Number.isNaN(i)||i<=0)return this;for(;this._bufs.length;)if(i>=this._bufs[0].length)i-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(i),this.length-=i;break}return this},p.prototype.duplicate=function(){const i=this._new();for(let r=0;r<this._bufs.length;r++)i.append(this._bufs[r]);return i},p.prototype.append=function(i){if(i==null)return this;if(i.buffer)this._appendBuffer(d.from(i.buffer,i.byteOffset,i.byteLength));else if(Array.isArray(i))for(let r=0;r<i.length;r++)this.append(i[r]);else if(this._isBufferList(i))for(let r=0;r<i._bufs.length;r++)this.append(i._bufs[r]);else typeof i=="number"&&(i=i.toString()),this._appendBuffer(d.from(i));return this},p.prototype._appendBuffer=function(i){this._bufs.push(i),this.length+=i.length},p.prototype.indexOf=function(c,i,r){if(r===void 0&&typeof i=="string"&&(r=i,i=void 0),typeof c=="function"||Array.isArray(c))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof c=="number"?c=d.from([c]):typeof c=="string"?c=d.from(c,r):this._isBufferList(c)?c=c.slice():Array.isArray(c.buffer)?c=d.from(c.buffer,c.byteOffset,c.byteLength):d.isBuffer(c)||(c=d.from(c)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),c.length===0)return i>this.length?this.length:i;const e=this._offset(i);let t=e[0],n=e[1];for(;t<this._bufs.length;t++){const l=this._bufs[t];for(;n<l.length;)if(l.length-n>=c.length){const g=l.indexOf(c,n);if(g!==-1)return this._reverseOffset([t,g]);n=l.length-c.length+1}else{const g=this._reverseOffset([t,n]);if(this._match(g,c))return g;n++}n=0}return-1},p.prototype._match=function(c,i){if(this.length-c<i.length)return!1;for(let r=0;r<i.length;r++)if(this.get(c+r)!==i[r])return!1;return!0},(function(){const c={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const i in c)(function(r){c[r]===null?p.prototype[r]=function(e,t){return this.slice(e,e+t)[r](0,t)}:p.prototype[r]=function(e=0){return this.slice(e,e+c[r])[r](0)}})(i)})(),p.prototype._isBufferList=function(i){return i instanceof p||p.isBufferList(i)},p.isBufferList=function(i){return i!=null&&i[h]},C.exports=p},{buffer:17}],15:[function(v,C,T){const d=v("readable-stream").Duplex,h=v("inherits"),p=v("./BufferList");function c(i){if(!(this instanceof c))return new c(i);if(typeof i=="function"){this._callback=i;const r=(function(t){this._callback&&(this._callback(t),this._callback=null)}).bind(this);this.on("pipe",function(t){t.on("error",r)}),this.on("unpipe",function(t){t.removeListener("error",r)}),i=null}p._init.call(this,i),d.call(this)}h(c,d),Object.assign(c.prototype,p.prototype),c.prototype._new=function(r){return new c(r)},c.prototype._write=function(r,e,t){this._appendBuffer(r),typeof t=="function"&&t()},c.prototype._read=function(r){if(!this.length)return this.push(null);r=Math.min(r,this.length),this.push(this.slice(0,r)),this.consume(r)},c.prototype.end=function(r){d.prototype.end.call(this,r),this._callback&&(this._callback(null,this.slice()),this._callback=null)},c.prototype._destroy=function(r,e){this._bufs.length=0,this.length=0,e(r)},c.prototype._isBufferList=function(r){return r instanceof c||r instanceof p||c.isBufferList(r)},c.isBufferList=p.isBufferList,C.exports=c,C.exports.BufferListStream=c,C.exports.BufferList=p},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(v,C,T){},{}],17:[function(v,C,T){(function(d){(function(){var h=v("base64-js"),p=v("ieee754");T.Buffer=e,T.SlowBuffer=A,T.INSPECT_MAX_BYTES=50;var c=2147483647;T.kMaxLength=c,e.TYPED_ARRAY_SUPPORT=i(),!e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var S=new Uint8Array(1);return S.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},S.foo()===42}catch{return!1}}Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}});function r(S){if(S>c)throw new RangeError('The value "'+S+'" is invalid for option "size"');var f=new Uint8Array(S);return f.__proto__=e.prototype,f}function e(S,f,_){if(typeof S=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(S)}return t(S,f,_)}typeof Symbol<"u"&&Symbol.species!=null&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192;function t(S,f,_){if(typeof S=="string")return g(S,f);if(ArrayBuffer.isView(S))return y(S);if(S==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(I(S,ArrayBuffer)||S&&I(S.buffer,ArrayBuffer))return a(S,f,_);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var R=S.valueOf&&S.valueOf();if(R!=null&&R!==S)return e.from(R,f,_);var V=o(S);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return e.from(S[Symbol.toPrimitive]("string"),f,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}e.from=function(S,f,_){return t(S,f,_)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array;function n(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function l(S,f,_){return n(S),S<=0?r(S):f!==void 0?typeof _=="string"?r(S).fill(f,_):r(S).fill(f):r(S)}e.alloc=function(S,f,_){return l(S,f,_)};function s(S){return n(S),r(S<0?0:b(S)|0)}e.allocUnsafe=function(S){return s(S)},e.allocUnsafeSlow=function(S){return s(S)};function g(S,f){if((typeof f!="string"||f==="")&&(f="utf8"),!e.isEncoding(f))throw new TypeError("Unknown encoding: "+f);var _=P(S,f)|0,R=r(_),V=R.write(S,f);return V!==_&&(R=R.slice(0,V)),R}function y(S){for(var f=S.length<0?0:b(S.length)|0,_=r(f),R=0;R<f;R+=1)_[R]=S[R]&255;return _}function a(S,f,_){if(f<0||S.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<f+(_||0))throw new RangeError('"length" is outside of buffer bounds');var R;return f===void 0&&_===void 0?R=new Uint8Array(S):_===void 0?R=new Uint8Array(S,f):R=new Uint8Array(S,f,_),R.__proto__=e.prototype,R}function o(S){if(e.isBuffer(S)){var f=b(S.length)|0,_=r(f);return _.length===0||S.copy(_,0,0,f),_}if(S.length!==void 0)return typeof S.length!="number"||O(S.length)?r(0):y(S);if(S.type==="Buffer"&&Array.isArray(S.data))return y(S.data)}function b(S){if(S>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return S|0}function A(S){return+S!=S&&(S=0),e.alloc(+S)}e.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==e.prototype},e.compare=function(f,_){if(I(f,Uint8Array)&&(f=e.from(f,f.offset,f.byteLength)),I(_,Uint8Array)&&(_=e.from(_,_.offset,_.byteLength)),!e.isBuffer(f)||!e.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===_)return 0;for(var R=f.length,V=_.length,re=0,ne=Math.min(R,V);re<ne;++re)if(f[re]!==_[re]){R=f[re],V=_[re];break}return R<V?-1:V<R?1:0},e.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(f,_){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return e.alloc(0);var R;if(_===void 0)for(_=0,R=0;R<f.length;++R)_+=f[R].length;var V=e.allocUnsafe(_),re=0;for(R=0;R<f.length;++R){var ne=f[R];if(I(ne,Uint8Array)&&(ne=e.from(ne)),!e.isBuffer(ne))throw new TypeError('"list" argument must be an Array of Buffers');ne.copy(V,re),re+=ne.length}return V};function P(S,f){if(e.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||I(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);var _=S.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&_===0)return 0;for(var V=!1;;)switch(f){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return j(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return G(S).length;default:if(V)return R?-1:j(S).length;f=(""+f).toLowerCase(),V=!0}}e.byteLength=P;function B(S,f,_){var R=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,f>>>=0,_<=f))return"";for(S||(S="utf8");;)switch(S){case"hex":return te(this,f,_);case"utf8":case"utf-8":return x(this,f,_);case"ascii":return se(this,f,_);case"latin1":case"binary":return oe(this,f,_);case"base64":return M(this,f,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,f,_);default:if(R)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),R=!0}}e.prototype._isBuffer=!0;function U(S,f,_){var R=S[f];S[f]=S[_],S[_]=R}e.prototype.swap16=function(){var f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _=0;_<f;_+=2)U(this,_,_+1);return this},e.prototype.swap32=function(){var f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _=0;_<f;_+=4)U(this,_,_+3),U(this,_+1,_+2);return this},e.prototype.swap64=function(){var f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _=0;_<f;_+=8)U(this,_,_+7),U(this,_+1,_+6),U(this,_+2,_+5),U(this,_+3,_+4);return this},e.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?x(this,0,f):B.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(f){if(!e.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:e.compare(this,f)===0},e.prototype.inspect=function(){var f="",_=T.INSPECT_MAX_BYTES;return f=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(f+=" ... "),"<Buffer "+f+">"},e.prototype.compare=function(f,_,R,V,re){if(I(f,Uint8Array)&&(f=e.from(f,f.offset,f.byteLength)),!e.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(_===void 0&&(_=0),R===void 0&&(R=f?f.length:0),V===void 0&&(V=0),re===void 0&&(re=this.length),_<0||R>f.length||V<0||re>this.length)throw new RangeError("out of range index");if(V>=re&&_>=R)return 0;if(V>=re)return-1;if(_>=R)return 1;if(_>>>=0,R>>>=0,V>>>=0,re>>>=0,this===f)return 0;for(var ne=re-V,ue=R-_,he=Math.min(ne,ue),pe=this.slice(V,re),ve=f.slice(_,R),de=0;de<he;++de)if(pe[de]!==ve[de]){ne=pe[de],ue=ve[de];break}return ne<ue?-1:ue<ne?1:0};function L(S,f,_,R,V){if(S.length===0)return-1;if(typeof _=="string"?(R=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,O(_)&&(_=V?0:S.length-1),_<0&&(_=S.length+_),_>=S.length){if(V)return-1;_=S.length-1}else if(_<0)if(V)_=0;else return-1;if(typeof f=="string"&&(f=e.from(f,R)),e.isBuffer(f))return f.length===0?-1:Q(S,f,_,R,V);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(S,f,_):Uint8Array.prototype.lastIndexOf.call(S,f,_):Q(S,[f],_,R,V);throw new TypeError("val must be string, number or Buffer")}function Q(S,f,_,R,V){var re=1,ne=S.length,ue=f.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(S.length<2||f.length<2)return-1;re=2,ne/=2,ue/=2,_/=2}function he(Te,be){return re===1?Te[be]:Te.readUInt16BE(be*re)}var pe;if(V){var ve=-1;for(pe=_;pe<ne;pe++)if(he(S,pe)===he(f,ve===-1?0:pe-ve)){if(ve===-1&&(ve=pe),pe-ve+1===ue)return ve*re}else ve!==-1&&(pe-=pe-ve),ve=-1}else for(_+ue>ne&&(_=ne-ue),pe=_;pe>=0;pe--){for(var de=!0,Ee=0;Ee<ue;Ee++)if(he(S,pe+Ee)!==he(f,Ee)){de=!1;break}if(de)return pe}return-1}e.prototype.includes=function(f,_,R){return this.indexOf(f,_,R)!==-1},e.prototype.indexOf=function(f,_,R){return L(this,f,_,R,!0)},e.prototype.lastIndexOf=function(f,_,R){return L(this,f,_,R,!1)};function u(S,f,_,R){_=Number(_)||0;var V=S.length-_;R?(R=Number(R),R>V&&(R=V)):R=V;var re=f.length;R>re/2&&(R=re/2);for(var ne=0;ne<R;++ne){var ue=parseInt(f.substr(ne*2,2),16);if(O(ue))return ne;S[_+ne]=ue}return ne}function E(S,f,_,R){return Z(j(f,S.length-_),S,_,R)}function m(S,f,_,R){return Z(N(f),S,_,R)}function D(S,f,_,R){return m(S,f,_,R)}function q(S,f,_,R){return Z(G(f),S,_,R)}function H(S,f,_,R){return Z($(f,S.length-_),S,_,R)}e.prototype.write=function(f,_,R,V){if(_===void 0)V="utf8",R=this.length,_=0;else if(R===void 0&&typeof _=="string")V=_,R=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(R)?(R=R>>>0,V===void 0&&(V="utf8")):(V=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var re=this.length-_;if((R===void 0||R>re)&&(R=re),f.length>0&&(R<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");for(var ne=!1;;)switch(V){case"hex":return u(this,f,_,R);case"utf8":case"utf-8":return E(this,f,_,R);case"ascii":return m(this,f,_,R);case"latin1":case"binary":return D(this,f,_,R);case"base64":return q(this,f,_,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,f,_,R);default:if(ne)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),ne=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(S,f,_){return f===0&&_===S.length?h.fromByteArray(S):h.fromByteArray(S.slice(f,_))}function x(S,f,_){_=Math.min(S.length,_);for(var R=[],V=f;V<_;){var re=S[V],ne=null,ue=re>239?4:re>223?3:re>191?2:1;if(V+ue<=_){var he,pe,ve,de;switch(ue){case 1:re<128&&(ne=re);break;case 2:he=S[V+1],(he&192)===128&&(de=(re&31)<<6|he&63,de>127&&(ne=de));break;case 3:he=S[V+1],pe=S[V+2],(he&192)===128&&(pe&192)===128&&(de=(re&15)<<12|(he&63)<<6|pe&63,de>2047&&(de<55296||de>57343)&&(ne=de));break;case 4:he=S[V+1],pe=S[V+2],ve=S[V+3],(he&192)===128&&(pe&192)===128&&(ve&192)===128&&(de=(re&15)<<18|(he&63)<<12|(pe&63)<<6|ve&63,de>65535&&de<1114112&&(ne=de))}}ne===null?(ne=65533,ue=1):ne>65535&&(ne-=65536,R.push(ne>>>10&1023|55296),ne=56320|ne&1023),R.push(ne),V+=ue}return W(R)}var z=4096;function W(S){var f=S.length;if(f<=z)return String.fromCharCode.apply(String,S);for(var _="",R=0;R<f;)_+=String.fromCharCode.apply(String,S.slice(R,R+=z));return _}function se(S,f,_){var R="";_=Math.min(S.length,_);for(var V=f;V<_;++V)R+=String.fromCharCode(S[V]&127);return R}function oe(S,f,_){var R="";_=Math.min(S.length,_);for(var V=f;V<_;++V)R+=String.fromCharCode(S[V]);return R}function te(S,f,_){var R=S.length;(!f||f<0)&&(f=0),(!_||_<0||_>R)&&(_=R);for(var V="",re=f;re<_;++re)V+=ee(S[re]);return V}function K(S,f,_){for(var R=S.slice(f,_),V="",re=0;re<R.length;re+=2)V+=String.fromCharCode(R[re]+R[re+1]*256);return V}e.prototype.slice=function(f,_){var R=this.length;f=~~f,_=_===void 0?R:~~_,f<0?(f+=R,f<0&&(f=0)):f>R&&(f=R),_<0?(_+=R,_<0&&(_=0)):_>R&&(_=R),_<f&&(_=f);var V=this.subarray(f,_);return V.__proto__=e.prototype,V};function X(S,f,_){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+f>_)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUIntLE=function(f,_,R){f=f>>>0,_=_>>>0,R||X(f,_,this.length);for(var V=this[f],re=1,ne=0;++ne<_&&(re*=256);)V+=this[f+ne]*re;return V},e.prototype.readUIntBE=function(f,_,R){f=f>>>0,_=_>>>0,R||X(f,_,this.length);for(var V=this[f+--_],re=1;_>0&&(re*=256);)V+=this[f+--_]*re;return V},e.prototype.readUInt8=function(f,_){return f=f>>>0,_||X(f,1,this.length),this[f]},e.prototype.readUInt16LE=function(f,_){return f=f>>>0,_||X(f,2,this.length),this[f]|this[f+1]<<8},e.prototype.readUInt16BE=function(f,_){return f=f>>>0,_||X(f,2,this.length),this[f]<<8|this[f+1]},e.prototype.readUInt32LE=function(f,_){return f=f>>>0,_||X(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},e.prototype.readUInt32BE=function(f,_){return f=f>>>0,_||X(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},e.prototype.readIntLE=function(f,_,R){f=f>>>0,_=_>>>0,R||X(f,_,this.length);for(var V=this[f],re=1,ne=0;++ne<_&&(re*=256);)V+=this[f+ne]*re;return re*=128,V>=re&&(V-=Math.pow(2,8*_)),V},e.prototype.readIntBE=function(f,_,R){f=f>>>0,_=_>>>0,R||X(f,_,this.length);for(var V=_,re=1,ne=this[f+--V];V>0&&(re*=256);)ne+=this[f+--V]*re;return re*=128,ne>=re&&(ne-=Math.pow(2,8*_)),ne},e.prototype.readInt8=function(f,_){return f=f>>>0,_||X(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},e.prototype.readInt16LE=function(f,_){f=f>>>0,_||X(f,2,this.length);var R=this[f]|this[f+1]<<8;return R&32768?R|4294901760:R},e.prototype.readInt16BE=function(f,_){f=f>>>0,_||X(f,2,this.length);var R=this[f+1]|this[f]<<8;return R&32768?R|4294901760:R},e.prototype.readInt32LE=function(f,_){return f=f>>>0,_||X(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},e.prototype.readInt32BE=function(f,_){return f=f>>>0,_||X(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},e.prototype.readFloatLE=function(f,_){return f=f>>>0,_||X(f,4,this.length),p.read(this,f,!0,23,4)},e.prototype.readFloatBE=function(f,_){return f=f>>>0,_||X(f,4,this.length),p.read(this,f,!1,23,4)},e.prototype.readDoubleLE=function(f,_){return f=f>>>0,_||X(f,8,this.length),p.read(this,f,!0,52,8)},e.prototype.readDoubleBE=function(f,_){return f=f>>>0,_||X(f,8,this.length),p.read(this,f,!1,52,8)};function J(S,f,_,R,V,re){if(!e.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>V||f<re)throw new RangeError('"value" argument is out of bounds');if(_+R>S.length)throw new RangeError("Index out of range")}e.prototype.writeUIntLE=function(f,_,R,V){if(f=+f,_=_>>>0,R=R>>>0,!V){var re=Math.pow(2,8*R)-1;J(this,f,_,R,re,0)}var ne=1,ue=0;for(this[_]=f&255;++ue<R&&(ne*=256);)this[_+ue]=f/ne&255;return _+R},e.prototype.writeUIntBE=function(f,_,R,V){if(f=+f,_=_>>>0,R=R>>>0,!V){var re=Math.pow(2,8*R)-1;J(this,f,_,R,re,0)}var ne=R-1,ue=1;for(this[_+ne]=f&255;--ne>=0&&(ue*=256);)this[_+ne]=f/ue&255;return _+R},e.prototype.writeUInt8=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,1,255,0),this[_]=f&255,_+1},e.prototype.writeUInt16LE=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,2,65535,0),this[_]=f&255,this[_+1]=f>>>8,_+2},e.prototype.writeUInt16BE=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,2,65535,0),this[_]=f>>>8,this[_+1]=f&255,_+2},e.prototype.writeUInt32LE=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,4,4294967295,0),this[_+3]=f>>>24,this[_+2]=f>>>16,this[_+1]=f>>>8,this[_]=f&255,_+4},e.prototype.writeUInt32BE=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,4,4294967295,0),this[_]=f>>>24,this[_+1]=f>>>16,this[_+2]=f>>>8,this[_+3]=f&255,_+4},e.prototype.writeIntLE=function(f,_,R,V){if(f=+f,_=_>>>0,!V){var re=Math.pow(2,8*R-1);J(this,f,_,R,re-1,-re)}var ne=0,ue=1,he=0;for(this[_]=f&255;++ne<R&&(ue*=256);)f<0&&he===0&&this[_+ne-1]!==0&&(he=1),this[_+ne]=(f/ue>>0)-he&255;return _+R},e.prototype.writeIntBE=function(f,_,R,V){if(f=+f,_=_>>>0,!V){var re=Math.pow(2,8*R-1);J(this,f,_,R,re-1,-re)}var ne=R-1,ue=1,he=0;for(this[_+ne]=f&255;--ne>=0&&(ue*=256);)f<0&&he===0&&this[_+ne+1]!==0&&(he=1),this[_+ne]=(f/ue>>0)-he&255;return _+R},e.prototype.writeInt8=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,1,127,-128),f<0&&(f=255+f+1),this[_]=f&255,_+1},e.prototype.writeInt16LE=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,2,32767,-32768),this[_]=f&255,this[_+1]=f>>>8,_+2},e.prototype.writeInt16BE=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,2,32767,-32768),this[_]=f>>>8,this[_+1]=f&255,_+2},e.prototype.writeInt32LE=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,4,2147483647,-2147483648),this[_]=f&255,this[_+1]=f>>>8,this[_+2]=f>>>16,this[_+3]=f>>>24,_+4},e.prototype.writeInt32BE=function(f,_,R){return f=+f,_=_>>>0,R||J(this,f,_,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[_]=f>>>24,this[_+1]=f>>>16,this[_+2]=f>>>8,this[_+3]=f&255,_+4};function ae(S,f,_,R,V,re){if(_+R>S.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function le(S,f,_,R,V){return f=+f,_=_>>>0,V||ae(S,f,_,4),p.write(S,f,_,R,23,4),_+4}e.prototype.writeFloatLE=function(f,_,R){return le(this,f,_,!0,R)},e.prototype.writeFloatBE=function(f,_,R){return le(this,f,_,!1,R)};function ie(S,f,_,R,V){return f=+f,_=_>>>0,V||ae(S,f,_,8),p.write(S,f,_,R,52,8),_+8}e.prototype.writeDoubleLE=function(f,_,R){return ie(this,f,_,!0,R)},e.prototype.writeDoubleBE=function(f,_,R){return ie(this,f,_,!1,R)},e.prototype.copy=function(f,_,R,V){if(!e.isBuffer(f))throw new TypeError("argument should be a Buffer");if(R||(R=0),!V&&V!==0&&(V=this.length),_>=f.length&&(_=f.length),_||(_=0),V>0&&V<R&&(V=R),V===R||f.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),f.length-_<V-R&&(V=f.length-_+R);var re=V-R;if(this===f&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(_,R,V);else if(this===f&&R<_&&_<V)for(var ne=re-1;ne>=0;--ne)f[ne+_]=this[ne+R];else Uint8Array.prototype.set.call(f,this.subarray(R,V),_);return re},e.prototype.fill=function(f,_,R,V){if(typeof f=="string"){if(typeof _=="string"?(V=_,_=0,R=this.length):typeof R=="string"&&(V=R,R=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!e.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(f.length===1){var re=f.charCodeAt(0);(V==="utf8"&&re<128||V==="latin1")&&(f=re)}}else typeof f=="number"&&(f=f&255);if(_<0||this.length<_||this.length<R)throw new RangeError("Out of range index");if(R<=_)return this;_=_>>>0,R=R===void 0?this.length:R>>>0,f||(f=0);var ne;if(typeof f=="number")for(ne=_;ne<R;++ne)this[ne]=f;else{var ue=e.isBuffer(f)?f:e.from(f,V),he=ue.length;if(he===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(ne=0;ne<R-_;++ne)this[ne+_]=ue[ne%he]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function F(S){if(S=S.split("=")[0],S=S.trim().replace(Y,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function ee(S){return S<16?"0"+S.toString(16):S.toString(16)}function j(S,f){f=f||1/0;for(var _,R=S.length,V=null,re=[],ne=0;ne<R;++ne){if(_=S.charCodeAt(ne),_>55295&&_<57344){if(!V){if(_>56319){(f-=3)>-1&&re.push(239,191,189);continue}else if(ne+1===R){(f-=3)>-1&&re.push(239,191,189);continue}V=_;continue}if(_<56320){(f-=3)>-1&&re.push(239,191,189),V=_;continue}_=(V-55296<<10|_-56320)+65536}else V&&(f-=3)>-1&&re.push(239,191,189);if(V=null,_<128){if((f-=1)<0)break;re.push(_)}else if(_<2048){if((f-=2)<0)break;re.push(_>>6|192,_&63|128)}else if(_<65536){if((f-=3)<0)break;re.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((f-=4)<0)break;re.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return re}function N(S){for(var f=[],_=0;_<S.length;++_)f.push(S.charCodeAt(_)&255);return f}function $(S,f){for(var _,R,V,re=[],ne=0;ne<S.length&&!((f-=2)<0);++ne)_=S.charCodeAt(ne),R=_>>8,V=_%256,re.push(V),re.push(R);return re}function G(S){return h.toByteArray(F(S))}function Z(S,f,_,R){for(var V=0;V<R&&!(V+_>=f.length||V>=S.length);++V)f[V+_]=S[V];return V}function I(S,f){return S instanceof f||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===f.name}function O(S){return S!==S}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(v,C,T){(function(d){(function(){T.formatArgs=p,T.save=c,T.load=i,T.useColors=h,T.storage=r(),T.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),T.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function h(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function p(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+C.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let l=0,s=0;t[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(l++,g==="%c"&&(s=l))}),t.splice(s,0,n)}T.log=console.debug||console.log||(()=>{});function c(t){try{t?T.storage.setItem("debug",t):T.storage.removeItem("debug")}catch{}}function i(){let t;try{t=T.storage.getItem("debug")}catch{}return!t&&typeof d<"u"&&"env"in d&&(t=d.env.DEBUG),t}function r(){try{return localStorage}catch{}}C.exports=v("./common")(T);const{formatters:e}=C.exports;e.j=function(t){try{return JSON.stringify(t)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}).call(this)}).call(this,v("_process"))},{"./common":19,_process:50}],19:[function(v,C,T){function d(h){c.debug=c,c.default=c,c.coerce=l,c.disable=e,c.enable=r,c.enabled=t,c.humanize=v("ms"),c.destroy=s,Object.keys(h).forEach(g=>{c[g]=h[g]}),c.names=[],c.skips=[],c.formatters={};function p(g){let y=0;for(let a=0;a<g.length;a++)y=(y<<5)-y+g.charCodeAt(a),y|=0;return c.colors[Math.abs(y)%c.colors.length]}c.selectColor=p;function c(g){let y,a=null,o,b;function A(...P){if(!A.enabled)return;const B=A,U=Number(new Date),L=U-(y||U);B.diff=L,B.prev=y,B.curr=U,y=U,P[0]=c.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let Q=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(E,m)=>{if(E==="%%")return"%";Q++;const D=c.formatters[m];if(typeof D=="function"){const q=P[Q];E=D.call(B,q),P.splice(Q,1),Q--}return E}),c.formatArgs.call(B,P),(B.log||c.log).apply(B,P)}return A.namespace=g,A.useColors=c.useColors(),A.color=c.selectColor(g),A.extend=i,A.destroy=c.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>a!==null?a:(o!==c.namespaces&&(o=c.namespaces,b=c.enabled(g)),b),set:P=>{a=P}}),typeof c.init=="function"&&c.init(A),A}function i(g,y){const a=c(this.namespace+(typeof y>"u"?":":y)+g);return a.log=this.log,a}function r(g){c.save(g),c.namespaces=g,c.names=[],c.skips=[];let y;const a=(typeof g=="string"?g:"").split(/[\s,]+/),o=a.length;for(y=0;y<o;y++)a[y]&&(g=a[y].replace(/\*/g,".*?"),g[0]==="-"?c.skips.push(new RegExp("^"+g.substr(1)+"$")):c.names.push(new RegExp("^"+g+"$")))}function e(){const g=[...c.names.map(n),...c.skips.map(n).map(y=>"-"+y)].join(",");return c.enable(""),g}function t(g){if(g[g.length-1]==="*")return!0;let y,a;for(y=0,a=c.skips.length;y<a;y++)if(c.skips[y].test(g))return!1;for(y=0,a=c.names.length;y<a;y++)if(c.names[y].test(g))return!0;return!1}function n(g){return g.toString().substring(2,g.toString().length-2).replace(/\.\*\?$/,"*")}function l(g){return g instanceof Error?g.stack||g.message:g}function s(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return c.enable(c.load()),c}C.exports=d},{ms:45}],20:[function(v,C,T){(function(d,h){(function(){var p=v("readable-stream"),c=v("end-of-stream"),i=v("inherits"),r=v("stream-shift"),e=h.from&&h.from!==Uint8Array.from?h.from([0]):new h([0]),t=function(o,b){o._corked?o.once("uncork",b):b()},n=function(o,b){o._autoDestroy&&o.destroy(b)},l=function(o,b){return function(A){A?n(o,A.message==="premature close"?null:A):b&&!o._ended&&o.end()}},s=function(o,b){if(!o||o._writableState&&o._writableState.finished)return b();if(o._writableState)return o.end(b);o.end(),b()},g=function(){},y=function(o){return new p.Readable({objectMode:!0,highWaterMark:16}).wrap(o)},a=function(o,b,A){if(!(this instanceof a))return new a(o,b,A);p.Duplex.call(this,A),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!A||A.autoDestroy!==!1,this._forwardDestroy=!A||A.destroy!==!1,this._forwardEnd=!A||A.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,o&&this.setWritable(o),b&&this.setReadable(b)};i(a,p.Duplex),a.obj=function(o,b,A){return A||(A={}),A.objectMode=!0,A.highWaterMark=16,new a(o,b,A)},a.prototype.cork=function(){++this._corked===1&&this.emit("cork")},a.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},a.prototype.setWritable=function(o){if(this._unwrite&&this._unwrite(),this.destroyed){o&&o.destroy&&o.destroy();return}if(o===null||o===!1){this.end();return}var b=this,A=c(o,{writable:!0,readable:!1},l(this,this._forwardEnd)),P=function(){var U=b._ondrain;b._ondrain=null,U&&U()},B=function(){b._writable.removeListener("drain",P),A()};this._unwrite&&d.nextTick(P),this._writable=o,this._writable.on("drain",P),this._unwrite=B,this.uncork()},a.prototype.setReadable=function(o){if(this._unread&&this._unread(),this.destroyed){o&&o.destroy&&o.destroy();return}if(o===null||o===!1){this.push(null),this.resume();return}var b=this,A=c(o,{writable:!1,readable:!0},l(this)),P=function(){b._forward()},B=function(){b.push(null)},U=function(){b._readable2.removeListener("readable",P),b._readable2.removeListener("end",B),A()};this._drained=!0,this._readable=o,this._readable2=o._readableState?o:y(o),this._readable2.on("readable",P),this._readable2.on("end",B),this._unread=U,this._forward()},a.prototype._read=function(){this._drained=!0,this._forward()},a.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var o;this._drained&&(o=r(this._readable2))!==null;)this.destroyed||(this._drained=this.push(o));this._forwarding=!1}},a.prototype.destroy=function(o,b){if(b||(b=g),this.destroyed)return b(null);this.destroyed=!0;var A=this;d.nextTick(function(){A._destroy(o),b(null)})},a.prototype._destroy=function(o){if(o){var b=this._ondrain;this._ondrain=null,b?b(o):this.emit("error",o)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},a.prototype._write=function(o,b,A){if(!this.destroyed){if(this._corked)return t(this,this._write.bind(this,o,b,A));if(o===e)return this._finish(A);if(!this._writable)return A();this._writable.write(o)===!1?this._ondrain=A:this.destroyed||A()}},a.prototype._finish=function(o){var b=this;this.emit("preend"),t(this,function(){s(b._forwardEnd&&b._writable,function(){b._writableState.prefinished===!1&&(b._writableState.prefinished=!0),b.emit("prefinish"),t(b,o)})})},a.prototype.end=function(o,b,A){return typeof o=="function"?this.end(null,null,o):typeof b=="function"?this.end(o,null,b):(this._ended=!0,o&&this.write(o),!this._writableState.ending&&!this._writableState.destroyed&&this.write(e),p.Writable.prototype.end.call(this,A))},C.exports=a}).call(this)}).call(this,v("_process"),v("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(v,C,T){(function(d){(function(){var h=v("once"),p=function(){},c=function(e){return e.setHeader&&typeof e.abort=="function"},i=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},r=function(e,t,n){if(typeof t=="function")return r(e,null,t);t||(t={}),n=h(n||p);var l=e._writableState,s=e._readableState,g=t.readable||t.readable!==!1&&e.readable,y=t.writable||t.writable!==!1&&e.writable,a=!1,o=function(){e.writable||b()},b=function(){y=!1,g||n.call(e)},A=function(){g=!1,y||n.call(e)},P=function(u){n.call(e,u?new Error("exited with error code: "+u):null)},B=function(u){n.call(e,u)},U=function(){d.nextTick(L)},L=function(){if(!a){if(g&&!(s&&s.ended&&!s.destroyed))return n.call(e,new Error("premature close"));if(y&&!(l&&l.ended&&!l.destroyed))return n.call(e,new Error("premature close"))}},Q=function(){e.req.on("finish",b)};return c(e)?(e.on("complete",b),e.on("abort",U),e.req?Q():e.on("request",Q)):y&&!l&&(e.on("end",o),e.on("close",o)),i(e)&&e.on("exit",P),e.on("end",A),e.on("finish",b),t.error!==!1&&e.on("error",B),e.on("close",U),function(){a=!0,e.removeListener("complete",b),e.removeListener("abort",U),e.removeListener("request",Q),e.req&&e.req.removeListener("finish",b),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",b),e.removeListener("exit",P),e.removeListener("end",A),e.removeListener("error",B),e.removeListener("close",U)}};C.exports=r}).call(this)}).call(this,v("_process"))},{_process:50,once:48}],22:[function(v,C,T){var d=Object.create||Q,h=Object.keys||u,p=Function.prototype.bind||E;function c(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=d(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}C.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0;var i=10,r;try{var e={};Object.defineProperty&&Object.defineProperty(e,"x",{value:0}),r=e.x===0}catch{r=!1}r?Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(m){if(typeof m!="number"||m<0||m!==m)throw new TypeError('"defaultMaxListeners" must be a positive number');i=m}}):c.defaultMaxListeners=i,c.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||isNaN(D))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=D,this};function t(m){return m._maxListeners===void 0?c.defaultMaxListeners:m._maxListeners}c.prototype.getMaxListeners=function(){return t(this)};function n(m,D,q){if(D)m.call(q);else for(var H=m.length,M=U(m,H),x=0;x<H;++x)M[x].call(q)}function l(m,D,q,H){if(D)m.call(q,H);else for(var M=m.length,x=U(m,M),z=0;z<M;++z)x[z].call(q,H)}function s(m,D,q,H,M){if(D)m.call(q,H,M);else for(var x=m.length,z=U(m,x),W=0;W<x;++W)z[W].call(q,H,M)}function g(m,D,q,H,M,x){if(D)m.call(q,H,M,x);else for(var z=m.length,W=U(m,z),se=0;se<z;++se)W[se].call(q,H,M,x)}function y(m,D,q,H){if(D)m.apply(q,H);else for(var M=m.length,x=U(m,M),z=0;z<M;++z)x[z].apply(q,H)}c.prototype.emit=function(D){var q,H,M,x,z,W,se=D==="error";if(W=this._events,W)se=se&&W.error==null;else if(!se)return!1;if(se){if(arguments.length>1&&(q=arguments[1]),q instanceof Error)throw q;var oe=new Error('Unhandled "error" event. ('+q+")");throw oe.context=q,oe}if(H=W[D],!H)return!1;var te=typeof H=="function";switch(M=arguments.length,M){case 1:n(H,te,this);break;case 2:l(H,te,this,arguments[1]);break;case 3:s(H,te,this,arguments[1],arguments[2]);break;case 4:g(H,te,this,arguments[1],arguments[2],arguments[3]);break;default:for(x=new Array(M-1),z=1;z<M;z++)x[z-1]=arguments[z];y(H,te,this,x)}return!0};function a(m,D,q,H){var M,x,z;if(typeof q!="function")throw new TypeError('"listener" argument must be a function');if(x=m._events,x?(x.newListener&&(m.emit("newListener",D,q.listener?q.listener:q),x=m._events),z=x[D]):(x=m._events=d(null),m._eventsCount=0),!z)z=x[D]=q,++m._eventsCount;else if(typeof z=="function"?z=x[D]=H?[q,z]:[z,q]:H?z.unshift(q):z.push(q),!z.warned&&(M=t(m),M&&M>0&&z.length>M)){z.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+z.length+' "'+String(D)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');W.name="MaxListenersExceededWarning",W.emitter=m,W.type=D,W.count=z.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",W.name,W.message)}return m}c.prototype.addListener=function(D,q){return a(this,D,q,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(D,q){return a(this,D,q,!0)};function o(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var m=new Array(arguments.length),D=0;D<m.length;++D)m[D]=arguments[D];this.listener.apply(this.target,m)}}function b(m,D,q){var H={fired:!1,wrapFn:void 0,target:m,type:D,listener:q},M=p.call(o,H);return M.listener=q,H.wrapFn=M,M}c.prototype.once=function(D,q){if(typeof q!="function")throw new TypeError('"listener" argument must be a function');return this.on(D,b(this,D,q)),this},c.prototype.prependOnceListener=function(D,q){if(typeof q!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(D,b(this,D,q)),this},c.prototype.removeListener=function(D,q){var H,M,x,z,W;if(typeof q!="function")throw new TypeError('"listener" argument must be a function');if(M=this._events,!M)return this;if(H=M[D],!H)return this;if(H===q||H.listener===q)--this._eventsCount===0?this._events=d(null):(delete M[D],M.removeListener&&this.emit("removeListener",D,H.listener||q));else if(typeof H!="function"){for(x=-1,z=H.length-1;z>=0;z--)if(H[z]===q||H[z].listener===q){W=H[z].listener,x=z;break}if(x<0)return this;x===0?H.shift():B(H,x),H.length===1&&(M[D]=H[0]),M.removeListener&&this.emit("removeListener",D,W||q)}return this},c.prototype.removeAllListeners=function(D){var q,H,M;if(H=this._events,!H)return this;if(!H.removeListener)return arguments.length===0?(this._events=d(null),this._eventsCount=0):H[D]&&(--this._eventsCount===0?this._events=d(null):delete H[D]),this;if(arguments.length===0){var x=h(H),z;for(M=0;M<x.length;++M)z=x[M],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=d(null),this._eventsCount=0,this}if(q=H[D],typeof q=="function")this.removeListener(D,q);else if(q)for(M=q.length-1;M>=0;M--)this.removeListener(D,q[M]);return this};function A(m,D,q){var H=m._events;if(!H)return[];var M=H[D];return M?typeof M=="function"?q?[M.listener||M]:[M]:q?L(M):U(M,M.length):[]}c.prototype.listeners=function(D){return A(this,D,!0)},c.prototype.rawListeners=function(D){return A(this,D,!1)},c.listenerCount=function(m,D){return typeof m.listenerCount=="function"?m.listenerCount(D):P.call(m,D)},c.prototype.listenerCount=P;function P(m){var D=this._events;if(D){var q=D[m];if(typeof q=="function")return 1;if(q)return q.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function B(m,D){for(var q=D,H=q+1,M=m.length;H<M;q+=1,H+=1)m[q]=m[H];m.pop()}function U(m,D){for(var q=new Array(D),H=0;H<D;++H)q[H]=m[H];return q}function L(m){for(var D=new Array(m.length),q=0;q<D.length;++q)D[q]=m[q].listener||m[q];return D}function Q(m){var D=function(){};return D.prototype=m,new D}function u(m){for(var D in m)Object.prototype.hasOwnProperty.call(m,D);return D}function E(m){var D=this;return function(){return D.apply(m,arguments)}}},{}],23:[function(v,C,T){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */T.read=function(d,h,p,c,i){var r,e,t=i*8-c-1,n=(1<<t)-1,l=n>>1,s=-7,g=p?i-1:0,y=p?-1:1,a=d[h+g];for(g+=y,r=a&(1<<-s)-1,a>>=-s,s+=t;s>0;r=r*256+d[h+g],g+=y,s-=8);for(e=r&(1<<-s)-1,r>>=-s,s+=c;s>0;e=e*256+d[h+g],g+=y,s-=8);if(r===0)r=1-l;else{if(r===n)return e?NaN:(a?-1:1)*(1/0);e=e+Math.pow(2,c),r=r-l}return(a?-1:1)*e*Math.pow(2,r-c)},T.write=function(d,h,p,c,i,r){var e,t,n,l=r*8-i-1,s=(1<<l)-1,g=s>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,a=c?0:r-1,o=c?1:-1,b=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(t=isNaN(h)?1:0,e=s):(e=Math.floor(Math.log(h)/Math.LN2),h*(n=Math.pow(2,-e))<1&&(e--,n*=2),e+g>=1?h+=y/n:h+=y*Math.pow(2,1-g),h*n>=2&&(e++,n/=2),e+g>=s?(t=0,e=s):e+g>=1?(t=(h*n-1)*Math.pow(2,i),e=e+g):(t=h*Math.pow(2,g-1)*Math.pow(2,i),e=0));i>=8;d[p+a]=t&255,a+=o,t/=256,i-=8);for(e=e<<i|t,l+=i;l>0;d[p+a]=e&255,a+=o,e/=256,l-=8);d[p+a-o]|=b*128}},{}],24:[function(v,C,T){typeof Object.create=="function"?C.exports=function(h,p){p&&(h.super_=p,h.prototype=Object.create(p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}))}:C.exports=function(h,p){if(p){h.super_=p;var c=function(){};c.prototype=p.prototype,h.prototype=new c,h.prototype.constructor=h}}},{}],25:[function(v,C,T){Object.defineProperty(T,"__esModule",{value:!0});var d=(function(){function h(p,c){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=p,this.value=c}return h.prototype.rotateLeft=function(){var p=this.parent,c=this.brother,i=this.leftChild,r=this.rightChild;if(!r)throw new Error("unknown error");var e=r.leftChild,t=r.rightChild;return p&&(p.leftChild===this?p.leftChild=r:p.rightChild===this&&(p.rightChild=r)),r.parent=p,r.brother=c,r.leftChild=this,r.rightChild=t,c&&(c.brother=r),this.parent=r,this.brother=t,this.leftChild=i,this.rightChild=e,t&&(t.parent=r,t.brother=this),i&&(i.parent=this,i.brother=e),e&&(e.parent=this,e.brother=i),r},h.prototype.rotateRight=function(){var p=this.parent,c=this.brother,i=this.leftChild;if(!i)throw new Error("unknown error");var r=this.rightChild,e=i.leftChild,t=i.rightChild;return p&&(p.leftChild===this?p.leftChild=i:p.rightChild===this&&(p.rightChild=i)),i.parent=p,i.brother=c,i.leftChild=e,i.rightChild=this,c&&(c.brother=i),e&&(e.parent=i,e.brother=this),this.parent=i,this.brother=e,this.leftChild=t,this.rightChild=r,t&&(t.parent=this,t.brother=r),r&&(r.parent=this,r.brother=t),i},h.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},h.TreeNodeColorType={red:!0,black:!1},h})();Object.freeze(d),T.default=d},{}],26:[function(v,C,T){var d=this&&this.__generator||function(p,c){var i={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},r,e,t,n;return n={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function l(g){return function(y){return s([g,y])}}function s(g){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,e&&(t=g[0]&2?e.return:g[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,g[1])).done)return t;switch(e=0,t&&(g=[g[0]&2,t.value]),g[0]){case 0:case 1:t=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,e=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(t=i.trys,!(t=t.length>0&&t[t.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!t||g[1]>t[0]&&g[1]<t[3])){i.label=g[1];break}if(g[0]===6&&i.label<t[1]){i.label=t[1],t=g;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(g);break}t[2]&&i.ops.pop(),i.trys.pop();continue}g=c.call(p,i)}catch(y){g=[6,y],e=0}finally{r=t=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(T,"__esModule",{value:!0}),h.sigma=3,h.bucketSize=5e3;function h(p){var c=this;p===void 0&&(p=[]);var i=[],r=0,e=0,t=0,n=0,l=0,s=0;this.size=function(){return s},this.empty=function(){return s===0},this.clear=function(){r=t=e=n=l=s=0,y.call(this,h.bucketSize),s=0},this.front=function(){return i[r][e]},this.back=function(){return i[t][n]},this.forEach=function(a){if(!this.empty()){var o=0;if(r===t){for(var b=e;b<=n;++b)a(i[r][b],o++);return}for(var b=e;b<h.bucketSize;++b)a(i[r][b],o++);for(var b=r+1;b<t;++b)for(var A=0;A<h.bucketSize;++A)a(i[b][A],o++);for(var b=0;b<=n;++b)a(i[t][b],o++)}};var g=function(a){var o=r*h.bucketSize+e,b=o+a,A=t*h.bucketSize+n;if(b<o||b>A)throw new Error("pos should more than 0 and less than queue's size");var P=Math.floor(b/h.bucketSize),B=b%h.bucketSize;return{curNodeBucketIndex:P,curNodePointerIndex:B}};this.getElementByPos=function(a){var o=g(a),b=o.curNodeBucketIndex,A=o.curNodePointerIndex;return i[b][A]},this.eraseElementByPos=function(a){var o=this;if(a<0||a>s)throw new Error("pos should more than 0 and less than queue's size");if(a===0)this.popFront();else if(a===this.size())this.popBack();else{for(var b=[],A=a+1;A<s;++A)b.push(this.getElementByPos(A));this.cut(a),this.popBack(),b.forEach(function(P){return o.pushBack(P)})}},this.eraseElementByValue=function(a){if(!this.empty()){var o=[];this.forEach(function(P){P!==a&&o.push(P)});for(var b=o.length,A=0;A<b;++A)this.setElementByPos(A,o[A]);this.cut(b-1)}};var y=function(a){for(var o=[],b=a*h.sigma,A=Math.max(Math.ceil(b/h.bucketSize),2),P=0;P<A;++P)o.push(new Array(h.bucketSize));var B=Math.ceil(a/h.bucketSize),U=Math.floor(A/2)-Math.floor(B/2),L=U,Q=0;if(this.size())for(var P=0;P<B;++P){for(var u=0;u<h.bucketSize;++u)if(o[U+P][u]=this.front(),this.popFront(),this.empty()){L=U+P,Q=u;break}if(this.empty())break}i=o,r=U,e=0,t=L,n=Q,l=A,s=a};this.pushBack=function(a){this.empty()||(t===l-1&&n===h.bucketSize-1&&y.call(this,this.size()),n<h.bucketSize-1?++n:t<l-1&&(++t,n=0)),++s,i[t][n]=a},this.popBack=function(){this.empty()||(this.size()!==1&&(n>0?--n:r<t&&(--t,n=h.bucketSize-1)),s>0&&--s)},this.setElementByPos=function(a,o){var b=g(a),A=b.curNodeBucketIndex,P=b.curNodePointerIndex;i[A][P]=o},this.insert=function(a,o,b){var A=this;if(b===void 0&&(b=1),a===0)for(;b--;)this.pushFront(o);else if(a===this.size())for(;b--;)this.pushBack(o);else{for(var P=[],B=a;B<s;++B)P.push(this.getElementByPos(B));this.cut(a-1);for(var B=0;B<b;++B)this.pushBack(o);P.forEach(function(U){return A.pushBack(U)})}},this.find=function(a){if(r===t){for(var o=e;o<=n;++o)if(i[r][o]===a)return!0;return!1}for(var o=e;o<h.bucketSize;++o)if(i[r][o]===a)return!0;for(var o=r+1;o<t;++o)for(var b=0;b<h.bucketSize;++b)if(i[o][b]===a)return!0;for(var o=0;o<=n;++o)if(i[t][o]===a)return!0;return!1},this.reverse=function(){for(var a=0,o=s-1;a<o;){var b=this.getElementByPos(a);this.setElementByPos(a,this.getElementByPos(o)),this.setElementByPos(o,b),++a,--o}},this.unique=function(){if(!this.empty()){var a=[],o=this.front();this.forEach(function(A,P){(P===0||A!==o)&&(a.push(A),o=A)});for(var b=0;b<s;++b)this.setElementByPos(b,a[b]);this.cut(a.length-1)}},this.sort=function(a){var o=[];this.forEach(function(A){o.push(A)}),o.sort(a);for(var b=0;b<s;++b)this.setElementByPos(b,o[b])},this.pushFront=function(a){this.empty()||(r===0&&e===0&&y.call(this,this.size()),e>0?--e:r>0&&(--r,e=h.bucketSize-1)),++s,i[r][e]=a},this.popFront=function(){this.empty()||(this.size()!==1&&(e<h.bucketSize-1?++e:r<t&&(++r,e=0)),s>0&&--s)},this.shrinkToFit=function(){var a=this,o=[];this.forEach(function(B){o.push(B)});var b=o.length;i=[];for(var A=Math.ceil(b/h.bucketSize),P=0;P<A;++P)i.push(new Array(h.bucketSize));this.clear(),o.forEach(function(B){return a.pushBack(B)})},this.cut=function(a){if(a<0){this.clear();return}var o=g(a),b=o.curNodeBucketIndex,A=o.curNodePointerIndex;t=b,n=A,s=a+1},this[Symbol.iterator]=function(){return(function(){var o,o,o,a,o;return d(this,function(b){switch(b.label){case 0:if(s===0)return[2];if(r!==t)return[3,5];o=e,b.label=1;case 1:return o<=n?[4,i[r][o]]:[3,4];case 2:b.sent(),b.label=3;case 3:return++o,[3,1];case 4:return[2];case 5:o=e,b.label=6;case 6:return o<h.bucketSize?[4,i[r][o]]:[3,9];case 7:b.sent(),b.label=8;case 8:return++o,[3,6];case 9:o=r+1,b.label=10;case 10:if(!(o<t))return[3,15];a=0,b.label=11;case 11:return a<h.bucketSize?[4,i[o][a]]:[3,14];case 12:b.sent(),b.label=13;case 13:return++a,[3,11];case 14:return++o,[3,10];case 15:o=0,b.label=16;case 16:return o<=n?[4,i[t][o]]:[3,19];case 17:b.sent(),b.label=18;case 18:return++o,[3,16];case 19:return[2]}})})()},(function(){var a=h.bucketSize;p.size?a=p.size():p.length&&(a=p.length);var o=a*h.sigma;l=Math.ceil(o/h.bucketSize),l=Math.max(l,3);for(var b=0;b<l;++b)i.push(new Array(h.bucketSize));var A=Math.ceil(a/h.bucketSize);r=Math.floor(l/2)-Math.floor(A/2),t=r,p.forEach(function(P){return c.pushBack(P)})})(),Object.freeze(this)}Object.freeze(h),T.default=h},{}],27:[function(v,C,T){var d=this&&this.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,l,s,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(o){return function(b){return a([o,b])}}function a(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,l&&(s=o[0]&2?l.return:o[0]?l.throw||((s=l.return)&&s.call(l),0):l.next)&&!(s=s.call(l,o[1])).done)return s;switch(l=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,l=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){t.label=o[1];break}if(o[0]===6&&t.label<s[1]){t.label=s[1],s=o;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(o);break}s[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(r,t)}catch(b){o=[6,b],l=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},h=this&&this.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(T,"__esModule",{value:!0});var p=v("../LinkList/LinkList"),c=v("../Map/Map");i.initSize=16,i.maxSize=1<<30,i.sigma=.75,i.treeifyThreshold=8,i.untreeifyThreshold=6,i.minTreeifySize=64;function i(r,e,t){var n=this;if(r===void 0&&(r=[]),e===void 0&&(e=i.initSize),t=t||(function(a){var o,b,A=0,P="";if(typeof a=="number")A=Math.floor(a),A=(A<<5)-A,A=A&A;else{typeof a!="string"?P=JSON.stringify(a):P=a;try{for(var B=h(P),U=B.next();!U.done;U=B.next()){var L=U.value,Q=L.charCodeAt(0);A=(A<<5)-A+Q,A=A&A}}catch(u){o={error:u}}finally{try{U&&!U.done&&(b=B.return)&&b.call(B)}finally{if(o)throw o.error}}}return A^=A>>>16,A}),(e&e-1)!==0)throw new Error("initBucketNum must be 2 to the power of n");var l=0,s=[],g=Math.max(i.initSize,Math.min(i.maxSize,e));this.size=function(){return l},this.empty=function(){return l===0},this.clear=function(){l=0,g=e,s=[]},this.forEach=function(a){var o=0;s.forEach(function(b){b.forEach(function(A){a(A,o++)})})};var y=function(a){if(!(a>=i.maxSize)){g=a*2;var o=[];s.forEach(function(b,A){if(!b.empty()){if(b instanceof p.default&&b.size()===1){var P=b.front(),B=P.key,U=P.value;o[t(B)&g-1]=new p.default([{key:B,value:U}])}else if(b instanceof c.default){var L=new p.default,Q=new p.default;b.forEach(function(m){var D=t(m.key);(D&a)===0?L.pushBack(m):Q.pushBack(m)}),L.size()>i.untreeifyThreshold?o[A]=new c.default(L):L.size()&&(o[A]=L),Q.size()>i.untreeifyThreshold?o[A+a]=new c.default(Q):Q.size()&&(o[A+a]=Q)}else{var u=new p.default,E=new p.default;b.forEach(function(m){var D=t(m.key);(D&a)===0?u.pushBack(m):E.pushBack(m)}),u.size()&&(o[A]=u),E.size()&&(o[A+a]=E)}s[A].clear()}}),s=o}};this.setElement=function(a,o){var b,A;if(a==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(o==null){this.eraseElementByKey(a);return}var P=t(a)&g-1;if(!s[P])++l,s[P]=new p.default([{key:a,value:o}]);else{var B=s[P].size();if(s[P]instanceof p.default){try{for(var U=h(s[P]),L=U.next();!L.done;L=U.next()){var Q=L.value;if(Q.key===a){Q.value=o;return}}}catch(E){b={error:E}}finally{try{L&&!L.done&&(A=U.return)&&A.call(U)}finally{if(b)throw b.error}}s[P].pushBack({key:a,value:o}),s[P].size()>=i.treeifyThreshold&&(s[P]=new c.default(s[P]))}else s[P].setElement(a,o);var u=s[P].size();l+=u-B}l>g*i.sigma&&y.call(this,g)},this.getElementByKey=function(a){var o,b,A=t(a)&g-1;if(s[A]){if(s[A]instanceof c.default)return s[A].getElementByKey(a);try{for(var P=h(s[A]),B=P.next();!B.done;B=P.next()){var U=B.value;if(U.key===a)return U.value}}catch(L){o={error:L}}finally{try{B&&!B.done&&(b=P.return)&&b.call(P)}finally{if(o)throw o.error}}}},this.eraseElementByKey=function(a){var o,b,A=t(a)&g-1;if(s[A]){var P=s[A].size();if(s[A]instanceof c.default)s[A].eraseElementByKey(a),s[A].size()<=i.untreeifyThreshold&&(s[A]=new p.default(s[A]));else{var B=-1;try{for(var U=h(s[A]),L=U.next();!L.done;L=U.next()){var Q=L.value;if(++B,Q.key===a){s[A].eraseElementByPos(B);break}}}catch(E){o={error:E}}finally{try{L&&!L.done&&(b=U.return)&&b.call(U)}finally{if(o)throw o.error}}}var u=s[A].size();l+=u-P}},this.find=function(a){var o,b,A=t(a)&g-1;if(!s[A])return!1;if(s[A]instanceof c.default)return s[A].find(a);try{for(var P=h(s[A]),B=P.next();!B.done;B=P.next()){var U=B.value;if(U.key===a)return!0}}catch(L){o={error:L}}finally{try{B&&!B.done&&(b=P.return)&&b.call(P)}finally{if(o)throw o.error}}return!1},this[Symbol.iterator]=function(){return(function(){var a,o,b,A,P,B,U;return d(this,function(L){switch(L.label){case 0:a=0,L.label=1;case 1:if(!(a<g))return[3,10];for(;a<g&&!s[a];)++a;if(a>=g)return[3,10];L.label=2;case 2:L.trys.push([2,7,8,9]),o=(B=void 0,h(s[a])),b=o.next(),L.label=3;case 3:return b.done?[3,6]:(A=b.value,[4,A]);case 4:L.sent(),L.label=5;case 5:return b=o.next(),[3,3];case 6:return[3,9];case 7:return P=L.sent(),B={error:P},[3,9];case 8:try{b&&!b.done&&(U=o.return)&&U.call(o)}finally{if(B)throw B.error}return[7];case 9:return++a,[3,1];case 10:return[2]}})})()},r.forEach(function(a){var o=a.key,b=a.value;return n.setElement(o,b)}),Object.freeze(this)}Object.freeze(i),T.default=i},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(v,C,T){var d=this&&this.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,l,s,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(o){return function(b){return a([o,b])}}function a(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,l&&(s=o[0]&2?l.return:o[0]?l.throw||((s=l.return)&&s.call(l),0):l.next)&&!(s=s.call(l,o[1])).done)return s;switch(l=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,l=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){t.label=o[1];break}if(o[0]===6&&t.label<s[1]){t.label=s[1],s=o;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(o);break}s[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(r,t)}catch(b){o=[6,b],l=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},h=this&&this.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(T,"__esModule",{value:!0});var p=v("../Set/Set"),c=v("../LinkList/LinkList");i.initSize=16,i.maxSize=1<<30,i.sigma=.75,i.treeifyThreshold=8,i.untreeifyThreshold=6,i.minTreeifySize=64;function i(r,e,t){var n=this;if(r===void 0&&(r=[]),e===void 0&&(e=i.initSize),t=t||(function(a){var o=0,b="";if(typeof a=="number")o=Math.floor(a),o=(o<<5)-o,o=o&o;else{typeof a!="string"?b=JSON.stringify(a):b=a;for(var A=0;A<b.length;A++){var P=b.charCodeAt(A);o=(o<<5)-o+P,o=o&o}}return o^=o>>>16,o}),(e&e-1)!==0)throw new Error("initBucketNum must be 2 to the power of n");var l=0,s=[],g=Math.max(i.initSize,Math.min(i.maxSize,e));this.size=function(){return l},this.empty=function(){return l===0},this.clear=function(){l=0,g=e,s=[]},this.forEach=function(a){var o=0;s.forEach(function(b){b.forEach(function(A){a(A,o++)})})};var y=function(a){if(!(a>=i.maxSize)){g=a*2;var o=[];s.forEach(function(b,A){if(!b.empty()){if(b instanceof c.default&&b.size()===1){var P=b.front();if(P===void 0)throw new Error("unknown error");o[t(P)&g-1]=new c.default([P])}else if(b instanceof p.default){var B=new c.default,U=new c.default;b.forEach(function(u){var E=t(u);(E&a)===0?B.pushBack(u):U.pushBack(u)}),B.size()>i.untreeifyThreshold?o[A]=new p.default(B):B.size()&&(o[A]=B),U.size()>i.untreeifyThreshold?o[A+a]=new p.default(U):U.size()&&(o[A+a]=U)}else{var L=new c.default,Q=new c.default;b.forEach(function(u){var E=t(u);(E&a)===0?L.pushBack(u):Q.pushBack(u)}),L.size()&&(o[A]=L),Q.size()&&(o[A+a]=Q)}s[A].clear()}}),s=o}};this.insert=function(a){if(a==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var o=t(a)&g-1;if(!s[o])s[o]=new c.default([a]),++l;else{var b=s[o].size();if(s[o]instanceof c.default){if(s[o].find(a))return;s[o].pushBack(a),s[o].size()>=i.treeifyThreshold&&(s[o]=new p.default(s[o]))}else s[o].insert(a);var A=s[o].size();l+=A-b}l>g*i.sigma&&y.call(this,g)},this.eraseElementByValue=function(a){var o=t(a)&g-1;if(s[o]){var b=s[o].size();s[o].eraseElementByValue(a),s[o]instanceof p.default&&s[o].size()<=i.untreeifyThreshold&&(s[o]=new c.default(s[o]));var A=s[o].size();l+=A-b}},this.find=function(a){var o=t(a)&g-1;return s[o]?s[o].find(a):!1},this[Symbol.iterator]=function(){return(function(){var a,o,b,A,P,B,U;return d(this,function(L){switch(L.label){case 0:a=0,L.label=1;case 1:if(!(a<g))return[3,10];for(;a<g&&!s[a];)++a;if(a>=g)return[3,10];L.label=2;case 2:L.trys.push([2,7,8,9]),o=(B=void 0,h(s[a])),b=o.next(),L.label=3;case 3:return b.done?[3,6]:(A=b.value,[4,A]);case 4:L.sent(),L.label=5;case 5:return b=o.next(),[3,3];case 6:return[3,9];case 7:return P=L.sent(),B={error:P},[3,9];case 8:try{b&&!b.done&&(U=o.return)&&U.call(o)}finally{if(B)throw B.error}return[7];case 9:return++a,[3,1];case 10:return[2]}})})()},r.forEach(function(a){return n.insert(a)}),Object.freeze(this)}Object.freeze(i),T.default=i},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(v,C,T){var d=this&&this.__generator||function(c,i){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},e,t,n,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(y){return function(a){return g([y,a])}}function g(y){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,t&&(n=y[0]&2?t.return:y[0]?t.throw||((n=t.return)&&n.call(t),0):t.next)&&!(n=n.call(t,y[1])).done)return n;switch(t=0,n&&(y=[y[0]&2,n.value]),y[0]){case 0:case 1:n=y;break;case 4:return r.label++,{value:y[1],done:!1};case 5:r.label++,t=y[1],y=[0];continue;case 7:y=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(y[0]===6||y[0]===2)){r=0;continue}if(y[0]===3&&(!n||y[1]>n[0]&&y[1]<n[3])){r.label=y[1];break}if(y[0]===6&&r.label<n[1]){r.label=n[1],n=y;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(y);break}n[2]&&r.ops.pop(),r.trys.pop();continue}y=i.call(c,r)}catch(a){y=[6,a],t=0}finally{e=n=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(T,"__esModule",{value:!0});var h=(function(){function c(i){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=i}return c})();function p(c){var i=this;c===void 0&&(c=[]);var r=0,e=void 0,t=void 0;this.size=function(){return r},this.empty=function(){return r===0},this.clear=function(){e=t=void 0,r=0},this.front=function(){return e==null?void 0:e.value},this.back=function(){return t==null?void 0:t.value},this.forEach=function(n){for(var l=e,s=0;l;){if(l.value===void 0)throw new Error("unknown error");n(l.value,s++),l=l.next}},this.getElementByPos=function(n){if(n<0||n>=r)throw new Error("pos must more then 0 and less then the list length");for(var l=e;n--&&l;)l=l.next;if(!l||l.value===void 0)throw new Error("unknown error");return l.value},this.eraseElementByPos=function(n){if(n<0||n>=r)throw new Error("erase pos must more then 0 and less then the list length");if(n===0)this.popFront();else if(n===r-1)this.popBack();else{for(var l=e;n--;){if(!(l!=null&&l.next))throw new Error("unknown error");l=l.next}if(!l||!l.pre||!l.next)throw new Error("unknown error");var s=l.pre,g=l.next;g.pre=s,s.next=g,r>0&&--r}},this.eraseElementByValue=function(n){for(;e&&e.value===n;)this.popFront();for(;t&&t.value===n;)this.popBack();if(e)for(var l=e;l;){if(l.value===n){var s=l.pre,g=l.next;g&&(g.pre=s),s&&(s.next=g),r>0&&--r}l=l.next}},this.pushBack=function(n){if(n==null)throw new Error("you can't push null or undefined here");++r;var l=new h(n);t?(t.next=l,l.pre=t,t=l):e=t=l},this.popBack=function(){t&&(r>0&&--r,t&&(e===t?e=t=void 0:(t=t.pre,t&&(t.next=void 0))))},this.setElementByPos=function(n,l){if(l==null)throw new Error("you can't set null or undefined here");if(n<0||n>=r)throw new Error("pos must more then 0 and less then the list length");for(var s=e;n--;){if(!s)throw new Error("unknown error");s=s.next}s&&(s.value=l)},this.insert=function(n,l,s){if(s===void 0&&(s=1),l==null)throw new Error("you can't insert null or undefined here");if(n<0||n>r)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(s<0)throw new Error("insert size must more than 0");if(n===0)for(;s--;)this.pushFront(l);else if(n===r)for(;s--;)this.pushBack(l);else{for(var g=e,y=1;y<n;++y){if(!(g!=null&&g.next))throw new Error("unknown error");g=g==null?void 0:g.next}if(!g)throw new Error("unknown error");var a=g.next;for(r+=s;s--;)g.next=new h(l),g.next.pre=g,g=g.next;g.next=a,a&&(a.pre=g)}},this.find=function(n){for(var l=e;l;){if(l.value===n)return!0;l=l.next}return!1},this.reverse=function(){for(var n=e,l=t,s=0;n&&l&&s*2<r;){var g=n.value;n.value=l.value,l.value=g,n=n.next,l=l.pre,++s}},this.unique=function(){for(var n=e;n;){for(var l=n;l&&l.next&&l.value===l.next.value;)l=l.next,r>0&&--r;n.next=l.next,n.next&&(n.next.pre=n),n=n.next}},this.sort=function(n){var l=[];this.forEach(function(g){l.push(g)}),l.sort(n);var s=e;l.forEach(function(g){s&&(s.value=g,s=s.next)})},this.pushFront=function(n){if(n==null)throw new Error("you can't push null or undefined here");++r;var l=new h(n);e?(l.next=e,e.pre=l,e=l):e=t=l},this.popFront=function(){e&&(r>0&&--r,e&&(e===t?e=t=void 0:(e=e.next,e&&(e.pre=void 0))))},this.merge=function(n){var l=this,s=e;n.forEach(function(g){for(;s&&s.value!==void 0&&s.value<=g;)s=s.next;if(s===void 0)l.pushBack(g),s=t;else if(s===e)l.pushFront(g),s=e;else{++r;var y=s.pre;y&&(y.next=new h(g),y.next.pre=y,y.next.next=s,s&&(s.pre=y.next))}})},this[Symbol.iterator]=function(){return(function(){var n;return d(this,function(l){switch(l.label){case 0:n=e,l.label=1;case 1:if(n===void 0)return[3,3];if(!n.value)throw new Error("unknown error");return[4,n.value];case 2:return l.sent(),n=n.next,[3,1];case 3:return[2]}})})()},c.forEach(function(n){return i.pushBack(n)}),Object.freeze(this)}Object.freeze(p),T.default=p},{}],30:[function(v,C,T){var d=this&&this.__generator||function(i,r){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},t,n,l,s;return s={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function g(a){return function(o){return y([a,o])}}function y(a){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,n&&(l=a[0]&2?n.return:a[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,a[1])).done)return l;switch(n=0,l&&(a=[a[0]&2,l.value]),a[0]){case 0:case 1:l=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,n=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!l||a[1]>l[0]&&a[1]<l[3])){e.label=a[1];break}if(a[0]===6&&e.label<l[1]){e.label=l[1],l=a;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(a);break}l[2]&&e.ops.pop(),e.trys.pop();continue}a=r.call(i,e)}catch(o){a=[6,o],n=0}finally{t=l=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},h=this&&this.__values||function(i){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&i[r],t=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&t>=i.length&&(i=void 0),{value:i&&i[t++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(T,"__esModule",{value:!0});var p=v("../Base/TreeNode");function c(i,r){var e=this;i===void 0&&(i=[]),r=r||(function(u,E){return u<E?-1:u>E?1:0});var t=0,n=new p.default;n.color=p.default.TreeNodeColorType.black,this.size=function(){return t},this.empty=function(){return t===0},this.clear=function(){t=0,n.key=n.value=void 0,n.leftChild=n.rightChild=n.brother=void 0};var l=function(u){if(!u||u.key===void 0)throw new Error("unknown error");return u.leftChild?l(u.leftChild):u},s=function(u){if(!u||u.key===void 0)throw new Error("unknown error");return u.rightChild?s(u.rightChild):u};this.front=function(){if(!this.empty()){var u=l(n);if(u.key===void 0||u.value===void 0)throw new Error("unknown error");return{key:u.key,value:u.value}}},this.back=function(){if(!this.empty()){var u=s(n);if(u.key===void 0||u.value===void 0)throw new Error("unknown error");return{key:u.key,value:u.value}}},this.forEach=function(u){var E,m,D=0;try{for(var q=h(this),H=q.next();!H.done;H=q.next()){var M=H.value;u(M,D++)}}catch(x){E={error:x}}finally{try{H&&!H.done&&(m=q.return)&&m.call(q)}finally{if(E)throw E.error}}},this.getElementByPos=function(u){var E,m;if(u<0||u>=this.size())throw new Error("pos must more than 0 and less than set's size");var D=0;try{for(var q=h(this),H=q.next();!H.done;H=q.next()){var M=H.value;if(D===u)return M;++D}}catch(x){E={error:x}}finally{try{H&&!H.done&&(m=q.return)&&m.call(q)}finally{if(E)throw E.error}}throw new Error("unknown Error")};var g=function(u,E){if(!(!u||u.key===void 0||u.value===void 0)){var m=r(u.key,E);return m===0?{key:u.key,value:u.value}:m<0?g(u.rightChild,E):g(u.leftChild,E)||{key:u.key,value:u.value}}};this.lowerBound=function(u){return g(n,u)};var y=function(u,E){if(!(!u||u.key===void 0||u.value===void 0)){var m=r(u.key,E);return m<=0?y(u.rightChild,E):y(u.leftChild,E)||{key:u.key,value:u.value}}};this.upperBound=function(u){return y(n,u)};var a=function(u,E){if(!(!u||u.key===void 0||u.value===void 0)){var m=r(u.key,E);return m===0?{key:u.key,value:u.value}:m>0?a(u.leftChild,E):a(u.rightChild,E)||{key:u.key,value:u.value}}};this.reverseLowerBound=function(u){return a(n,u)};var o=function(u,E){if(!(!u||u.key===void 0||u.value===void 0)){var m=r(u.key,E);return m>=0?o(u.leftChild,E):o(u.rightChild,E)||{key:u.key,value:u.value}}};this.reverseUpperBound=function(u){return o(n,u)};var b=function(u){var E=u.parent;if(!E){if(u===n)return;throw new Error("unknown error")}if(u.color===p.default.TreeNodeColorType.red){u.color=p.default.TreeNodeColorType.black;return}var m=u.brother;if(!m)throw new Error("unknown error");if(u===E.leftChild){if(m.color===p.default.TreeNodeColorType.red){m.color=p.default.TreeNodeColorType.black,E.color=p.default.TreeNodeColorType.red;var D=E.rotateLeft();n===E&&(n=D),b(u)}else if(m.color===p.default.TreeNodeColorType.black)if(m.rightChild&&m.rightChild.color===p.default.TreeNodeColorType.red){m.color=E.color,E.color=p.default.TreeNodeColorType.black,m.rightChild&&(m.rightChild.color=p.default.TreeNodeColorType.black);var D=E.rotateLeft();n===E&&(n=D),u.color=p.default.TreeNodeColorType.black}else if((!m.rightChild||m.rightChild.color===p.default.TreeNodeColorType.black)&&m.leftChild&&m.leftChild.color===p.default.TreeNodeColorType.red){m.color=p.default.TreeNodeColorType.red,m.leftChild&&(m.leftChild.color=p.default.TreeNodeColorType.black);var D=m.rotateRight();n===m&&(n=D),b(u)}else(!m.leftChild||m.leftChild.color===p.default.TreeNodeColorType.black)&&(!m.rightChild||m.rightChild.color===p.default.TreeNodeColorType.black)&&(m.color=p.default.TreeNodeColorType.red,b(E))}else if(u===E.rightChild){if(m.color===p.default.TreeNodeColorType.red){m.color=p.default.TreeNodeColorType.black,E.color=p.default.TreeNodeColorType.red;var D=E.rotateRight();n===E&&(n=D),b(u)}else if(m.color===p.default.TreeNodeColorType.black)if(m.leftChild&&m.leftChild.color===p.default.TreeNodeColorType.red){m.color=E.color,E.color=p.default.TreeNodeColorType.black,m.leftChild&&(m.leftChild.color=p.default.TreeNodeColorType.black);var D=E.rotateRight();n===E&&(n=D),u.color=p.default.TreeNodeColorType.black}else if((!m.leftChild||m.leftChild.color===p.default.TreeNodeColorType.black)&&m.rightChild&&m.rightChild.color===p.default.TreeNodeColorType.red){m.color=p.default.TreeNodeColorType.red,m.rightChild&&(m.rightChild.color=p.default.TreeNodeColorType.black);var D=m.rotateLeft();n===m&&(n=D),b(u)}else(!m.leftChild||m.leftChild.color===p.default.TreeNodeColorType.black)&&(!m.rightChild||m.rightChild.color===p.default.TreeNodeColorType.black)&&(m.color=p.default.TreeNodeColorType.red,b(E))}},A=function(u){for(var E=u;E.leftChild||E.rightChild;){if(E.rightChild){E=l(E.rightChild);var m=u.key;u.key=E.key,E.key=m;var D=u.value;u.value=E.value,E.value=D,u=E}if(E.leftChild){E=s(E.leftChild);var m=u.key;u.key=E.key,E.key=m;var D=u.value;u.value=E.value,E.value=D,u=E}}b(E),E&&E.remove(),--t,n.color=p.default.TreeNodeColorType.black},P=function(u,E){if(!u||u.key===void 0)return!1;var m=P(u.leftChild,E);return m||E(u)?!0:P(u.rightChild,E)};this.eraseElementByPos=function(u){if(u<0||u>=t)throw new Error("pos must more than 0 and less than set's size");var E=0;P(n,function(m){return u===E?(A(m),!0):(++E,!1)})},this.eraseElementByKey=function(u){if(!this.empty()){var E=L(n,u);E===void 0||E.key===void 0||r(E.key,u)!==0||A(E)}};var B=function(u,E){if(!u||u.key===void 0)throw new Error("unknown error");var m=r(E,u.key);return m<0?u.leftChild?B(u.leftChild,E):(u.leftChild=new p.default,u.leftChild.parent=u,u.leftChild.brother=u.rightChild,u.rightChild&&(u.rightChild.brother=u.leftChild),u.leftChild):m>0?u.rightChild?B(u.rightChild,E):(u.rightChild=new p.default,u.rightChild.parent=u,u.rightChild.brother=u.leftChild,u.leftChild&&(u.leftChild.brother=u.rightChild),u.rightChild):u},U=function(u){var E=u.parent;if(!E){if(u===n)return;throw new Error("unknown error")}if(E.color!==p.default.TreeNodeColorType.black&&E.color===p.default.TreeNodeColorType.red){var m=E.brother,D=E.parent;if(!D)throw new Error("unknown error");if(m&&m.color===p.default.TreeNodeColorType.red)m.color=E.color=p.default.TreeNodeColorType.black,D.color=p.default.TreeNodeColorType.red,U(D);else if(!m||m.color===p.default.TreeNodeColorType.black){if(E===D.leftChild){if(u===E.leftChild){E.color=p.default.TreeNodeColorType.black,D.color=p.default.TreeNodeColorType.red;var q=D.rotateRight();D===n&&(n=q)}else if(u===E.rightChild){var q=E.rotateLeft();D===n&&(n=q),U(E)}}else if(E===D.rightChild){if(u===E.leftChild){var q=E.rotateRight();D===n&&(n=q),U(E)}else if(u===E.rightChild){E.color=p.default.TreeNodeColorType.black,D.color=p.default.TreeNodeColorType.red;var q=D.rotateLeft();D===n&&(n=q)}}}}};this.setElement=function(u,E){if(u==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(E==null){this.eraseElementByKey(u);return}if(this.empty()){++t,n.key=u,n.value=E,n.color=p.default.TreeNodeColorType.black;return}var m=B(n,u);if(m.key!==void 0&&r(m.key,u)===0){m.value=E;return}++t,m.key=u,m.value=E,U(m),n.color=p.default.TreeNodeColorType.black};var L=function(u,E){if(!(!u||u.key===void 0)){var m=r(E,u.key);return m<0?L(u.leftChild,E):m>0?L(u.rightChild,E):u}};this.find=function(u){return!!L(n,u)},this.getElementByKey=function(u){var E=L(n,u);if((E==null?void 0:E.key)===void 0||(E==null?void 0:E.value)===void 0)throw new Error("unknown error");return E.value},this.union=function(u){var E=this;u.forEach(function(m){var D=m.key,q=m.value;return E.setElement(D,q)})},this.getHeight=function(){if(this.empty())return 0;var u=function(E){return E?Math.max(u(E.leftChild),u(E.rightChild))+1:1};return u(n)};var Q=function(u){return d(this,function(E){switch(E.label){case 0:return!u||u.key===void 0||u.value===void 0?[2]:[5,h(Q(u.leftChild))];case 1:return E.sent(),[4,{key:u.key,value:u.value}];case 2:return E.sent(),[5,h(Q(u.rightChild))];case 3:return E.sent(),[2]}})};this[Symbol.iterator]=function(){return Q(n)},i.forEach(function(u){var E=u.key,m=u.value;return e.setElement(E,m)}),Object.freeze(this)}Object.freeze(c),T.default=c},{"../Base/TreeNode":25}],31:[function(v,C,T){Object.defineProperty(T,"__esModule",{value:!0});function d(h,p){h===void 0&&(h=[]),p=p||(function(t,n){return t>n?-1:t<n?1:0});var c=[];h.forEach(function(t){return c.push(t)});var i=c.length,r=function(t,n){if(t<0||t>=i)throw new Error("unknown error");if(n<0||n>=i)throw new Error("unknown error");var l=c[t];c[t]=c[n],c[n]=l},e=function(t){if(t<0||t>=i)throw new Error("unknown error");var n=t*2+1,l=t*2+2;n<i&&p(c[t],c[n])>0&&r(t,n),l<i&&p(c[t],c[l])>0&&r(t,l)};(function(){for(var t=Math.floor((i-1)/2);t>=0;--t)for(var n=t,l=n*2+1;l<i;){var s=l,g=s+1,y=s;if(g<i&&p(c[s],c[g])>0&&(y=g),p(c[n],c[y])<=0)break;r(n,y),n=y,l=n*2+1}})(),this.size=function(){return i},this.empty=function(){return i===0},this.clear=function(){i=0,c.length=0},this.push=function(t){if(c.push(t),++i,i!==1)for(var n=i-1;n>0;){var l=Math.floor((n-1)/2);if(p(c[l],t)<=0)break;e(l),n=l}},this.pop=function(){if(!this.empty()){if(this.size()===1){--i;return}var t=c[i-1];--i;for(var n=0;n<this.size();){var l=n*2+1,s=n*2+2;if(l>=this.size())break;var g=l;if(s<this.size()&&p(c[l],c[s])>0&&(g=s),p(c[g],t)>=0)break;c[n]=c[g],n=g}c[n]=t}},this.top=function(){return c[0]},Object.freeze(this)}Object.freeze(d),T.default=d},{}],32:[function(v,C,T){Object.defineProperty(T,"__esModule",{value:!0});var d=v("../LinkList/LinkList");function h(p){p===void 0&&(p=[]);var c=new d.default(p);this.size=function(){return c.size()},this.empty=function(){return c.empty()},this.clear=function(){c.clear()},this.push=function(i){c.pushBack(i)},this.pop=function(){c.popFront()},this.front=function(){return c.front()},Object.freeze(this)}Object.freeze(h),T.default=h},{"../LinkList/LinkList":29}],33:[function(v,C,T){var d=this&&this.__generator||function(i,r){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},t,n,l,s;return s={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function g(a){return function(o){return y([a,o])}}function y(a){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,n&&(l=a[0]&2?n.return:a[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,a[1])).done)return l;switch(n=0,l&&(a=[a[0]&2,l.value]),a[0]){case 0:case 1:l=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,n=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!l||a[1]>l[0]&&a[1]<l[3])){e.label=a[1];break}if(a[0]===6&&e.label<l[1]){e.label=l[1],l=a;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(a);break}l[2]&&e.ops.pop(),e.trys.pop();continue}a=r.call(i,e)}catch(o){a=[6,o],n=0}finally{t=l=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},h=this&&this.__values||function(i){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&i[r],t=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&t>=i.length&&(i=void 0),{value:i&&i[t++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(T,"__esModule",{value:!0});var p=v("../Base/TreeNode");function c(i,r){var e=this;i===void 0&&(i=[]),r=r||(function(u,E){return u<E?-1:u>E?1:0});var t=0,n=new p.default;n.color=p.default.TreeNodeColorType.black,this.size=function(){return t},this.empty=function(){return t===0},this.clear=function(){t=0,n.key=void 0,n.leftChild=n.rightChild=n.brother=n.parent=void 0,n.color=p.default.TreeNodeColorType.black};var l=function(u){if(!u||u.key===void 0)throw new Error("unknown error");return u.leftChild?l(u.leftChild):u},s=function(u){if(!u||u.key===void 0)throw new Error("unknown error");return u.rightChild?s(u.rightChild):u};this.front=function(){if(!this.empty()){var u=l(n);return u.key}},this.back=function(){if(!this.empty()){var u=s(n);return u.key}},this.forEach=function(u){var E,m,D=0;try{for(var q=h(this),H=q.next();!H.done;H=q.next()){var M=H.value;u(M,D++)}}catch(x){E={error:x}}finally{try{H&&!H.done&&(m=q.return)&&m.call(q)}finally{if(E)throw E.error}}},this.getElementByPos=function(u){var E,m;if(u<0||u>=this.size())throw new Error("pos must more than 0 and less than set's size");var D=0;try{for(var q=h(this),H=q.next();!H.done;H=q.next()){var M=H.value;if(D===u)return M;++D}}catch(x){E={error:x}}finally{try{H&&!H.done&&(m=q.return)&&m.call(q)}finally{if(E)throw E.error}}throw new Error("unknown error")};var g=function(u){var E=u.parent;if(!E){if(u===n)return;throw new Error("unknown error")}if(u.color===p.default.TreeNodeColorType.red){u.color=p.default.TreeNodeColorType.black;return}var m=u.brother;if(!m)throw new Error("unknown error");if(u===E.leftChild){if(m.color===p.default.TreeNodeColorType.red){m.color=p.default.TreeNodeColorType.black,E.color=p.default.TreeNodeColorType.red;var D=E.rotateLeft();n===E&&(n=D),g(u)}else if(m.color===p.default.TreeNodeColorType.black)if(m.rightChild&&m.rightChild.color===p.default.TreeNodeColorType.red){m.color=E.color,E.color=p.default.TreeNodeColorType.black,m.rightChild&&(m.rightChild.color=p.default.TreeNodeColorType.black);var D=E.rotateLeft();n===E&&(n=D),u.color=p.default.TreeNodeColorType.black}else if((!m.rightChild||m.rightChild.color===p.default.TreeNodeColorType.black)&&m.leftChild&&m.leftChild.color===p.default.TreeNodeColorType.red){m.color=p.default.TreeNodeColorType.red,m.leftChild&&(m.leftChild.color=p.default.TreeNodeColorType.black);var D=m.rotateRight();n===m&&(n=D),g(u)}else(!m.leftChild||m.leftChild.color===p.default.TreeNodeColorType.black)&&(!m.rightChild||m.rightChild.color===p.default.TreeNodeColorType.black)&&(m.color=p.default.TreeNodeColorType.red,g(E))}else if(u===E.rightChild){if(m.color===p.default.TreeNodeColorType.red){m.color=p.default.TreeNodeColorType.black,E.color=p.default.TreeNodeColorType.red;var D=E.rotateRight();n===E&&(n=D),g(u)}else if(m.color===p.default.TreeNodeColorType.black)if(m.leftChild&&m.leftChild.color===p.default.TreeNodeColorType.red){m.color=E.color,E.color=p.default.TreeNodeColorType.black,m.leftChild&&(m.leftChild.color=p.default.TreeNodeColorType.black);var D=E.rotateRight();n===E&&(n=D),u.color=p.default.TreeNodeColorType.black}else if((!m.leftChild||m.leftChild.color===p.default.TreeNodeColorType.black)&&m.rightChild&&m.rightChild.color===p.default.TreeNodeColorType.red){m.color=p.default.TreeNodeColorType.red,m.rightChild&&(m.rightChild.color=p.default.TreeNodeColorType.black);var D=m.rotateLeft();n===m&&(n=D),g(u)}else(!m.leftChild||m.leftChild.color===p.default.TreeNodeColorType.black)&&(!m.rightChild||m.rightChild.color===p.default.TreeNodeColorType.black)&&(m.color=p.default.TreeNodeColorType.red,g(E))}},y=function(u){for(var E=u;E.leftChild||E.rightChild;){if(E.rightChild){E=l(E.rightChild);var m=u.key;u.key=E.key,E.key=m,u=E}if(E.leftChild){E=s(E.leftChild);var m=u.key;u.key=E.key,E.key=m,u=E}}g(E),E&&E.remove(),--t,n.color=p.default.TreeNodeColorType.black},a=function(u,E){if(!u||u.key===void 0)return!1;var m=a(u.leftChild,E);return m||E(u)?!0:a(u.rightChild,E)};this.eraseElementByPos=function(u){if(u<0||u>=t)throw new Error("pos must more than 0 and less than set's size");var E=0;a(n,function(m){return u===E?(y(m),!0):(++E,!1)})},this.eraseElementByValue=function(u){if(!this.empty()){var E=A(n,u);E===void 0||E.key===void 0||r(E.key,u)!==0||y(E)}};var o=function(u,E){if(!u||u.key===void 0)throw new Error("unknown error");var m=r(E,u.key);return m<0?u.leftChild?o(u.leftChild,E):(u.leftChild=new p.default,u.leftChild.parent=u,u.leftChild.brother=u.rightChild,u.rightChild&&(u.rightChild.brother=u.leftChild),u.leftChild):m>0?u.rightChild?o(u.rightChild,E):(u.rightChild=new p.default,u.rightChild.parent=u,u.rightChild.brother=u.leftChild,u.leftChild&&(u.leftChild.brother=u.rightChild),u.rightChild):u},b=function(u){var E=u.parent;if(!E){if(u===n)return;throw new Error("unknown error")}if(E.color!==p.default.TreeNodeColorType.black&&E.color===p.default.TreeNodeColorType.red){var m=E.brother,D=E.parent;if(!D)throw new Error("unknown error");if(m&&m.color===p.default.TreeNodeColorType.red)m.color=E.color=p.default.TreeNodeColorType.black,D.color=p.default.TreeNodeColorType.red,b(D);else if(!m||m.color===p.default.TreeNodeColorType.black){if(E===D.leftChild){if(u===E.leftChild){E.color=p.default.TreeNodeColorType.black,D.color=p.default.TreeNodeColorType.red;var q=D.rotateRight();D===n&&(n=q)}else if(u===E.rightChild){var q=E.rotateLeft();D===n&&(n=q),b(E)}}else if(E===D.rightChild){if(u===E.leftChild){var q=E.rotateRight();D===n&&(n=q),b(E)}else if(u===E.rightChild){E.color=p.default.TreeNodeColorType.black,D.color=p.default.TreeNodeColorType.red;var q=D.rotateLeft();D===n&&(n=q)}}}}};this.insert=function(u){if(u==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty()){++t,n.key=u,n.color=p.default.TreeNodeColorType.black;return}var E=o(n,u);E.key!==void 0&&r(E.key,u)===0||(++t,E.key=u,b(E),n.color=p.default.TreeNodeColorType.black)};var A=function(u,E){if(!(!u||u.key===void 0)){var m=r(E,u.key);return m<0?A(u.leftChild,E):m>0?A(u.rightChild,E):u}};this.find=function(u){var E=A(n,u);return E!==void 0&&E.key!==void 0&&r(E.key,u)===0};var P=function(u,E){if(!(!u||u.key===void 0)){var m=r(u.key,E);if(m===0)return u.key;if(m<0)return P(u.rightChild,E);var D=P(u.leftChild,E);return D!==void 0?D:u.key}};this.lowerBound=function(u){return P(n,u)};var B=function(u,E){if(!(!u||u.key===void 0)){var m=r(u.key,E);if(m<=0)return B(u.rightChild,E);var D=B(u.leftChild,E);return D!==void 0?D:u.key}};this.upperBound=function(u){return B(n,u)};var U=function(u,E){if(!(!u||u.key===void 0)){var m=r(u.key,E);if(m===0)return u.key;if(m>0)return U(u.leftChild,E);var D=U(u.rightChild,E);return D!==void 0?D:u.key}};this.reverseLowerBound=function(u){return U(n,u)};var L=function(u,E){if(!(!u||u.key===void 0)){var m=r(u.key,E);if(m>=0)return L(u.leftChild,E);var D=L(u.rightChild,E);return D!==void 0?D:u.key}};this.reverseUpperBound=function(u){return L(n,u)},this.union=function(u){var E=this;u.forEach(function(m){return E.insert(m)})},this.getHeight=function(){if(this.empty())return 0;var u=function(E){return E?Math.max(u(E.leftChild),u(E.rightChild))+1:1};return u(n)};var Q=function(u){return d(this,function(E){switch(E.label){case 0:return!u||u.key===void 0?[2]:[5,h(Q(u.leftChild))];case 1:return E.sent(),[4,u.key];case 2:return E.sent(),[5,h(Q(u.rightChild))];case 3:return E.sent(),[2]}})};this[Symbol.iterator]=function(){return Q(n)},i.forEach(function(u){return e.insert(u)}),Object.freeze(this)}Object.freeze(c),T.default=c},{"../Base/TreeNode":25}],34:[function(v,C,T){Object.defineProperty(T,"__esModule",{value:!0});function d(h){var p=this;h===void 0&&(h=[]);var c=0,i=[];this.size=function(){return c},this.empty=function(){return c===0},this.clear=function(){c=0,i.length=0},this.push=function(r){i.push(r),++c},this.pop=function(){i.pop(),c>0&&--c},this.top=function(){return i[c-1]},h.forEach(function(r){return p.push(r)}),Object.freeze(this)}Object.freeze(d),T.default=d},{}],35:[function(v,C,T){var d=this&&this.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,l,s,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(o){return function(b){return a([o,b])}}function a(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,l&&(s=o[0]&2?l.return:o[0]?l.throw||((s=l.return)&&s.call(l),0):l.next)&&!(s=s.call(l,o[1])).done)return s;switch(l=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,l=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){t.label=o[1];break}if(o[0]===6&&t.label<s[1]){t.label=s[1],s=o;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(o);break}s[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(r,t)}catch(b){o=[6,b],l=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},h=this&&this.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),l,s=[],g;try{for(;(e===void 0||e-- >0)&&!(l=n.next()).done;)s.push(l.value)}catch(y){g={error:y}}finally{try{l&&!l.done&&(t=n.return)&&t.call(n)}finally{if(g)throw g.error}}return s},p=this&&this.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,l=e.length,s;n<l;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},c=this&&this.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(T,"__esModule",{value:!0});function i(r){var e=this;r===void 0&&(r=[]);var t=0,n=[];this.size=function(){return t},this.empty=function(){return t===0},this.clear=function(){t=0,n.length=0},this.front=function(){if(!this.empty())return n[0]},this.back=function(){if(!this.empty())return n[t-1]},this.forEach=function(l){n.forEach(l)},this.getElementByPos=function(l){if(l<0||l>=t)throw new Error("pos must more than 0 and less than vector's size");return n[l]},this.eraseElementByPos=function(l){if(l<0||l>=t)throw new Error("pos must more than 0 and less than vector's size");for(var s=l;s<t-1;++s)n[s]=n[s+1];this.popBack()},this.eraseElementByValue=function(l){var s=[];this.forEach(function(y){y!==l&&s.push(y)}),s.forEach(function(y,a){n[a]=y});for(var g=s.length;t>g;)this.popBack()},this.pushBack=function(l){n.push(l),++t},this.popBack=function(){n.pop(),t>0&&--t},this.setElementByPos=function(l,s){if(l<0||l>=t)throw new Error("pos must more than 0 and less than vector's size");n[l]=s},this.insert=function(l,s,g){if(g===void 0&&(g=1),l<0||l>t)throw new Error("pos must more than 0 and less than or equal to vector's size");n.splice.apply(n,p([l,0],h(new Array(g).fill(s)),!1)),t+=g},this.find=function(l){return n.includes(l)},this.reverse=function(){n.reverse()},this.unique=function(){var l,s=[];this.forEach(function(y,a){(a===0||y!==l)&&(s.push(y),l=y)}),s.forEach(function(y,a){n[a]=y});for(var g=s.length;t>g;)this.popBack()},this.sort=function(l){n.sort(l)},this[Symbol.iterator]=function(){return(function(){return d(this,function(l){switch(l.label){case 0:return[5,c(n)];case 1:return[2,l.sent()]}})})()},r.forEach(function(l){return e.pushBack(l)}),Object.freeze(this)}Object.freeze(i),T.default=i},{}],36:[function(v,C,T){Object.defineProperty(T,"__esModule",{value:!0}),T.HashMap=T.HashSet=T.Map=T.Set=T.PriorityQueue=T.Deque=T.LinkList=T.Queue=T.Stack=T.Vector=void 0;var d=v("./Vector/Vector");T.Vector=d.default;var h=v("./Stack/Stack");T.Stack=h.default;var p=v("./Queue/Queue");T.Queue=p.default;var c=v("./LinkList/LinkList");T.LinkList=c.default;var i=v("./Deque/Deque");T.Deque=i.default;var r=v("./PriorityQueue/PriorityQueue");T.PriorityQueue=r.default;var e=v("./Set/Set");T.Set=e.default;var t=v("./Map/Map");T.Map=t.default;var n=v("./HashSet/HashSet");T.HashSet=n.default;var l=v("./HashMap/HashMap");T.HashMap=l.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(v,C,T){const d=v("yallist"),h=Symbol("max"),p=Symbol("length"),c=Symbol("lengthCalculator"),i=Symbol("allowStale"),r=Symbol("maxAge"),e=Symbol("dispose"),t=Symbol("noDisposeOnSet"),n=Symbol("lruList"),l=Symbol("cache"),s=Symbol("updateAgeOnGet"),g=()=>1;class y{constructor(L){if(typeof L=="number"&&(L={max:L}),L||(L={}),L.max&&(typeof L.max!="number"||L.max<0))throw new TypeError("max must be a non-negative number");this[h]=L.max||1/0;const Q=L.length||g;if(this[c]=typeof Q!="function"?g:Q,this[i]=L.stale||!1,L.maxAge&&typeof L.maxAge!="number")throw new TypeError("maxAge must be a number");this[r]=L.maxAge||0,this[e]=L.dispose,this[t]=L.noDisposeOnSet||!1,this[s]=L.updateAgeOnGet||!1,this.reset()}set max(L){if(typeof L!="number"||L<0)throw new TypeError("max must be a non-negative number");this[h]=L||1/0,b(this)}get max(){return this[h]}set allowStale(L){this[i]=!!L}get allowStale(){return this[i]}set maxAge(L){if(typeof L!="number")throw new TypeError("maxAge must be a non-negative number");this[r]=L,b(this)}get maxAge(){return this[r]}set lengthCalculator(L){typeof L!="function"&&(L=g),L!==this[c]&&(this[c]=L,this[p]=0,this[n].forEach(Q=>{Q.length=this[c](Q.value,Q.key),this[p]+=Q.length})),b(this)}get lengthCalculator(){return this[c]}get length(){return this[p]}get itemCount(){return this[n].length}rforEach(L,Q){Q=Q||this;for(let u=this[n].tail;u!==null;){const E=u.prev;B(this,L,u,Q),u=E}}forEach(L,Q){Q=Q||this;for(let u=this[n].head;u!==null;){const E=u.next;B(this,L,u,Q),u=E}}keys(){return this[n].toArray().map(L=>L.key)}values(){return this[n].toArray().map(L=>L.value)}reset(){this[e]&&this[n]&&this[n].length&&this[n].forEach(L=>this[e](L.key,L.value)),this[l]=new Map,this[n]=new d,this[p]=0}dump(){return this[n].map(L=>o(this,L)?!1:{k:L.key,v:L.value,e:L.now+(L.maxAge||0)}).toArray().filter(L=>L)}dumpLru(){return this[n]}set(L,Q,u){if(u=u||this[r],u&&typeof u!="number")throw new TypeError("maxAge must be a number");const E=u?Date.now():0,m=this[c](Q,L);if(this[l].has(L)){if(m>this[h])return A(this,this[l].get(L)),!1;const H=this[l].get(L).value;return this[e]&&(this[t]||this[e](L,H.value)),H.now=E,H.maxAge=u,H.value=Q,this[p]+=m-H.length,H.length=m,this.get(L),b(this),!0}const D=new P(L,Q,m,E,u);return D.length>this[h]?(this[e]&&this[e](L,Q),!1):(this[p]+=D.length,this[n].unshift(D),this[l].set(L,this[n].head),b(this),!0)}has(L){if(!this[l].has(L))return!1;const Q=this[l].get(L).value;return!o(this,Q)}get(L){return a(this,L,!0)}peek(L){return a(this,L,!1)}pop(){const L=this[n].tail;return L?(A(this,L),L.value):null}del(L){A(this,this[l].get(L))}load(L){this.reset();const Q=Date.now();for(let u=L.length-1;u>=0;u--){const E=L[u],m=E.e||0;if(m===0)this.set(E.k,E.v);else{const D=m-Q;D>0&&this.set(E.k,E.v,D)}}}prune(){this[l].forEach((L,Q)=>a(this,Q,!1))}}const a=(U,L,Q)=>{const u=U[l].get(L);if(u){const E=u.value;if(o(U,E)){if(A(U,u),!U[i])return}else Q&&(U[s]&&(u.value.now=Date.now()),U[n].unshiftNode(u));return E.value}},o=(U,L)=>{if(!L||!L.maxAge&&!U[r])return!1;const Q=Date.now()-L.now;return L.maxAge?Q>L.maxAge:U[r]&&Q>U[r]},b=U=>{if(U[p]>U[h])for(let L=U[n].tail;U[p]>U[h]&&L!==null;){const Q=L.prev;A(U,L),L=Q}},A=(U,L)=>{if(L){const Q=L.value;U[e]&&U[e](Q.key,Q.value),U[p]-=Q.length,U[l].delete(Q.key),U[n].removeNode(L)}};class P{constructor(L,Q,u,E,m){this.key=L,this.value=Q,this.length=u,this.now=E,this.maxAge=m||0}}const B=(U,L,Q,u)=>{let E=Q.value;o(U,E)&&(A(U,Q),U[i]||(E=void 0)),E&&L.call(u,E.value,E.key,U)};C.exports=y},{yallist:83}],38:[function(v,C,T){(function(d){(function(){const h=C.exports;h.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},h.codes={};for(const c in h.types){const i=h.types[c];h.codes[i]=c}h.CMD_SHIFT=4,h.CMD_MASK=240,h.DUP_MASK=8,h.QOS_MASK=3,h.QOS_SHIFT=1,h.RETAIN_MASK=1,h.VARBYTEINT_MASK=127,h.VARBYTEINT_FIN_MASK=128,h.VARBYTEINT_MAX=268435455,h.SESSIONPRESENT_MASK=1,h.SESSIONPRESENT_HEADER=d.from([h.SESSIONPRESENT_MASK]),h.CONNACK_HEADER=d.from([h.codes.connack<<h.CMD_SHIFT]),h.USERNAME_MASK=128,h.PASSWORD_MASK=64,h.WILL_RETAIN_MASK=32,h.WILL_QOS_MASK=24,h.WILL_QOS_SHIFT=3,h.WILL_FLAG_MASK=4,h.CLEAN_SESSION_MASK=2,h.CONNECT_HEADER=d.from([h.codes.connect<<h.CMD_SHIFT]),h.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},h.propertiesCodes={};for(const c in h.properties){const i=h.properties[c];h.propertiesCodes[i]=c}h.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function p(c){return[0,1,2].map(i=>[0,1].map(r=>[0,1].map(e=>{const t=d.alloc(1);return t.writeUInt8(h.codes[c]<<h.CMD_SHIFT|(r?h.DUP_MASK:0)|i<<h.QOS_SHIFT|e,0,!0),t})))}h.PUBLISH_HEADER=p("publish"),h.SUBSCRIBE_HEADER=p("subscribe"),h.SUBSCRIBE_OPTIONS_QOS_MASK=3,h.SUBSCRIBE_OPTIONS_NL_MASK=1,h.SUBSCRIBE_OPTIONS_NL_SHIFT=2,h.SUBSCRIBE_OPTIONS_RAP_MASK=1,h.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,h.SUBSCRIBE_OPTIONS_RH_MASK=3,h.SUBSCRIBE_OPTIONS_RH_SHIFT=4,h.SUBSCRIBE_OPTIONS_RH=[0,16,32],h.SUBSCRIBE_OPTIONS_NL=4,h.SUBSCRIBE_OPTIONS_RAP=8,h.SUBSCRIBE_OPTIONS_QOS=[0,1,2],h.UNSUBSCRIBE_HEADER=p("unsubscribe"),h.ACKS={unsuback:p("unsuback"),puback:p("puback"),pubcomp:p("pubcomp"),pubrel:p("pubrel"),pubrec:p("pubrec")},h.SUBACK_HEADER=d.from([h.codes.suback<<h.CMD_SHIFT]),h.VERSION3=d.from([3]),h.VERSION4=d.from([4]),h.VERSION5=d.from([5]),h.VERSION131=d.from([131]),h.VERSION132=d.from([132]),h.QOS=[0,1,2].map(c=>d.from([c])),h.EMPTY={pingreq:d.from([h.codes.pingreq<<4,0]),pingresp:d.from([h.codes.pingresp<<4,0]),disconnect:d.from([h.codes.disconnect<<4,0])}}).call(this)}).call(this,v("buffer").Buffer)},{buffer:17}],39:[function(v,C,T){(function(d){(function(){const h=v("./writeToStream"),p=v("events");function c(r,e){const t=new i;return h(r,t,e),t.concat()}class i extends p{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const t=new Array(this._array.length),n=this._array;let l=0,s;for(s=0;s<n.length&&n[s]!==void 0;s++)typeof n[s]!="string"?t[s]=n[s].length:t[s]=d.byteLength(n[s]),e+=t[s];const g=d.allocUnsafe(e);for(s=0;s<n.length&&n[s]!==void 0;s++)typeof n[s]!="string"?(n[s].copy(g,l),l+=t[s]):(g.write(n[s],l),l+=t[s]);return g}}C.exports=c}).call(this)}).call(this,v("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(v,C,T){T.parser=v("./parser").parser,T.generate=v("./generate"),T.writeToStream=v("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(v,C,T){(function(d){(function(){const p={},c=d.isBuffer(d.from([1,2]).subarray(0,1));function i(n){const l=d.allocUnsafe(2);return l.writeUInt8(n>>8,0),l.writeUInt8(n&255,1),l}function r(){for(let n=0;n<65536;n++)p[n]=i(n)}function e(n){let s=0,g=0;const y=d.allocUnsafe(4);do s=n%128|0,n=n/128|0,n>0&&(s=s|128),y.writeUInt8(s,g++);while(n>0&&g<4);return n>0&&(g=0),c?y.subarray(0,g):y.slice(0,g)}function t(n){const l=d.allocUnsafe(4);return l.writeUInt32BE(n,0),l}C.exports={cache:p,generateCache:r,generateNumber:i,genBufVariableByteInt:e,generate4ByteBuffer:t}}).call(this)}).call(this,v("buffer").Buffer)},{buffer:17}],42:[function(v,C,T){class d{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}C.exports=d},{}],43:[function(v,C,T){const d=v("bl"),h=v("events"),p=v("./packet"),c=v("./constants"),i=v("debug")("mqtt-packet:parser");class r extends h{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof r?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new r().parser(t)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new p,this.error=null,this._list=d(),this._stateCounter=0}parse(t){for(this.error&&this._resetState(),this._list.append(t),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const t=this._list.readUInt8(0);return this.packet.cmd=c.types[t>>c.CMD_SHIFT],this.packet.retain=(t&c.RETAIN_MASK)!==0,this.packet.qos=t>>c.QOS_SHIFT&c.QOS_MASK,this.packet.dup=(t&c.DUP_MASK)!==0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),i("_parseLength %d",t.value),!!t}_parsePayload(){i("_parsePayload: payload %O",this._list);let t=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}t=!0}return i("_parsePayload complete result: %s",t),t}_parseConnect(){i("_parseConnect");let t,n,l,s;const g={},y=this.packet,a=this._parseString();if(a===null)return this._emitError(new Error("Cannot parse protocolId"));if(a!=="MQTT"&&a!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=a,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(g.username=this._list.readUInt8(this._pos)&c.USERNAME_MASK,g.password=this._list.readUInt8(this._pos)&c.PASSWORD_MASK,g.will=this._list.readUInt8(this._pos)&c.WILL_FLAG_MASK,g.will&&(y.will={},y.will.retain=(this._list.readUInt8(this._pos)&c.WILL_RETAIN_MASK)!==0,y.will.qos=(this._list.readUInt8(this._pos)&c.WILL_QOS_MASK)>>c.WILL_QOS_SHIFT),y.clean=(this._list.readUInt8(this._pos)&c.CLEAN_SESSION_MASK)!==0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(y.properties=b)}const o=this._parseString();if(o===null)return this._emitError(new Error("Packet too short"));if(y.clientId=o,i("_parseConnect: packet.clientId: %s",y.clientId),g.will){if(y.protocolVersion===5){const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(y.will.properties=b)}if(t=this._parseString(),t===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=t,i("_parseConnect: packet.will.topic: %s",y.will.topic),n=this._parseBuffer(),n===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=n,i("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(g.username){if(s=this._parseString(),s===null)return this._emitError(new Error("Cannot parse username"));y.username=s,i("_parseConnect: packet.username: %s",y.username)}if(g.password){if(l=this._parseBuffer(),l===null)return this._emitError(new Error("Cannot parse password"));y.password=l}return this.settings=y,i("_parseConnect: complete"),y}_parseConnack(){i("_parseConnack");const t=this.packet;if(this._list.length<1)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&c.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?t.reasonCode=this._list.readUInt8(this._pos++):t.reasonCode=0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(t.returnCode===-1||t.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(t.properties=n)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");const t=this.packet;if(t.topic=this._parseString(),t.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(t.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(t.properties=n)}t.payload=this._list.slice(this._pos,t.length),i("_parsePublish: payload from buffer list: %o",t.payload)}}_parseSubscribe(){i("_parseSubscribe");const t=this.packet;let n,l,s,g,y,a,o;if(t.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(t.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(t.properties=b)}for(;this._pos<t.length;){if(n=this._parseString(),n===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=t.length)return this._emitError(new Error("Malformed Subscribe Payload"));l=this._parseByte(),s=l&c.SUBSCRIBE_OPTIONS_QOS_MASK,a=(l>>c.SUBSCRIBE_OPTIONS_NL_SHIFT&c.SUBSCRIBE_OPTIONS_NL_MASK)!==0,y=(l>>c.SUBSCRIBE_OPTIONS_RAP_SHIFT&c.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,g=l>>c.SUBSCRIBE_OPTIONS_RH_SHIFT&c.SUBSCRIBE_OPTIONS_RH_MASK,o={topic:n,qos:s},this.settings.protocolVersion===5?(o.nl=a,o.rap=y,o.rh=g):this.settings.bridgeMode&&(o.rh=0,o.rap=!0,o.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",o),t.subscriptions.push(o)}}}_parseSuback(){i("_parseSuback");const t=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(t.properties=n)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){i("_parseUnsubscribe");const t=this.packet;if(t.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(t.properties=n)}for(;this._pos<t.length;){const n=this._parseString();if(n===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",n),t.unsubscriptions.push(n)}}}_parseUnsuback(){i("_parseUnsuback");const t=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const n=this._parseProperties();for(Object.getOwnPropertyNames(n).length&&(t.properties=n),t.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const t=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(t.length>2?(t.reasonCode=this._parseByte(),i("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)):t.reasonCode=0,t.length>3)){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(t.properties=n)}return!0}_parseDisconnect(){const t=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?t.reasonCode=this._parseByte():t.reasonCode=0;const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(t.properties=n)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");const t=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));t.reasonCode=this._parseByte();const n=this._parseProperties();return Object.getOwnPropertyNames(n).length&&(t.properties=n),i("_parseAuth: result: true"),!0}_parseMessageId(){const t=this.packet;return t.messageId=this._parseNum(),t.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",t.messageId),!0)}_parseString(t){const n=this._parseNum(),l=n+this._pos;if(n===-1||l>this._list.length||l>this.packet.length)return null;const s=this._list.toString("utf8",this._pos,l);return this._pos+=n,i("_parseString: result: %s",s),s}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const t=this._parseNum(),n=t+this._pos;if(t===-1||n>this._list.length||n>this.packet.length)return null;const l=this._list.slice(this._pos,n);return this._pos+=t,i("_parseBuffer: result: %o",l),l}_parseNum(){if(this._list.length-this._pos<2)return-1;const t=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",t),t}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const t=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",t),t}_parseVarByteNum(t){i("_parseVarByteNum");const n=4;let l=0,s=1,g=0,y=!1,a;const o=this._pos?this._pos:0;for(;l<n&&o+l<this._list.length;){if(a=this._list.readUInt8(o+l++),g+=s*(a&c.VARBYTEINT_MASK),s*=128,(a&c.VARBYTEINT_FIN_MASK)===0){y=!0;break}if(this._list.length<=l)break}return!y&&l===n&&this._list.length>=l&&this._emitError(new Error("Invalid variable byte integer")),o&&(this._pos+=l),y=y?t?{bytes:l,value:g}:g:!1,i("_parseVarByteNum: result: %o",y),y}_parseByte(){let t;return this._pos<this._list.length&&(t=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",t),t}_parseByType(t){switch(i("_parseByType: type: %s",t),t){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");const t=this._parseVarByteNum(),l=this._pos+t,s={};for(;this._pos<l;){const g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;const y=c.propertiesCodes[g];if(!y)return this._emitError(new Error("Unknown property")),!1;if(y==="userProperties"){s[y]||(s[y]=Object.create(null));const a=this._parseByType(c.propertiesTypes[y]);if(s[y][a.name])if(Array.isArray(s[y][a.name]))s[y][a.name].push(a.value);else{const o=s[y][a.name];s[y][a.name]=[o],s[y][a.name].push(a.value)}else s[y][a.name]=a.value;continue}s[y]?Array.isArray(s[y])?s[y].push(this._parseByType(c.propertiesTypes[y])):(s[y]=[s[y]],s[y].push(this._parseByType(c.propertiesTypes[y]))):s[y]=this._parseByType(c.propertiesTypes[y])}return s}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new p,this._pos=0,!0}_emitError(t){i("_emitError"),this.error=t,this.emit("error",t)}}C.exports=r},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(v,C,T){(function(d){(function(){const h=v("./constants"),p=d.allocUnsafe(0),c=d.from([0]),i=v("./numbers"),r=v("process-nextick-args").nextTick,e=v("debug")("mqtt-packet:writeToStream"),t=i.cache,n=i.generateNumber,l=i.generateCache,s=i.genBufVariableByteInt,g=i.generate4ByteBuffer;let y=W,a=!0;function o(Y,F,ee){switch(e("generate called"),F.cork&&(F.cork(),r(b,F)),a&&(a=!1,l()),e("generate: packet.cmd: %s",Y.cmd),Y.cmd){case"connect":return A(Y,F);case"connack":return P(Y,F,ee);case"publish":return B(Y,F,ee);case"puback":case"pubrec":case"pubrel":case"pubcomp":return U(Y,F,ee);case"subscribe":return L(Y,F,ee);case"suback":return Q(Y,F,ee);case"unsubscribe":return u(Y,F,ee);case"unsuback":return E(Y,F,ee);case"pingreq":case"pingresp":return m(Y,F);case"disconnect":return D(Y,F,ee);case"auth":return q(Y,F,ee);default:return F.emit("error",new Error("Unknown command")),!1}}Object.defineProperty(o,"cacheNumbers",{get(){return y===W},set(Y){Y?((!t||Object.keys(t).length===0)&&(a=!0),y=W):(a=!1,y=se)}});function b(Y){Y.uncork()}function A(Y,F,ee){const j=Y||{},N=j.protocolId||"MQTT";let $=j.protocolVersion||4;const G=j.will;let Z=j.clean;const I=j.keepalive||0,O=j.clientId||"",S=j.username,f=j.password,_=j.properties;Z===void 0&&(Z=!0);let R=0;if(typeof N!="string"&&!d.isBuffer(N))return F.emit("error",new Error("Invalid protocolId")),!1;if(R+=N.length+2,$!==3&&$!==4&&$!==5)return F.emit("error",new Error("Invalid protocol version")),!1;if(R+=1,(typeof O=="string"||d.isBuffer(O))&&(O||$>=4)&&(O||Z))R+=d.byteLength(O)+2;else{if($<4)return F.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(Z*1===0)return F.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof I!="number"||I<0||I>65535||I%1!==0)return F.emit("error",new Error("Invalid keepalive")),!1;if(R+=2,R+=1,$===5){var V=K(F,_);if(!V)return!1;R+=V.length}if(G){if(typeof G!="object")return F.emit("error",new Error("Invalid will")),!1;if(!G.topic||typeof G.topic!="string")return F.emit("error",new Error("Invalid will topic")),!1;if(R+=d.byteLength(G.topic)+2,R+=2,G.payload)if(G.payload.length>=0)typeof G.payload=="string"?R+=d.byteLength(G.payload):R+=G.payload.length;else return F.emit("error",new Error("Invalid will payload")),!1;var re={};if($===5){if(re=K(F,G.properties),!re)return!1;R+=re.length}}let ne=!1;if(S!=null)if(ie(S))ne=!0,R+=d.byteLength(S)+2;else return F.emit("error",new Error("Invalid username")),!1;if(f!=null){if(!ne)return F.emit("error",new Error("Username is required to use password")),!1;if(ie(f))R+=le(f)+2;else return F.emit("error",new Error("Invalid password")),!1}F.write(h.CONNECT_HEADER),M(F,R),te(F,N),j.bridgeMode&&($+=128),F.write($===131?h.VERSION131:$===132?h.VERSION132:$===4?h.VERSION4:$===5?h.VERSION5:h.VERSION3);let ue=0;return ue|=S!=null?h.USERNAME_MASK:0,ue|=f!=null?h.PASSWORD_MASK:0,ue|=G&&G.retain?h.WILL_RETAIN_MASK:0,ue|=G&&G.qos?G.qos<<h.WILL_QOS_SHIFT:0,ue|=G?h.WILL_FLAG_MASK:0,ue|=Z?h.CLEAN_SESSION_MASK:0,F.write(d.from([ue])),y(F,I),$===5&&V.write(),te(F,O),G&&($===5&&re.write(),x(F,G.topic),te(F,G.payload)),S!=null&&te(F,S),f!=null&&te(F,f),!0}function P(Y,F,ee){const j=ee?ee.protocolVersion:4,N=Y||{},$=j===5?N.reasonCode:N.returnCode,G=N.properties;let Z=2;if(typeof $!="number")return F.emit("error",new Error("Invalid return code")),!1;let I=null;if(j===5){if(I=K(F,G),!I)return!1;Z+=I.length}return F.write(h.CONNACK_HEADER),M(F,Z),F.write(N.sessionPresent?h.SESSIONPRESENT_HEADER:c),F.write(d.from([$])),I!=null&&I.write(),!0}function B(Y,F,ee){e("publish: packet: %o",Y);const j=ee?ee.protocolVersion:4,N=Y||{},$=N.qos||0,G=N.retain?h.RETAIN_MASK:0,Z=N.topic,I=N.payload||p,O=N.messageId,S=N.properties;let f=0;if(typeof Z=="string")f+=d.byteLength(Z)+2;else if(d.isBuffer(Z))f+=Z.length+2;else return F.emit("error",new Error("Invalid topic")),!1;if(d.isBuffer(I)?f+=I.length:f+=d.byteLength(I),$&&typeof O!="number")return F.emit("error",new Error("Invalid messageId")),!1;$&&(f+=2);let _=null;if(j===5){if(_=K(F,S),!_)return!1;f+=_.length}return F.write(h.PUBLISH_HEADER[$][N.dup?1:0][G?1:0]),M(F,f),y(F,le(Z)),F.write(Z),$>0&&y(F,O),_!=null&&_.write(),e("publish: payload: %o",I),F.write(I)}function U(Y,F,ee){const j=ee?ee.protocolVersion:4,N=Y||{},$=N.cmd||"puback",G=N.messageId,Z=N.dup&&$==="pubrel"?h.DUP_MASK:0;let I=0;const O=N.reasonCode,S=N.properties;let f=j===5?3:2;if($==="pubrel"&&(I=1),typeof G!="number")return F.emit("error",new Error("Invalid messageId")),!1;let _=null;if(j===5&&typeof S=="object"){if(_=X(F,S,ee,f),!_)return!1;f+=_.length}return F.write(h.ACKS[$][I][Z][0]),M(F,f),y(F,G),j===5&&F.write(d.from([O])),_!==null&&_.write(),!0}function L(Y,F,ee){e("subscribe: packet: ");const j=ee?ee.protocolVersion:4,N=Y||{},$=N.dup?h.DUP_MASK:0,G=N.messageId,Z=N.subscriptions,I=N.properties;let O=0;if(typeof G!="number")return F.emit("error",new Error("Invalid messageId")),!1;O+=2;let S=null;if(j===5){if(S=K(F,I),!S)return!1;O+=S.length}if(typeof Z=="object"&&Z.length)for(let _=0;_<Z.length;_+=1){const R=Z[_].topic,V=Z[_].qos;if(typeof R!="string")return F.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof V!="number")return F.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(j===5){if(typeof(Z[_].nl||!1)!="boolean")return F.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(Z[_].rap||!1)!="boolean")return F.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ue=Z[_].rh||0;if(typeof ue!="number"||ue>2)return F.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}O+=d.byteLength(R)+2+1}else return F.emit("error",new Error("Invalid subscriptions")),!1;e("subscribe: writing to stream: %o",h.SUBSCRIBE_HEADER),F.write(h.SUBSCRIBE_HEADER[1][$?1:0][0]),M(F,O),y(F,G),S!==null&&S.write();let f=!0;for(const _ of Z){const R=_.topic,V=_.qos,re=+_.nl,ne=+_.rap,ue=_.rh;let he;x(F,R),he=h.SUBSCRIBE_OPTIONS_QOS[V],j===5&&(he|=re?h.SUBSCRIBE_OPTIONS_NL:0,he|=ne?h.SUBSCRIBE_OPTIONS_RAP:0,he|=ue?h.SUBSCRIBE_OPTIONS_RH[ue]:0),f=F.write(d.from([he]))}return f}function Q(Y,F,ee){const j=ee?ee.protocolVersion:4,N=Y||{},$=N.messageId,G=N.granted,Z=N.properties;let I=0;if(typeof $!="number")return F.emit("error",new Error("Invalid messageId")),!1;if(I+=2,typeof G=="object"&&G.length)for(let S=0;S<G.length;S+=1){if(typeof G[S]!="number")return F.emit("error",new Error("Invalid qos vector")),!1;I+=1}else return F.emit("error",new Error("Invalid qos vector")),!1;let O=null;if(j===5){if(O=X(F,Z,ee,I),!O)return!1;I+=O.length}return F.write(h.SUBACK_HEADER),M(F,I),y(F,$),O!==null&&O.write(),F.write(d.from(G))}function u(Y,F,ee){const j=ee?ee.protocolVersion:4,N=Y||{},$=N.messageId,G=N.dup?h.DUP_MASK:0,Z=N.unsubscriptions,I=N.properties;let O=0;if(typeof $!="number")return F.emit("error",new Error("Invalid messageId")),!1;if(O+=2,typeof Z=="object"&&Z.length)for(let _=0;_<Z.length;_+=1){if(typeof Z[_]!="string")return F.emit("error",new Error("Invalid unsubscriptions")),!1;O+=d.byteLength(Z[_])+2}else return F.emit("error",new Error("Invalid unsubscriptions")),!1;let S=null;if(j===5){if(S=K(F,I),!S)return!1;O+=S.length}F.write(h.UNSUBSCRIBE_HEADER[1][G?1:0][0]),M(F,O),y(F,$),S!==null&&S.write();let f=!0;for(let _=0;_<Z.length;_++)f=x(F,Z[_]);return f}function E(Y,F,ee){const j=ee?ee.protocolVersion:4,N=Y||{},$=N.messageId,G=N.dup?h.DUP_MASK:0,Z=N.granted,I=N.properties,O=N.cmd,S=0;let f=2;if(typeof $!="number")return F.emit("error",new Error("Invalid messageId")),!1;if(j===5)if(typeof Z=="object"&&Z.length)for(let R=0;R<Z.length;R+=1){if(typeof Z[R]!="number")return F.emit("error",new Error("Invalid qos vector")),!1;f+=1}else return F.emit("error",new Error("Invalid qos vector")),!1;let _=null;if(j===5){if(_=X(F,I,ee,f),!_)return!1;f+=_.length}return F.write(h.ACKS[O][S][G][0]),M(F,f),y(F,$),_!==null&&_.write(),j===5&&F.write(d.from(Z)),!0}function m(Y,F,ee){return F.write(h.EMPTY[Y.cmd])}function D(Y,F,ee){const j=ee?ee.protocolVersion:4,N=Y||{},$=N.reasonCode,G=N.properties;let Z=j===5?1:0,I=null;if(j===5){if(I=X(F,G,ee,Z),!I)return!1;Z+=I.length}return F.write(d.from([h.codes.disconnect<<4])),M(F,Z),j===5&&F.write(d.from([$])),I!==null&&I.write(),!0}function q(Y,F,ee){const j=ee?ee.protocolVersion:4,N=Y||{},$=N.reasonCode,G=N.properties;let Z=j===5?1:0;j!==5&&F.emit("error",new Error("Invalid mqtt version for auth packet"));const I=X(F,G,ee,Z);return I?(Z+=I.length,F.write(d.from([h.codes.auth<<4])),M(F,Z),F.write(d.from([$])),I!==null&&I.write(),!0):!1}const H={};function M(Y,F){if(F>h.VARBYTEINT_MAX)return Y.emit("error",new Error(`Invalid variable byte integer: ${F}`)),!1;let ee=H[F];return ee||(ee=s(F),F<16384&&(H[F]=ee)),e("writeVarByteInt: writing to stream: %o",ee),Y.write(ee)}function x(Y,F){const ee=d.byteLength(F);return y(Y,ee),e("writeString: %s",F),Y.write(F,"utf8")}function z(Y,F,ee){x(Y,F),x(Y,ee)}function W(Y,F){return e("writeNumberCached: number: %d",F),e("writeNumberCached: %o",t[F]),Y.write(t[F])}function se(Y,F){const ee=n(F);return e("writeNumberGenerated: %o",ee),Y.write(ee)}function oe(Y,F){const ee=g(F);return e("write4ByteNumber: %o",ee),Y.write(ee)}function te(Y,F){typeof F=="string"?x(Y,F):F?(y(Y,F.length),Y.write(F)):y(Y,0)}function K(Y,F){if(typeof F!="object"||F.length!=null)return{length:1,write(){ae(Y,{},0)}};let ee=0;function j($,G){const Z=h.propertiesTypes[$];let I=0;switch(Z){case"byte":{if(typeof G!="boolean")return Y.emit("error",new Error(`Invalid ${$}: ${G}`)),!1;I+=2;break}case"int8":{if(typeof G!="number"||G<0||G>255)return Y.emit("error",new Error(`Invalid ${$}: ${G}`)),!1;I+=2;break}case"binary":{if(G&&G===null)return Y.emit("error",new Error(`Invalid ${$}: ${G}`)),!1;I+=1+d.byteLength(G)+2;break}case"int16":{if(typeof G!="number"||G<0||G>65535)return Y.emit("error",new Error(`Invalid ${$}: ${G}`)),!1;I+=3;break}case"int32":{if(typeof G!="number"||G<0||G>4294967295)return Y.emit("error",new Error(`Invalid ${$}: ${G}`)),!1;I+=5;break}case"var":{if(typeof G!="number"||G<0||G>268435455)return Y.emit("error",new Error(`Invalid ${$}: ${G}`)),!1;I+=1+d.byteLength(s(G));break}case"string":{if(typeof G!="string")return Y.emit("error",new Error(`Invalid ${$}: ${G}`)),!1;I+=3+d.byteLength(G.toString());break}case"pair":{if(typeof G!="object")return Y.emit("error",new Error(`Invalid ${$}: ${G}`)),!1;I+=Object.getOwnPropertyNames(G).reduce((O,S)=>{const f=G[S];return Array.isArray(f)?O+=f.reduce((_,R)=>(_+=3+d.byteLength(S.toString())+2+d.byteLength(R.toString()),_),0):O+=3+d.byteLength(S.toString())+2+d.byteLength(G[S].toString()),O},0);break}default:return Y.emit("error",new Error(`Invalid property ${$}: ${G}`)),!1}return I}if(F)for(const $ in F){let G=0,Z=0;const I=F[$];if(Array.isArray(I))for(let O=0;O<I.length;O++){if(Z=j($,I[O]),!Z)return!1;G+=Z}else{if(Z=j($,I),!Z)return!1;G=Z}if(!G)return!1;ee+=G}return{length:d.byteLength(s(ee))+ee,write(){ae(Y,F,ee)}}}function X(Y,F,ee,j){const N=["reasonString","userProperties"],$=ee&&ee.properties&&ee.properties.maximumPacketSize?ee.properties.maximumPacketSize:0;let G=K(Y,F);if($)for(;j+G.length>$;){const Z=N.shift();if(Z&&F[Z])delete F[Z],G=K(Y,F);else return!1}return G}function J(Y,F,ee){switch(h.propertiesTypes[F]){case"byte":{Y.write(d.from([h.properties[F]])),Y.write(d.from([+ee]));break}case"int8":{Y.write(d.from([h.properties[F]])),Y.write(d.from([ee]));break}case"binary":{Y.write(d.from([h.properties[F]])),te(Y,ee);break}case"int16":{Y.write(d.from([h.properties[F]])),y(Y,ee);break}case"int32":{Y.write(d.from([h.properties[F]])),oe(Y,ee);break}case"var":{Y.write(d.from([h.properties[F]])),M(Y,ee);break}case"string":{Y.write(d.from([h.properties[F]])),x(Y,ee);break}case"pair":{Object.getOwnPropertyNames(ee).forEach(N=>{const $=ee[N];Array.isArray($)?$.forEach(G=>{Y.write(d.from([h.properties[F]])),z(Y,N.toString(),G.toString())}):(Y.write(d.from([h.properties[F]])),z(Y,N.toString(),$.toString()))});break}default:return Y.emit("error",new Error(`Invalid property ${F} value: ${ee}`)),!1}}function ae(Y,F,ee){M(Y,ee);for(const j in F)if(Object.prototype.hasOwnProperty.call(F,j)&&F[j]!==null){const N=F[j];if(Array.isArray(N))for(let $=0;$<N.length;$++)J(Y,j,N[$]);else J(Y,j,N)}}function le(Y){return Y?Y instanceof d?Y.length:d.byteLength(Y):0}function ie(Y){return typeof Y=="string"||Y instanceof d}C.exports=o}).call(this)}).call(this,v("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(v,C,T){var d=1e3,h=d*60,p=h*60,c=p*24,i=c*7,r=c*365.25;C.exports=function(s,g){g=g||{};var y=typeof s;if(y==="string"&&s.length>0)return e(s);if(y==="number"&&isFinite(s))return g.long?n(s):t(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};function e(s){if(s=String(s),!(s.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(g){var y=parseFloat(g[1]),a=(g[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return y*r;case"weeks":case"week":case"w":return y*i;case"days":case"day":case"d":return y*c;case"hours":case"hour":case"hrs":case"hr":case"h":return y*p;case"minutes":case"minute":case"mins":case"min":case"m":return y*h;case"seconds":case"second":case"secs":case"sec":case"s":return y*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function t(s){var g=Math.abs(s);return g>=c?Math.round(s/c)+"d":g>=p?Math.round(s/p)+"h":g>=h?Math.round(s/h)+"m":g>=d?Math.round(s/d)+"s":s+"ms"}function n(s){var g=Math.abs(s);return g>=c?l(s,g,c,"day"):g>=p?l(s,g,p,"hour"):g>=h?l(s,g,h,"minute"):g>=d?l(s,g,d,"second"):s+" ms"}function l(s,g,y,a){var o=g>=y*1.5;return Math.round(s/y)+" "+a+(o?"s":"")}},{}],46:[function(v,C,T){const d=v("./lib/number-allocator.js");C.exports.NumberAllocator=d},{"./lib/number-allocator.js":47}],47:[function(v,C,T){const d=v("js-sdsl").Set,h=v("debug")("number-allocator:trace"),p=v("debug")("number-allocator:error");function c(r,e){this.low=r,this.high=e}c.prototype.equals=function(r){return this.low===r.low&&this.high===r.high},c.prototype.compare=function(r){return this.low<r.low&&this.high<r.low?-1:r.low<this.low&&r.high<this.low?1:0};function i(r,e){if(!(this instanceof i))return new i(r,e);this.min=r,this.max=e,this.ss=new d([],(t,n)=>t.compare(n)),h("Create"),this.clear()}i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return h("alloc():empty"),null;const r=this.ss.front(),e=r.low;return e+1<=r.high?++r.low:this.ss.eraseElementByPos(0),h("alloc():"+e),e},i.prototype.use=function(r){const e=new c(r,r),t=this.ss.lowerBound(e);if(t){if(t.equals(e))return this.ss.eraseElementByValue(t),h("use():"+r),!0;if(t.low>r)return!1;if(t.low===r)return++t.low,h("use():"+r),!0;if(t.high===r)return--t.high,h("use():"+r),!0;const n=t.low;return t.low=r+1,this.ss.insert(new c(n,r-1)),h("use():"+r),!0}return h("use():failed"),!1},i.prototype.free=function(r){if(r<this.min||r>this.max){p("free():"+r+" is out of range");return}const e=new c(r,r),t=this.ss.lowerBound(e);if(t){if(t.low<=r&&r<=t.high){p("free():"+r+" has already been vacant");return}if(t===this.ss.front())r+1===t.low?--t.low:this.ss.insert(e);else{const n=this.ss.reverseLowerBound(e);n.high+1===r?r+1===t.low?(this.ss.eraseElementByValue(n),t.low=n.low):n.high=r:r+1===t.low?t.low=r:this.ss.insert(e)}}else{if(t===this.ss.front()){this.ss.insert(e);return}const n=this.ss.reverseLowerBound(e);n.high+1===r?n.high=r:this.ss.insert(e)}h("free():"+r)},i.prototype.clear=function(){h("clear()"),this.ss.clear(),this.ss.insert(new c(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(const r of this.ss)console.log(r)},C.exports=i},{debug:18,"js-sdsl":36}],48:[function(v,C,T){var d=v("wrappy");C.exports=d(h),C.exports.strict=d(p),h.proto=h(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return h(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return p(this)},configurable:!0})});function h(c){var i=function(){return i.called?i.value:(i.called=!0,i.value=c.apply(this,arguments))};return i.called=!1,i}function p(c){var i=function(){if(i.called)throw new Error(i.onceError);return i.called=!0,i.value=c.apply(this,arguments)},r=c.name||"Function wrapped with `once`";return i.onceError=r+" shouldn't be called more than once",i.called=!1,i}},{wrappy:79}],49:[function(v,C,T){(function(d){(function(){typeof d>"u"||!d.version||d.version.indexOf("v0.")===0||d.version.indexOf("v1.")===0&&d.version.indexOf("v1.8.")!==0?C.exports={nextTick:h}:C.exports=d;function h(p,c,i,r){if(typeof p!="function")throw new TypeError('"callback" argument must be a function');var e=arguments.length,t,n;switch(e){case 0:case 1:return d.nextTick(p);case 2:return d.nextTick(function(){p.call(null,c)});case 3:return d.nextTick(function(){p.call(null,c,i)});case 4:return d.nextTick(function(){p.call(null,c,i,r)});default:for(t=new Array(e-1),n=0;n<t.length;)t[n++]=arguments[n];return d.nextTick(function(){p.apply(null,t)})}}}).call(this)}).call(this,v("_process"))},{_process:50}],50:[function(v,C,T){var d=C.exports={},h,p;function c(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?h=setTimeout:h=c}catch{h=c}try{typeof clearTimeout=="function"?p=clearTimeout:p=i}catch{p=i}})();function r(b){if(h===setTimeout)return setTimeout(b,0);if((h===c||!h)&&setTimeout)return h=setTimeout,setTimeout(b,0);try{return h(b,0)}catch{try{return h.call(null,b,0)}catch{return h.call(this,b,0)}}}function e(b){if(p===clearTimeout)return clearTimeout(b);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(b);try{return p(b)}catch{try{return p.call(null,b)}catch{return p.call(this,b)}}}var t=[],n=!1,l,s=-1;function g(){!n||!l||(n=!1,l.length?t=l.concat(t):s=-1,t.length&&y())}function y(){if(!n){var b=r(g);n=!0;for(var A=t.length;A;){for(l=t,t=[];++s<A;)l&&l[s].run();s=-1,A=t.length}l=null,n=!1,e(b)}}d.nextTick=function(b){var A=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)A[P-1]=arguments[P];t.push(new a(b,A)),t.length===1&&!n&&r(y)};function a(b,A){this.fun=b,this.array=A}a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={};function o(){}d.on=o,d.addListener=o,d.once=o,d.off=o,d.removeListener=o,d.removeAllListeners=o,d.emit=o,d.prependListener=o,d.prependOnceListener=o,d.listeners=function(b){return[]},d.binding=function(b){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(b){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],51:[function(v,C,T){(function(d){(function(){(function(h){var p=typeof T=="object"&&T&&!T.nodeType&&T,c=typeof C=="object"&&C&&!C.nodeType&&C,i=typeof d=="object"&&d;(i.global===i||i.window===i||i.self===i)&&(h=i);var r,e=2147483647,t=36,n=1,l=26,s=38,g=700,y=72,a=128,o="-",b=/^xn--/,A=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=t-n,L=Math.floor,Q=String.fromCharCode,u;function E(K){throw new RangeError(B[K])}function m(K,X){for(var J=K.length,ae=[];J--;)ae[J]=X(K[J]);return ae}function D(K,X){var J=K.split("@"),ae="";J.length>1&&(ae=J[0]+"@",K=J[1]),K=K.replace(P,".");var le=K.split("."),ie=m(le,X).join(".");return ae+ie}function q(K){for(var X=[],J=0,ae=K.length,le,ie;J<ae;)le=K.charCodeAt(J++),le>=55296&&le<=56319&&J<ae?(ie=K.charCodeAt(J++),(ie&64512)==56320?X.push(((le&1023)<<10)+(ie&1023)+65536):(X.push(le),J--)):X.push(le);return X}function H(K){return m(K,function(X){var J="";return X>65535&&(X-=65536,J+=Q(X>>>10&1023|55296),X=56320|X&1023),J+=Q(X),J}).join("")}function M(K){return K-48<10?K-22:K-65<26?K-65:K-97<26?K-97:t}function x(K,X){return K+22+75*(K<26)-((X!=0)<<5)}function z(K,X,J){var ae=0;for(K=J?L(K/g):K>>1,K+=L(K/X);K>U*l>>1;ae+=t)K=L(K/U);return L(ae+(U+1)*K/(K+s))}function W(K){var X=[],J=K.length,ae,le=0,ie=a,Y=y,F,ee,j,N,$,G,Z,I,O;for(F=K.lastIndexOf(o),F<0&&(F=0),ee=0;ee<F;++ee)K.charCodeAt(ee)>=128&&E("not-basic"),X.push(K.charCodeAt(ee));for(j=F>0?F+1:0;j<J;){for(N=le,$=1,G=t;j>=J&&E("invalid-input"),Z=M(K.charCodeAt(j++)),(Z>=t||Z>L((e-le)/$))&&E("overflow"),le+=Z*$,I=G<=Y?n:G>=Y+l?l:G-Y,!(Z<I);G+=t)O=t-I,$>L(e/O)&&E("overflow"),$*=O;ae=X.length+1,Y=z(le-N,ae,N==0),L(le/ae)>e-ie&&E("overflow"),ie+=L(le/ae),le%=ae,X.splice(le++,0,ie)}return H(X)}function se(K){var X,J,ae,le,ie,Y,F,ee,j,N,$,G=[],Z,I,O,S;for(K=q(K),Z=K.length,X=a,J=0,ie=y,Y=0;Y<Z;++Y)$=K[Y],$<128&&G.push(Q($));for(ae=le=G.length,le&&G.push(o);ae<Z;){for(F=e,Y=0;Y<Z;++Y)$=K[Y],$>=X&&$<F&&(F=$);for(I=ae+1,F-X>L((e-J)/I)&&E("overflow"),J+=(F-X)*I,X=F,Y=0;Y<Z;++Y)if($=K[Y],$<X&&++J>e&&E("overflow"),$==X){for(ee=J,j=t;N=j<=ie?n:j>=ie+l?l:j-ie,!(ee<N);j+=t)S=ee-N,O=t-N,G.push(Q(x(N+S%O,0))),ee=L(S/O);G.push(Q(x(ee,0))),ie=z(J,I,ae==le),J=0,++ae}++J,++X}return G.join("")}function oe(K){return D(K,function(X){return b.test(X)?W(X.slice(4).toLowerCase()):X})}function te(K){return D(K,function(X){return A.test(X)?"xn--"+se(X):X})}if(r={version:"1.4.1",ucs2:{decode:q,encode:H},decode:W,encode:se,toASCII:te,toUnicode:oe},p&&c)if(C.exports==p)c.exports=r;else for(u in r)r.hasOwnProperty(u)&&(p[u]=r[u]);else h.punycode=r})(this)}).call(this)}).call(this,typeof ge<"u"?ge:typeof self<"u"?self:typeof window<"u"?window:{})},{}],52:[function(v,C,T){function d(p,c){return Object.prototype.hasOwnProperty.call(p,c)}C.exports=function(p,c,i,r){c=c||"&",i=i||"=";var e={};if(typeof p!="string"||p.length===0)return e;var t=/\+/g;p=p.split(c);var n=1e3;r&&typeof r.maxKeys=="number"&&(n=r.maxKeys);var l=p.length;n>0&&l>n&&(l=n);for(var s=0;s<l;++s){var g=p[s].replace(t,"%20"),y=g.indexOf(i),a,o,b,A;y>=0?(a=g.substr(0,y),o=g.substr(y+1)):(a=g,o=""),b=decodeURIComponent(a),A=decodeURIComponent(o),d(e,b)?h(e[b])?e[b].push(A):e[b]=[e[b],A]:e[b]=A}return e};var h=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"}},{}],53:[function(v,C,T){var d=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};C.exports=function(i,r,e,t){return r=r||"&",e=e||"=",i===null&&(i=void 0),typeof i=="object"?p(c(i),function(n){var l=encodeURIComponent(d(n))+e;return h(i[n])?p(i[n],function(s){return l+encodeURIComponent(d(s))}).join(r):l+encodeURIComponent(d(i[n]))}).join(r):t?encodeURIComponent(d(t))+e+encodeURIComponent(d(i)):""};var h=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function p(i,r){if(i.map)return i.map(r);for(var e=[],t=0;t<i.length;t++)e.push(r(i[t],t));return e}var c=Object.keys||function(i){var r=[];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.push(e);return r}},{}],54:[function(v,C,T){T.decode=T.parse=v("./decode"),T.encode=T.stringify=v("./encode")},{"./decode":52,"./encode":53}],55:[function(v,C,T){function d(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var h={};function p(t,n,l){l||(l=Error);function s(y,a,o){return typeof n=="string"?n:n(y,a,o)}var g=(function(y){d(a,y);function a(o,b,A){return y.call(this,s(o,b,A))||this}return a})(l);g.prototype.name=l.name,g.prototype.code=t,h[t]=g}function c(t,n){if(Array.isArray(t)){var l=t.length;return t=t.map(function(s){return String(s)}),l>2?"one of ".concat(n," ").concat(t.slice(0,l-1).join(", "),", or ")+t[l-1]:l===2?"one of ".concat(n," ").concat(t[0]," or ").concat(t[1]):"of ".concat(n," ").concat(t[0])}else return"of ".concat(n," ").concat(String(t))}function i(t,n,l){return t.substr(0,n.length)===n}function r(t,n,l){return(l===void 0||l>t.length)&&(l=t.length),t.substring(l-n.length,l)===n}function e(t,n,l){return typeof l!="number"&&(l=0),l+n.length>t.length?!1:t.indexOf(n,l)!==-1}p("ERR_INVALID_OPT_VALUE",function(t,n){return'The value "'+n+'" is invalid for option "'+t+'"'},TypeError),p("ERR_INVALID_ARG_TYPE",function(t,n,l){var s;typeof n=="string"&&i(n,"not ")?(s="must not be",n=n.replace(/^not /,"")):s="must be";var g;if(r(t," argument"))g="The ".concat(t," ").concat(s," ").concat(c(n,"type"));else{var y=e(t,".")?"property":"argument";g='The "'.concat(t,'" ').concat(y," ").concat(s," ").concat(c(n,"type"))}return g+=". Received type ".concat(typeof l),g},TypeError),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),p("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),p("ERR_STREAM_PREMATURE_CLOSE","Premature close"),p("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),p("ERR_STREAM_WRITE_AFTER_END","write after end"),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),C.exports.codes=h},{}],56:[function(v,C,T){(function(d){(function(){var h=Object.keys||function(s){var g=[];for(var y in s)g.push(y);return g};C.exports=t;var p=v("./_stream_readable"),c=v("./_stream_writable");v("inherits")(t,p);for(var i=h(c.prototype),r=0;r<i.length;r++){var e=i[r];t.prototype[e]||(t.prototype[e]=c.prototype[e])}function t(s){if(!(this instanceof t))return new t(s);p.call(this,s),c.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function n(){this._writableState.ended||d.nextTick(l,this)}function l(s){s.end()}Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}).call(this)}).call(this,v("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(v,C,T){C.exports=h;var d=v("./_stream_transform");v("inherits")(h,d);function h(p){if(!(this instanceof h))return new h(p);d.call(this,p)}h.prototype._transform=function(p,c,i){i(null,p)}},{"./_stream_transform":59,inherits:24}],58:[function(v,C,T){(function(d,h){(function(){C.exports=H;var p;H.ReadableState=q,v("events").EventEmitter;var c=function(O,S){return O.listeners(S).length},i=v("./internal/streams/stream"),r=v("buffer").Buffer,e=h.Uint8Array||function(){};function t(I){return r.from(I)}function n(I){return r.isBuffer(I)||I instanceof e}var l=v("util"),s;l&&l.debuglog?s=l.debuglog("stream"):s=function(){};var g=v("./internal/streams/buffer_list"),y=v("./internal/streams/destroy"),a=v("./internal/streams/state"),o=a.getHighWaterMark,b=v("../errors").codes,A=b.ERR_INVALID_ARG_TYPE,P=b.ERR_STREAM_PUSH_AFTER_EOF,B=b.ERR_METHOD_NOT_IMPLEMENTED,U=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,L,Q,u;v("inherits")(H,i);var E=y.errorOrDestroy,m=["error","close","destroy","pause","resume"];function D(I,O,S){if(typeof I.prependListener=="function")return I.prependListener(O,S);!I._events||!I._events[O]?I.on(O,S):Array.isArray(I._events[O])?I._events[O].unshift(S):I._events[O]=[S,I._events[O]]}function q(I,O,S){p=p||v("./_stream_duplex"),I=I||{},typeof S!="boolean"&&(S=O instanceof p),this.objectMode=!!I.objectMode,S&&(this.objectMode=this.objectMode||!!I.readableObjectMode),this.highWaterMark=o(this,I,"readableHighWaterMark",S),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.destroyed=!1,this.defaultEncoding=I.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,I.encoding&&(L||(L=v("string_decoder/").StringDecoder),this.decoder=new L(I.encoding),this.encoding=I.encoding)}function H(I){if(p=p||v("./_stream_duplex"),!(this instanceof H))return new H(I);var O=this instanceof p;this._readableState=new q(I,this,O),this.readable=!0,I&&(typeof I.read=="function"&&(this._read=I.read),typeof I.destroy=="function"&&(this._destroy=I.destroy)),i.call(this)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(O){this._readableState&&(this._readableState.destroyed=O)}}),H.prototype.destroy=y.destroy,H.prototype._undestroy=y.undestroy,H.prototype._destroy=function(I,O){O(I)},H.prototype.push=function(I,O){var S=this._readableState,f;return S.objectMode?f=!0:typeof I=="string"&&(O=O||S.defaultEncoding,O!==S.encoding&&(I=r.from(I,O),O=""),f=!0),M(this,I,O,!1,f)},H.prototype.unshift=function(I){return M(this,I,null,!0,!1)};function M(I,O,S,f,_){s("readableAddChunk",O);var R=I._readableState;if(O===null)R.reading=!1,te(I,R);else{var V;if(_||(V=z(R,O)),V)E(I,V);else if(R.objectMode||O&&O.length>0)if(typeof O!="string"&&!R.objectMode&&Object.getPrototypeOf(O)!==r.prototype&&(O=t(O)),f)R.endEmitted?E(I,new U):x(I,R,O,!0);else if(R.ended)E(I,new P);else{if(R.destroyed)return!1;R.reading=!1,R.decoder&&!S?(O=R.decoder.write(O),R.objectMode||O.length!==0?x(I,R,O,!1):J(I,R)):x(I,R,O,!1)}else f||(R.reading=!1,J(I,R))}return!R.ended&&(R.length<R.highWaterMark||R.length===0)}function x(I,O,S,f){O.flowing&&O.length===0&&!O.sync?(O.awaitDrain=0,I.emit("data",S)):(O.length+=O.objectMode?1:S.length,f?O.buffer.unshift(S):O.buffer.push(S),O.needReadable&&K(I)),J(I,O)}function z(I,O){var S;return!n(O)&&typeof O!="string"&&O!==void 0&&!I.objectMode&&(S=new A("chunk",["string","Buffer","Uint8Array"],O)),S}H.prototype.isPaused=function(){return this._readableState.flowing===!1},H.prototype.setEncoding=function(I){L||(L=v("string_decoder/").StringDecoder);var O=new L(I);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;for(var S=this._readableState.buffer.head,f="";S!==null;)f+=O.write(S.data),S=S.next;return this._readableState.buffer.clear(),f!==""&&this._readableState.buffer.push(f),this._readableState.length=f.length,this};var W=1073741824;function se(I){return I>=W?I=W:(I--,I|=I>>>1,I|=I>>>2,I|=I>>>4,I|=I>>>8,I|=I>>>16,I++),I}function oe(I,O){return I<=0||O.length===0&&O.ended?0:O.objectMode?1:I!==I?O.flowing&&O.length?O.buffer.head.data.length:O.length:(I>O.highWaterMark&&(O.highWaterMark=se(I)),I<=O.length?I:O.ended?O.length:(O.needReadable=!0,0))}H.prototype.read=function(I){s("read",I),I=parseInt(I,10);var O=this._readableState,S=I;if(I!==0&&(O.emittedReadable=!1),I===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return s("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?$(this):K(this),null;if(I=oe(I,O),I===0&&O.ended)return O.length===0&&$(this),null;var f=O.needReadable;s("need readable",f),(O.length===0||O.length-I<O.highWaterMark)&&(f=!0,s("length less than watermark",f)),O.ended||O.reading?(f=!1,s("reading or ended",f)):f&&(s("do read"),O.reading=!0,O.sync=!0,O.length===0&&(O.needReadable=!0),this._read(O.highWaterMark),O.sync=!1,O.reading||(I=oe(S,O)));var _;return I>0?_=N(I,O):_=null,_===null?(O.needReadable=O.length<=O.highWaterMark,I=0):(O.length-=I,O.awaitDrain=0),O.length===0&&(O.ended||(O.needReadable=!0),S!==I&&O.ended&&$(this)),_!==null&&this.emit("data",_),_};function te(I,O){if(s("onEofChunk"),!O.ended){if(O.decoder){var S=O.decoder.end();S&&S.length&&(O.buffer.push(S),O.length+=O.objectMode?1:S.length)}O.ended=!0,O.sync?K(I):(O.needReadable=!1,O.emittedReadable||(O.emittedReadable=!0,X(I)))}}function K(I){var O=I._readableState;s("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(s("emitReadable",O.flowing),O.emittedReadable=!0,d.nextTick(X,I))}function X(I){var O=I._readableState;s("emitReadable_",O.destroyed,O.length,O.ended),!O.destroyed&&(O.length||O.ended)&&(I.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,j(I)}function J(I,O){O.readingMore||(O.readingMore=!0,d.nextTick(ae,I,O))}function ae(I,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){var S=O.length;if(s("maybeReadMore read 0"),I.read(0),S===O.length)break}O.readingMore=!1}H.prototype._read=function(I){E(this,new B("_read()"))},H.prototype.pipe=function(I,O){var S=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=I;break;case 1:f.pipes=[f.pipes,I];break;default:f.pipes.push(I);break}f.pipesCount+=1,s("pipe count=%d opts=%j",f.pipesCount,O);var _=(!O||O.end!==!1)&&I!==d.stdout&&I!==d.stderr,R=_?re:Te;f.endEmitted?d.nextTick(R):S.once("end",R),I.on("unpipe",V);function V(be,Ae){s("onunpipe"),be===S&&Ae&&Ae.hasUnpiped===!1&&(Ae.hasUnpiped=!0,he())}function re(){s("onend"),I.end()}var ne=le(S);I.on("drain",ne);var ue=!1;function he(){s("cleanup"),I.removeListener("close",de),I.removeListener("finish",Ee),I.removeListener("drain",ne),I.removeListener("error",ve),I.removeListener("unpipe",V),S.removeListener("end",re),S.removeListener("end",Te),S.removeListener("data",pe),ue=!0,f.awaitDrain&&(!I._writableState||I._writableState.needDrain)&&ne()}S.on("data",pe);function pe(be){s("ondata");var Ae=I.write(be);s("dest.write",Ae),Ae===!1&&((f.pipesCount===1&&f.pipes===I||f.pipesCount>1&&Z(f.pipes,I)!==-1)&&!ue&&(s("false write response, pause",f.awaitDrain),f.awaitDrain++),S.pause())}function ve(be){s("onerror",be),Te(),I.removeListener("error",ve),c(I,"error")===0&&E(I,be)}D(I,"error",ve);function de(){I.removeListener("finish",Ee),Te()}I.once("close",de);function Ee(){s("onfinish"),I.removeListener("close",de),Te()}I.once("finish",Ee);function Te(){s("unpipe"),S.unpipe(I)}return I.emit("pipe",S),f.flowing||(s("pipe resume"),S.resume()),I};function le(I){return function(){var S=I._readableState;s("pipeOnDrain",S.awaitDrain),S.awaitDrain&&S.awaitDrain--,S.awaitDrain===0&&c(I,"data")&&(S.flowing=!0,j(I))}}H.prototype.unpipe=function(I){var O=this._readableState,S={hasUnpiped:!1};if(O.pipesCount===0)return this;if(O.pipesCount===1)return I&&I!==O.pipes?this:(I||(I=O.pipes),O.pipes=null,O.pipesCount=0,O.flowing=!1,I&&I.emit("unpipe",this,S),this);if(!I){var f=O.pipes,_=O.pipesCount;O.pipes=null,O.pipesCount=0,O.flowing=!1;for(var R=0;R<_;R++)f[R].emit("unpipe",this,{hasUnpiped:!1});return this}var V=Z(O.pipes,I);return V===-1?this:(O.pipes.splice(V,1),O.pipesCount-=1,O.pipesCount===1&&(O.pipes=O.pipes[0]),I.emit("unpipe",this,S),this)},H.prototype.on=function(I,O){var S=i.prototype.on.call(this,I,O),f=this._readableState;return I==="data"?(f.readableListening=this.listenerCount("readable")>0,f.flowing!==!1&&this.resume()):I==="readable"&&!f.endEmitted&&!f.readableListening&&(f.readableListening=f.needReadable=!0,f.flowing=!1,f.emittedReadable=!1,s("on readable",f.length,f.reading),f.length?K(this):f.reading||d.nextTick(Y,this)),S},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(I,O){var S=i.prototype.removeListener.call(this,I,O);return I==="readable"&&d.nextTick(ie,this),S},H.prototype.removeAllListeners=function(I){var O=i.prototype.removeAllListeners.apply(this,arguments);return(I==="readable"||I===void 0)&&d.nextTick(ie,this),O};function ie(I){var O=I._readableState;O.readableListening=I.listenerCount("readable")>0,O.resumeScheduled&&!O.paused?O.flowing=!0:I.listenerCount("data")>0&&I.resume()}function Y(I){s("readable nexttick read 0"),I.read(0)}H.prototype.resume=function(){var I=this._readableState;return I.flowing||(s("resume"),I.flowing=!I.readableListening,F(this,I)),I.paused=!1,this};function F(I,O){O.resumeScheduled||(O.resumeScheduled=!0,d.nextTick(ee,I,O))}function ee(I,O){s("resume",O.reading),O.reading||I.read(0),O.resumeScheduled=!1,I.emit("resume"),j(I),O.flowing&&!O.reading&&I.read(0)}H.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function j(I){var O=I._readableState;for(s("flow",O.flowing);O.flowing&&I.read()!==null;);}H.prototype.wrap=function(I){var O=this,S=this._readableState,f=!1;I.on("end",function(){if(s("wrapped end"),S.decoder&&!S.ended){var V=S.decoder.end();V&&V.length&&O.push(V)}O.push(null)}),I.on("data",function(V){if(s("wrapped data"),S.decoder&&(V=S.decoder.write(V)),!(S.objectMode&&V==null)&&!(!S.objectMode&&(!V||!V.length))){var re=O.push(V);re||(f=!0,I.pause())}});for(var _ in I)this[_]===void 0&&typeof I[_]=="function"&&(this[_]=(function(re){return function(){return I[re].apply(I,arguments)}})(_));for(var R=0;R<m.length;R++)I.on(m[R],this.emit.bind(this,m[R]));return this._read=function(V){s("wrapped _read",V),f&&(f=!1,I.resume())},this},typeof Symbol=="function"&&(H.prototype[Symbol.asyncIterator]=function(){return Q===void 0&&(Q=v("./internal/streams/async_iterator")),Q(this)}),Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(O){this._readableState&&(this._readableState.flowing=O)}}),H._fromList=N,Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function N(I,O){if(O.length===0)return null;var S;return O.objectMode?S=O.buffer.shift():!I||I>=O.length?(O.decoder?S=O.buffer.join(""):O.buffer.length===1?S=O.buffer.first():S=O.buffer.concat(O.length),O.buffer.clear()):S=O.buffer.consume(I,O.decoder),S}function $(I){var O=I._readableState;s("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,d.nextTick(G,O,I))}function G(I,O){if(s("endReadableNT",I.endEmitted,I.length),!I.endEmitted&&I.length===0&&(I.endEmitted=!0,O.readable=!1,O.emit("end"),I.autoDestroy)){var S=O._writableState;(!S||S.autoDestroy&&S.finished)&&O.destroy()}}typeof Symbol=="function"&&(H.from=function(I,O){return u===void 0&&(u=v("./internal/streams/from")),u(H,I,O)});function Z(I,O){for(var S=0,f=I.length;S<f;S++)if(I[S]===O)return S;return-1}}).call(this)}).call(this,v("_process"),typeof ge<"u"?ge:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(v,C,T){C.exports=t;var d=v("../errors").codes,h=d.ERR_METHOD_NOT_IMPLEMENTED,p=d.ERR_MULTIPLE_CALLBACK,c=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=d.ERR_TRANSFORM_WITH_LENGTH_0,r=v("./_stream_duplex");v("inherits")(t,r);function e(s,g){var y=this._transformState;y.transforming=!1;var a=y.writecb;if(a===null)return this.emit("error",new p);y.writechunk=null,y.writecb=null,g!=null&&this.push(g),a(s);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function t(s){if(!(this instanceof t))return new t(s);r.call(this,s),this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",n)}function n(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(g,y){l(s,g,y)}):l(this,null,null)}t.prototype.push=function(s,g){return this._transformState.needTransform=!1,r.prototype.push.call(this,s,g)},t.prototype._transform=function(s,g,y){y(new h("_transform()"))},t.prototype._write=function(s,g,y){var a=this._transformState;if(a.writecb=y,a.writechunk=s,a.writeencoding=g,!a.transforming){var o=this._readableState;(a.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},t.prototype._read=function(s){var g=this._transformState;g.writechunk!==null&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0},t.prototype._destroy=function(s,g){r.prototype._destroy.call(this,s,function(y){g(y)})};function l(s,g,y){if(g)return s.emit("error",g);if(y!=null&&s.push(y),s._writableState.length)throw new i;if(s._transformState.transforming)throw new c;return s.push(null)}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(v,C,T){(function(d,h){(function(){C.exports=q;function p(j){var N=this;this.next=null,this.entry=null,this.finish=function(){ee(N,j)}}var c;q.WritableState=m;var i={deprecate:v("util-deprecate")},r=v("./internal/streams/stream"),e=v("buffer").Buffer,t=h.Uint8Array||function(){};function n(j){return e.from(j)}function l(j){return e.isBuffer(j)||j instanceof t}var s=v("./internal/streams/destroy"),g=v("./internal/streams/state"),y=g.getHighWaterMark,a=v("../errors").codes,o=a.ERR_INVALID_ARG_TYPE,b=a.ERR_METHOD_NOT_IMPLEMENTED,A=a.ERR_MULTIPLE_CALLBACK,P=a.ERR_STREAM_CANNOT_PIPE,B=a.ERR_STREAM_DESTROYED,U=a.ERR_STREAM_NULL_VALUES,L=a.ERR_STREAM_WRITE_AFTER_END,Q=a.ERR_UNKNOWN_ENCODING,u=s.errorOrDestroy;v("inherits")(q,r);function E(){}function m(j,N,$){c=c||v("./_stream_duplex"),j=j||{},typeof $!="boolean"&&($=N instanceof c),this.objectMode=!!j.objectMode,$&&(this.objectMode=this.objectMode||!!j.writableObjectMode),this.highWaterMark=y(this,j,"writableHighWaterMark",$),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var G=j.decodeStrings===!1;this.decodeStrings=!G,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){te(N,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new p(this)}m.prototype.getBuffer=function(){for(var N=this.bufferedRequest,$=[];N;)$.push(N),N=N.next;return $},(function(){try{Object.defineProperty(m.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var D;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(N){return D.call(this,N)?!0:this!==q?!1:N&&N._writableState instanceof m}})):D=function(N){return N instanceof this};function q(j){c=c||v("./_stream_duplex");var N=this instanceof c;if(!N&&!D.call(q,this))return new q(j);this._writableState=new m(j,this,N),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final)),r.call(this)}q.prototype.pipe=function(){u(this,new P)};function H(j,N){var $=new L;u(j,$),d.nextTick(N,$)}function M(j,N,$,G){var Z;return $===null?Z=new U:typeof $!="string"&&!N.objectMode&&(Z=new o("chunk",["string","Buffer"],$)),Z?(u(j,Z),d.nextTick(G,Z),!1):!0}q.prototype.write=function(j,N,$){var G=this._writableState,Z=!1,I=!G.objectMode&&l(j);return I&&!e.isBuffer(j)&&(j=n(j)),typeof N=="function"&&($=N,N=null),I?N="buffer":N||(N=G.defaultEncoding),typeof $!="function"&&($=E),G.ending?H(this,$):(I||M(this,G,j,$))&&(G.pendingcb++,Z=z(this,G,I,j,N,$)),Z},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,!j.writing&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&J(this,j))},q.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=N.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((N+"").toLowerCase())>-1))throw new Q(N);return this._writableState.defaultEncoding=N,this},Object.defineProperty(q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function x(j,N,$){return!j.objectMode&&j.decodeStrings!==!1&&typeof N=="string"&&(N=e.from(N,$)),N}Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function z(j,N,$,G,Z,I){if(!$){var O=x(N,G,Z);G!==O&&($=!0,Z="buffer",G=O)}var S=N.objectMode?1:G.length;N.length+=S;var f=N.length<N.highWaterMark;if(f||(N.needDrain=!0),N.writing||N.corked){var _=N.lastBufferedRequest;N.lastBufferedRequest={chunk:G,encoding:Z,isBuf:$,callback:I,next:null},_?_.next=N.lastBufferedRequest:N.bufferedRequest=N.lastBufferedRequest,N.bufferedRequestCount+=1}else W(j,N,!1,S,G,Z,I);return f}function W(j,N,$,G,Z,I,O){N.writelen=G,N.writecb=O,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new B("write")):$?j._writev(Z,N.onwrite):j._write(Z,I,N.onwrite),N.sync=!1}function se(j,N,$,G,Z){--N.pendingcb,$?(d.nextTick(Z,G),d.nextTick(Y,j,N),j._writableState.errorEmitted=!0,u(j,G)):(Z(G),j._writableState.errorEmitted=!0,u(j,G),Y(j,N))}function oe(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}function te(j,N){var $=j._writableState,G=$.sync,Z=$.writecb;if(typeof Z!="function")throw new A;if(oe($),N)se(j,$,G,N,Z);else{var I=ae($)||j.destroyed;!I&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&J(j,$),G?d.nextTick(K,j,$,I,Z):K(j,$,I,Z)}}function K(j,N,$,G){$||X(j,N),N.pendingcb--,G(),Y(j,N)}function X(j,N){N.length===0&&N.needDrain&&(N.needDrain=!1,j.emit("drain"))}function J(j,N){N.bufferProcessing=!0;var $=N.bufferedRequest;if(j._writev&&$&&$.next){var G=N.bufferedRequestCount,Z=new Array(G),I=N.corkedRequestsFree;I.entry=$;for(var O=0,S=!0;$;)Z[O]=$,$.isBuf||(S=!1),$=$.next,O+=1;Z.allBuffers=S,W(j,N,!0,N.length,Z,"",I.finish),N.pendingcb++,N.lastBufferedRequest=null,I.next?(N.corkedRequestsFree=I.next,I.next=null):N.corkedRequestsFree=new p(N),N.bufferedRequestCount=0}else{for(;$;){var f=$.chunk,_=$.encoding,R=$.callback,V=N.objectMode?1:f.length;if(W(j,N,!1,V,f,_,R),$=$.next,N.bufferedRequestCount--,N.writing)break}$===null&&(N.lastBufferedRequest=null)}N.bufferedRequest=$,N.bufferProcessing=!1}q.prototype._write=function(j,N,$){$(new b("_write()"))},q.prototype._writev=null,q.prototype.end=function(j,N,$){var G=this._writableState;return typeof j=="function"?($=j,j=null,N=null):typeof N=="function"&&($=N,N=null),j!=null&&this.write(j,N),G.corked&&(G.corked=1,this.uncork()),G.ending||F(this,G,$),this},Object.defineProperty(q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ae(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function le(j,N){j._final(function($){N.pendingcb--,$&&u(j,$),N.prefinished=!0,j.emit("prefinish"),Y(j,N)})}function ie(j,N){!N.prefinished&&!N.finalCalled&&(typeof j._final=="function"&&!N.destroyed?(N.pendingcb++,N.finalCalled=!0,d.nextTick(le,j,N)):(N.prefinished=!0,j.emit("prefinish")))}function Y(j,N){var $=ae(N);if($&&(ie(j,N),N.pendingcb===0&&(N.finished=!0,j.emit("finish"),N.autoDestroy))){var G=j._readableState;(!G||G.autoDestroy&&G.endEmitted)&&j.destroy()}return $}function F(j,N,$){N.ending=!0,Y(j,N),$&&(N.finished?d.nextTick($):j.once("finish",$)),N.ended=!0,j.writable=!1}function ee(j,N,$){var G=j.entry;for(j.entry=null;G;){var Z=G.callback;N.pendingcb--,Z($),G=G.next}N.corkedRequestsFree.next=j}Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(N){this._writableState&&(this._writableState.destroyed=N)}}),q.prototype.destroy=s.destroy,q.prototype._undestroy=s.undestroy,q.prototype._destroy=function(j,N){N(j)}}).call(this)}).call(this,v("_process"),typeof ge<"u"?ge:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(v,C,T){(function(d){(function(){var h;function p(B,U,L){return U in B?Object.defineProperty(B,U,{value:L,enumerable:!0,configurable:!0,writable:!0}):B[U]=L,B}var c=v("./end-of-stream"),i=Symbol("lastResolve"),r=Symbol("lastReject"),e=Symbol("error"),t=Symbol("ended"),n=Symbol("lastPromise"),l=Symbol("handlePromise"),s=Symbol("stream");function g(B,U){return{value:B,done:U}}function y(B){var U=B[i];if(U!==null){var L=B[s].read();L!==null&&(B[n]=null,B[i]=null,B[r]=null,U(g(L,!1)))}}function a(B){d.nextTick(y,B)}function o(B,U){return function(L,Q){B.then(function(){if(U[t]){L(g(void 0,!0));return}U[l](L,Q)},Q)}}var b=Object.getPrototypeOf(function(){}),A=Object.setPrototypeOf((h={get stream(){return this[s]},next:function(){var U=this,L=this[e];if(L!==null)return Promise.reject(L);if(this[t])return Promise.resolve(g(void 0,!0));if(this[s].destroyed)return new Promise(function(m,D){d.nextTick(function(){U[e]?D(U[e]):m(g(void 0,!0))})});var Q=this[n],u;if(Q)u=new Promise(o(Q,this));else{var E=this[s].read();if(E!==null)return Promise.resolve(g(E,!1));u=new Promise(this[l])}return this[n]=u,u}},p(h,Symbol.asyncIterator,function(){return this}),p(h,"return",function(){var U=this;return new Promise(function(L,Q){U[s].destroy(null,function(u){if(u){Q(u);return}L(g(void 0,!0))})})}),h),b),P=function(U){var L,Q=Object.create(A,(L={},p(L,s,{value:U,writable:!0}),p(L,i,{value:null,writable:!0}),p(L,r,{value:null,writable:!0}),p(L,e,{value:null,writable:!0}),p(L,t,{value:U._readableState.endEmitted,writable:!0}),p(L,l,{value:function(E,m){var D=Q[s].read();D?(Q[n]=null,Q[i]=null,Q[r]=null,E(g(D,!1))):(Q[i]=E,Q[r]=m)},writable:!0}),L));return Q[n]=null,c(U,function(u){if(u&&u.code!=="ERR_STREAM_PREMATURE_CLOSE"){var E=Q[r];E!==null&&(Q[n]=null,Q[i]=null,Q[r]=null,E(u)),Q[e]=u;return}var m=Q[i];m!==null&&(Q[n]=null,Q[i]=null,Q[r]=null,m(g(void 0,!0))),Q[t]=!0}),U.on("readable",a.bind(null,Q)),Q};C.exports=P}).call(this)}).call(this,v("_process"))},{"./end-of-stream":64,_process:50}],62:[function(v,C,T){function d(y,a){var o=Object.keys(y);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(y);a&&(b=b.filter(function(A){return Object.getOwnPropertyDescriptor(y,A).enumerable})),o.push.apply(o,b)}return o}function h(y){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?d(Object(o),!0).forEach(function(b){p(y,b,o[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach(function(b){Object.defineProperty(y,b,Object.getOwnPropertyDescriptor(o,b))})}return y}function p(y,a,o){return a in y?Object.defineProperty(y,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):y[a]=o,y}function c(y,a){if(!(y instanceof a))throw new TypeError("Cannot call a class as a function")}function i(y,a){for(var o=0;o<a.length;o++){var b=a[o];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}function r(y,a,o){return a&&i(y.prototype,a),y}var e=v("buffer"),t=e.Buffer,n=v("util"),l=n.inspect,s=l&&l.custom||"inspect";function g(y,a,o){t.prototype.copy.call(y,a,o)}C.exports=(function(){function y(){c(this,y),this.head=null,this.tail=null,this.length=0}return r(y,[{key:"push",value:function(o){var b={data:o,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(o){var b={data:o,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(o){if(this.length===0)return"";for(var b=this.head,A=""+b.data;b=b.next;)A+=o+b.data;return A}},{key:"concat",value:function(o){if(this.length===0)return t.alloc(0);for(var b=t.allocUnsafe(o>>>0),A=this.head,P=0;A;)g(A.data,b,P),P+=A.data.length,A=A.next;return b}},{key:"consume",value:function(o,b){var A;return o<this.head.data.length?(A=this.head.data.slice(0,o),this.head.data=this.head.data.slice(o)):o===this.head.data.length?A=this.shift():A=b?this._getString(o):this._getBuffer(o),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(o){var b=this.head,A=1,P=b.data;for(o-=P.length;b=b.next;){var B=b.data,U=o>B.length?B.length:o;if(U===B.length?P+=B:P+=B.slice(0,o),o-=U,o===0){U===B.length?(++A,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=B.slice(U));break}++A}return this.length-=A,P}},{key:"_getBuffer",value:function(o){var b=t.allocUnsafe(o),A=this.head,P=1;for(A.data.copy(b),o-=A.data.length;A=A.next;){var B=A.data,U=o>B.length?B.length:o;if(B.copy(b,b.length-o,0,U),o-=U,o===0){U===B.length?(++P,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=B.slice(U));break}++P}return this.length-=P,b}},{key:s,value:function(o,b){return l(this,h({},b,{depth:0,customInspect:!1}))}}]),y})()},{buffer:17,util:16}],63:[function(v,C,T){(function(d){(function(){function h(t,n){var l=this,s=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return s||g?(n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(r,this,t)):d.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(y){!n&&y?l._writableState?l._writableState.errorEmitted?d.nextTick(c,l):(l._writableState.errorEmitted=!0,d.nextTick(p,l,y)):d.nextTick(p,l,y):n?(d.nextTick(c,l),n(y)):d.nextTick(c,l)}),this)}function p(t,n){r(t,n),c(t)}function c(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function r(t,n){t.emit("error",n)}function e(t,n){var l=t._readableState,s=t._writableState;l&&l.autoDestroy||s&&s.autoDestroy?t.destroy(n):t.emit("error",n)}C.exports={destroy:h,undestroy:i,errorOrDestroy:e}}).call(this)}).call(this,v("_process"))},{_process:50}],64:[function(v,C,T){var d=v("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function h(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];r.apply(this,n)}}}function p(){}function c(r){return r.setHeader&&typeof r.abort=="function"}function i(r,e,t){if(typeof e=="function")return i(r,null,e);e||(e={}),t=h(t||p);var n=e.readable||e.readable!==!1&&r.readable,l=e.writable||e.writable!==!1&&r.writable,s=function(){r.writable||y()},g=r._writableState&&r._writableState.finished,y=function(){l=!1,g=!0,n||t.call(r)},a=r._readableState&&r._readableState.endEmitted,o=function(){n=!1,a=!0,l||t.call(r)},b=function(U){t.call(r,U)},A=function(){var U;if(n&&!a)return(!r._readableState||!r._readableState.ended)&&(U=new d),t.call(r,U);if(l&&!g)return(!r._writableState||!r._writableState.ended)&&(U=new d),t.call(r,U)},P=function(){r.req.on("finish",y)};return c(r)?(r.on("complete",y),r.on("abort",A),r.req?P():r.on("request",P)):l&&!r._writableState&&(r.on("end",s),r.on("close",s)),r.on("end",o),r.on("finish",y),e.error!==!1&&r.on("error",b),r.on("close",A),function(){r.removeListener("complete",y),r.removeListener("abort",A),r.removeListener("request",P),r.req&&r.req.removeListener("finish",y),r.removeListener("end",s),r.removeListener("close",s),r.removeListener("finish",y),r.removeListener("end",o),r.removeListener("error",b),r.removeListener("close",A)}}C.exports=i},{"../../../errors":55}],65:[function(v,C,T){C.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(v,C,T){var d;function h(y){var a=!1;return function(){a||(a=!0,y.apply(void 0,arguments))}}var p=v("../../../errors").codes,c=p.ERR_MISSING_ARGS,i=p.ERR_STREAM_DESTROYED;function r(y){if(y)throw y}function e(y){return y.setHeader&&typeof y.abort=="function"}function t(y,a,o,b){b=h(b);var A=!1;y.on("close",function(){A=!0}),d===void 0&&(d=v("./end-of-stream")),d(y,{readable:a,writable:o},function(B){if(B)return b(B);A=!0,b()});var P=!1;return function(B){if(!A&&!P){if(P=!0,e(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();b(B||new i("pipe"))}}}function n(y){y()}function l(y,a){return y.pipe(a)}function s(y){return!y.length||typeof y[y.length-1]!="function"?r:y.pop()}function g(){for(var y=arguments.length,a=new Array(y),o=0;o<y;o++)a[o]=arguments[o];var b=s(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new c("streams");var A,P=a.map(function(B,U){var L=U<a.length-1,Q=U>0;return t(B,L,Q,function(u){A||(A=u),u&&P.forEach(n),!L&&(P.forEach(n),b(A))})});return a.reduce(l)}C.exports=g},{"../../../errors":55,"./end-of-stream":64}],67:[function(v,C,T){var d=v("../../../errors").codes.ERR_INVALID_OPT_VALUE;function h(c,i,r){return c.highWaterMark!=null?c.highWaterMark:i?c[r]:null}function p(c,i,r,e){var t=h(i,e,r);if(t!=null){if(!(isFinite(t)&&Math.floor(t)===t)||t<0){var n=e?r:"highWaterMark";throw new d(n,t)}return Math.floor(t)}return c.objectMode?16:16*1024}C.exports={getHighWaterMark:p}},{"../../../errors":55}],68:[function(v,C,T){C.exports=v("events").EventEmitter},{events:22}],69:[function(v,C,T){T=C.exports=v("./lib/_stream_readable.js"),T.Stream=T,T.Readable=T,T.Writable=v("./lib/_stream_writable.js"),T.Duplex=v("./lib/_stream_duplex.js"),T.Transform=v("./lib/_stream_transform.js"),T.PassThrough=v("./lib/_stream_passthrough.js"),T.finished=v("./lib/internal/streams/end-of-stream.js"),T.pipeline=v("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(v,C,T){function d(p,c,i){var r=this;this._callback=p,this._args=i,this._interval=setInterval(p,c,this._args),this.reschedule=function(e){e||(e=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,e,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}function h(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var p;if(arguments.length>0){p=new Array(arguments.length-2);for(var c=0;c<p.length;c++)p[c]=arguments[c+2]}return new d(arguments[0],arguments[1],p)}C.exports=h},{}],71:[function(v,C,T){C.exports=v("./index.js")()},{"./index.js":72}],72:[function(v,C,T){(function(d){(function(){C.exports=p;function h(i){return i instanceof d?d.from(i):new i.constructor(i.buffer.slice(),i.byteOffset,i.length)}function p(i){if(i=i||{},i.circles)return c(i);return i.proto?t:e;function r(n,l){for(var s=Object.keys(n),g=new Array(s.length),y=0;y<s.length;y++){var a=s[y],o=n[a];typeof o!="object"||o===null?g[a]=o:o instanceof Date?g[a]=new Date(o):ArrayBuffer.isView(o)?g[a]=h(o):g[a]=l(o)}return g}function e(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return r(n,e);if(n instanceof Map)return new Map(r(Array.from(n),e));if(n instanceof Set)return new Set(r(Array.from(n),e));var l={};for(var s in n)if(Object.hasOwnProperty.call(n,s)!==!1){var g=n[s];typeof g!="object"||g===null?l[s]=g:g instanceof Date?l[s]=new Date(g):g instanceof Map?l[s]=new Map(r(Array.from(g),e)):g instanceof Set?l[s]=new Set(r(Array.from(g),e)):ArrayBuffer.isView(g)?l[s]=h(g):l[s]=e(g)}return l}function t(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return r(n,t);if(n instanceof Map)return new Map(r(Array.from(n),t));if(n instanceof Set)return new Set(r(Array.from(n),t));var l={};for(var s in n){var g=n[s];typeof g!="object"||g===null?l[s]=g:g instanceof Date?l[s]=new Date(g):g instanceof Map?l[s]=new Map(r(Array.from(g),t)):g instanceof Set?l[s]=new Set(r(Array.from(g),t)):ArrayBuffer.isView(g)?l[s]=h(g):l[s]=t(g)}return l}}function c(i){var r=[],e=[];return i.proto?l:n;function t(s,g){for(var y=Object.keys(s),a=new Array(y.length),o=0;o<y.length;o++){var b=y[o],A=s[b];if(typeof A!="object"||A===null)a[b]=A;else if(A instanceof Date)a[b]=new Date(A);else if(ArrayBuffer.isView(A))a[b]=h(A);else{var P=r.indexOf(A);P!==-1?a[b]=e[P]:a[b]=g(A)}}return a}function n(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return t(s,n);if(s instanceof Map)return new Map(t(Array.from(s),n));if(s instanceof Set)return new Set(t(Array.from(s),n));var g={};r.push(s),e.push(g);for(var y in s)if(Object.hasOwnProperty.call(s,y)!==!1){var a=s[y];if(typeof a!="object"||a===null)g[y]=a;else if(a instanceof Date)g[y]=new Date(a);else if(a instanceof Map)g[y]=new Map(t(Array.from(a),n));else if(a instanceof Set)g[y]=new Set(t(Array.from(a),n));else if(ArrayBuffer.isView(a))g[y]=h(a);else{var o=r.indexOf(a);o!==-1?g[y]=e[o]:g[y]=n(a)}}return r.pop(),e.pop(),g}function l(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return t(s,l);if(s instanceof Map)return new Map(t(Array.from(s),l));if(s instanceof Set)return new Set(t(Array.from(s),l));var g={};r.push(s),e.push(g);for(var y in s){var a=s[y];if(typeof a!="object"||a===null)g[y]=a;else if(a instanceof Date)g[y]=new Date(a);else if(a instanceof Map)g[y]=new Map(t(Array.from(a),l));else if(a instanceof Set)g[y]=new Set(t(Array.from(a),l));else if(ArrayBuffer.isView(a))g[y]=h(a);else{var o=r.indexOf(a);o!==-1?g[y]=e[o]:g[y]=l(a)}}return r.pop(),e.pop(),g}}}).call(this)}).call(this,v("buffer").Buffer)},{buffer:17}],73:[function(v,C,T){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var d=v("buffer"),h=d.Buffer;function p(i,r){for(var e in i)r[e]=i[e]}h.from&&h.alloc&&h.allocUnsafe&&h.allocUnsafeSlow?C.exports=d:(p(d,T),T.Buffer=c);function c(i,r,e){return h(i,r,e)}c.prototype=Object.create(h.prototype),p(h,c),c.from=function(i,r,e){if(typeof i=="number")throw new TypeError("Argument must not be a number");return h(i,r,e)},c.alloc=function(i,r,e){if(typeof i!="number")throw new TypeError("Argument must be a number");var t=h(i);return r!==void 0?typeof e=="string"?t.fill(r,e):t.fill(r):t.fill(0),t},c.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return h(i)},c.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return d.SlowBuffer(i)}},{buffer:17}],74:[function(v,C,T){C.exports=d;function d(p){var c=p._readableState;return c?c.objectMode||typeof p._duplexState=="number"?p.read():p.read(h(c)):null}function h(p){return p.buffer.length?p.buffer.head?p.buffer.head.data.length:p.buffer[0].length:p.length}},{}],75:[function(v,C,T){var d=v("safe-buffer").Buffer,h=d.isEncoding||function(P){switch(P=""+P,P&&P.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function p(P){if(!P)return"utf8";for(var B;;)switch(P){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return P;default:if(B)return;P=(""+P).toLowerCase(),B=!0}}function c(P){var B=p(P);if(typeof B!="string"&&(d.isEncoding===h||!h(P)))throw new Error("Unknown encoding: "+P);return B||P}T.StringDecoder=i;function i(P){this.encoding=c(P);var B;switch(this.encoding){case"utf16le":this.text=g,this.end=y,B=4;break;case"utf8":this.fillLast=n,B=4;break;case"base64":this.text=a,this.end=o,B=3;break;default:this.write=b,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(B)}i.prototype.write=function(P){if(P.length===0)return"";var B,U;if(this.lastNeed){if(B=this.fillLast(P),B===void 0)return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<P.length?B?B+this.text(P,U):this.text(P,U):B||""},i.prototype.end=s,i.prototype.text=l,i.prototype.fillLast=function(P){if(this.lastNeed<=P.length)return P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,P.length),this.lastNeed-=P.length};function r(P){return P<=127?0:P>>5===6?2:P>>4===14?3:P>>3===30?4:P>>6===2?-1:-2}function e(P,B,U){var L=B.length-1;if(L<U)return 0;var Q=r(B[L]);return Q>=0?(Q>0&&(P.lastNeed=Q-1),Q):--L<U||Q===-2?0:(Q=r(B[L]),Q>=0?(Q>0&&(P.lastNeed=Q-2),Q):--L<U||Q===-2?0:(Q=r(B[L]),Q>=0?(Q>0&&(Q===2?Q=0:P.lastNeed=Q-3),Q):0))}function t(P,B,U){if((B[0]&192)!==128)return P.lastNeed=0,"�";if(P.lastNeed>1&&B.length>1){if((B[1]&192)!==128)return P.lastNeed=1,"�";if(P.lastNeed>2&&B.length>2&&(B[2]&192)!==128)return P.lastNeed=2,"�"}}function n(P){var B=this.lastTotal-this.lastNeed,U=t(this,P);if(U!==void 0)return U;if(this.lastNeed<=P.length)return P.copy(this.lastChar,B,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,B,0,P.length),this.lastNeed-=P.length}function l(P,B){var U=e(this,P,B);if(!this.lastNeed)return P.toString("utf8",B);this.lastTotal=U;var L=P.length-(U-this.lastNeed);return P.copy(this.lastChar,0,L),P.toString("utf8",B,L)}function s(P){var B=P&&P.length?this.write(P):"";return this.lastNeed?B+"�":B}function g(P,B){if((P.length-B)%2===0){var U=P.toString("utf16le",B);if(U){var L=U.charCodeAt(U.length-1);if(L>=55296&&L<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=P[P.length-1],P.toString("utf16le",B,P.length-1)}function y(P){var B=P&&P.length?this.write(P):"";if(this.lastNeed){var U=this.lastTotal-this.lastNeed;return B+this.lastChar.toString("utf16le",0,U)}return B}function a(P,B){var U=(P.length-B)%3;return U===0?P.toString("base64",B):(this.lastNeed=3-U,this.lastTotal=3,U===1?this.lastChar[0]=P[P.length-1]:(this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1]),P.toString("base64",B,P.length-U))}function o(P){var B=P&&P.length?this.write(P):"";return this.lastNeed?B+this.lastChar.toString("base64",0,3-this.lastNeed):B}function b(P){return P.toString(this.encoding)}function A(P){return P&&P.length?this.write(P):""}},{"safe-buffer":73}],76:[function(v,C,T){var d=v("punycode"),h=v("./util");T.parse=B,T.resolve=L,T.resolveObject=Q,T.format=U,T.Url=p;function p(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var c=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,e=["<",">",'"',"`"," ","\r",`
`,"	"],t=["{","}","|","\\","^","`"].concat(e),n=["'"].concat(t),l=["%","/","?",";","#"].concat(n),s=["/","?","#"],g=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,a=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,o={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},P=v("querystring");function B(u,E,m){if(u&&h.isObject(u)&&u instanceof p)return u;var D=new p;return D.parse(u,E,m),D}p.prototype.parse=function(u,E,m){if(!h.isString(u))throw new TypeError("Parameter 'url' must be a string, not "+typeof u);var D=u.indexOf("?"),q=D!==-1&&D<u.indexOf("#")?"?":"#",H=u.split(q),M=/\\/g;H[0]=H[0].replace(M,"/"),u=H.join(q);var x=u;if(x=x.trim(),!m&&u.split("#").length===1){var z=r.exec(x);if(z)return this.path=x,this.href=x,this.pathname=z[1],z[2]?(this.search=z[2],E?this.query=P.parse(this.search.substr(1)):this.query=this.search.substr(1)):E&&(this.search="",this.query={}),this}var W=c.exec(x);if(W){W=W[0];var se=W.toLowerCase();this.protocol=se,x=x.substr(W.length)}if(m||W||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var oe=x.substr(0,2)==="//";oe&&!(W&&b[W])&&(x=x.substr(2),this.slashes=!0)}if(!b[W]&&(oe||W&&!A[W])){for(var te=-1,K=0;K<s.length;K++){var X=x.indexOf(s[K]);X!==-1&&(te===-1||X<te)&&(te=X)}var J,ae;te===-1?ae=x.lastIndexOf("@"):ae=x.lastIndexOf("@",te),ae!==-1&&(J=x.slice(0,ae),x=x.slice(ae+1),this.auth=decodeURIComponent(J)),te=-1;for(var K=0;K<l.length;K++){var X=x.indexOf(l[K]);X!==-1&&(te===-1||X<te)&&(te=X)}te===-1&&(te=x.length),this.host=x.slice(0,te),x=x.slice(te),this.parseHost(),this.hostname=this.hostname||"";var le=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!le)for(var ie=this.hostname.split(/\./),K=0,Y=ie.length;K<Y;K++){var F=ie[K];if(F&&!F.match(y)){for(var ee="",j=0,N=F.length;j<N;j++)F.charCodeAt(j)>127?ee+="x":ee+=F[j];if(!ee.match(y)){var $=ie.slice(0,K),G=ie.slice(K+1),Z=F.match(a);Z&&($.push(Z[1]),G.unshift(Z[2])),G.length&&(x="/"+G.join(".")+x),this.hostname=$.join(".");break}}}this.hostname.length>g?this.hostname="":this.hostname=this.hostname.toLowerCase(),le||(this.hostname=d.toASCII(this.hostname));var I=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+I,this.href+=this.host,le&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),x[0]!=="/"&&(x="/"+x))}if(!o[se])for(var K=0,Y=n.length;K<Y;K++){var S=n[K];if(x.indexOf(S)!==-1){var f=encodeURIComponent(S);f===S&&(f=escape(S)),x=x.split(S).join(f)}}var _=x.indexOf("#");_!==-1&&(this.hash=x.substr(_),x=x.slice(0,_));var R=x.indexOf("?");if(R!==-1?(this.search=x.substr(R),this.query=x.substr(R+1),E&&(this.query=P.parse(this.query)),x=x.slice(0,R)):E&&(this.search="",this.query={}),x&&(this.pathname=x),A[se]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",V=this.search||"";this.path=I+V}return this.href=this.format(),this};function U(u){return h.isString(u)&&(u=B(u)),u instanceof p?u.format():p.prototype.format.call(u)}p.prototype.format=function(){var u=this.auth||"";u&&(u=encodeURIComponent(u),u=u.replace(/%3A/i,":"),u+="@");var E=this.protocol||"",m=this.pathname||"",D=this.hash||"",q=!1,H="";this.host?q=u+this.host:this.hostname&&(q=u+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(q+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(H=P.stringify(this.query));var M=this.search||H&&"?"+H||"";return E&&E.substr(-1)!==":"&&(E+=":"),this.slashes||(!E||A[E])&&q!==!1?(q="//"+(q||""),m&&m.charAt(0)!=="/"&&(m="/"+m)):q||(q=""),D&&D.charAt(0)!=="#"&&(D="#"+D),M&&M.charAt(0)!=="?"&&(M="?"+M),m=m.replace(/[?#]/g,function(x){return encodeURIComponent(x)}),M=M.replace("#","%23"),E+q+m+M+D};function L(u,E){return B(u,!1,!0).resolve(E)}p.prototype.resolve=function(u){return this.resolveObject(B(u,!1,!0)).format()};function Q(u,E){return u?B(u,!1,!0).resolveObject(E):E}p.prototype.resolveObject=function(u){if(h.isString(u)){var E=new p;E.parse(u,!1,!0),u=E}for(var m=new p,D=Object.keys(this),q=0;q<D.length;q++){var H=D[q];m[H]=this[H]}if(m.hash=u.hash,u.href==="")return m.href=m.format(),m;if(u.slashes&&!u.protocol){for(var M=Object.keys(u),x=0;x<M.length;x++){var z=M[x];z!=="protocol"&&(m[z]=u[z])}return A[m.protocol]&&m.hostname&&!m.pathname&&(m.path=m.pathname="/"),m.href=m.format(),m}if(u.protocol&&u.protocol!==m.protocol){if(!A[u.protocol]){for(var W=Object.keys(u),se=0;se<W.length;se++){var oe=W[se];m[oe]=u[oe]}return m.href=m.format(),m}if(m.protocol=u.protocol,!u.host&&!b[u.protocol]){for(var Y=(u.pathname||"").split("/");Y.length&&!(u.host=Y.shift()););u.host||(u.host=""),u.hostname||(u.hostname=""),Y[0]!==""&&Y.unshift(""),Y.length<2&&Y.unshift(""),m.pathname=Y.join("/")}else m.pathname=u.pathname;if(m.search=u.search,m.query=u.query,m.host=u.host||"",m.auth=u.auth,m.hostname=u.hostname||u.host,m.port=u.port,m.pathname||m.search){var te=m.pathname||"",K=m.search||"";m.path=te+K}return m.slashes=m.slashes||u.slashes,m.href=m.format(),m}var X=m.pathname&&m.pathname.charAt(0)==="/",J=u.host||u.pathname&&u.pathname.charAt(0)==="/",ae=J||X||m.host&&u.pathname,le=ae,ie=m.pathname&&m.pathname.split("/")||[],Y=u.pathname&&u.pathname.split("/")||[],F=m.protocol&&!A[m.protocol];if(F&&(m.hostname="",m.port=null,m.host&&(ie[0]===""?ie[0]=m.host:ie.unshift(m.host)),m.host="",u.protocol&&(u.hostname=null,u.port=null,u.host&&(Y[0]===""?Y[0]=u.host:Y.unshift(u.host)),u.host=null),ae=ae&&(Y[0]===""||ie[0]==="")),J)m.host=u.host||u.host===""?u.host:m.host,m.hostname=u.hostname||u.hostname===""?u.hostname:m.hostname,m.search=u.search,m.query=u.query,ie=Y;else if(Y.length)ie||(ie=[]),ie.pop(),ie=ie.concat(Y),m.search=u.search,m.query=u.query;else if(!h.isNullOrUndefined(u.search)){if(F){m.hostname=m.host=ie.shift();var ee=m.host&&m.host.indexOf("@")>0?m.host.split("@"):!1;ee&&(m.auth=ee.shift(),m.host=m.hostname=ee.shift())}return m.search=u.search,m.query=u.query,(!h.isNull(m.pathname)||!h.isNull(m.search))&&(m.path=(m.pathname?m.pathname:"")+(m.search?m.search:"")),m.href=m.format(),m}if(!ie.length)return m.pathname=null,m.search?m.path="/"+m.search:m.path=null,m.href=m.format(),m;for(var j=ie.slice(-1)[0],N=(m.host||u.host||ie.length>1)&&(j==="."||j==="..")||j==="",$=0,G=ie.length;G>=0;G--)j=ie[G],j==="."?ie.splice(G,1):j===".."?(ie.splice(G,1),$++):$&&(ie.splice(G,1),$--);if(!ae&&!le)for(;$--;$)ie.unshift("..");ae&&ie[0]!==""&&(!ie[0]||ie[0].charAt(0)!=="/")&&ie.unshift(""),N&&ie.join("/").substr(-1)!=="/"&&ie.push("");var Z=ie[0]===""||ie[0]&&ie[0].charAt(0)==="/";if(F){m.hostname=m.host=Z?"":ie.length?ie.shift():"";var ee=m.host&&m.host.indexOf("@")>0?m.host.split("@"):!1;ee&&(m.auth=ee.shift(),m.host=m.hostname=ee.shift())}return ae=ae||m.host&&ie.length,ae&&!Z&&ie.unshift(""),ie.length?m.pathname=ie.join("/"):(m.pathname=null,m.path=null),(!h.isNull(m.pathname)||!h.isNull(m.search))&&(m.path=(m.pathname?m.pathname:"")+(m.search?m.search:"")),m.auth=u.auth||m.auth,m.slashes=m.slashes||u.slashes,m.href=m.format(),m},p.prototype.parseHost=function(){var u=this.host,E=i.exec(u);E&&(E=E[0],E!==":"&&(this.port=E.substr(1)),u=u.substr(0,u.length-E.length)),u&&(this.hostname=u)}},{"./util":77,punycode:51,querystring:54}],77:[function(v,C,T){C.exports={isString:function(d){return typeof d=="string"},isObject:function(d){return typeof d=="object"&&d!==null},isNull:function(d){return d===null},isNullOrUndefined:function(d){return d==null}}},{}],78:[function(v,C,T){(function(d){(function(){C.exports=h;function h(c,i){if(p("noDeprecation"))return c;var r=!1;function e(){if(!r){if(p("throwDeprecation"))throw new Error(i);p("traceDeprecation")?console.trace(i):console.warn(i),r=!0}return c.apply(this,arguments)}return e}function p(c){try{if(!d.localStorage)return!1}catch{return!1}var i=d.localStorage[c];return i==null?!1:String(i).toLowerCase()==="true"}}).call(this)}).call(this,typeof ge<"u"?ge:typeof self<"u"?self:typeof window<"u"?window:{})},{}],79:[function(v,C,T){C.exports=d;function d(h,p){if(h&&p)return d(h)(p);if(typeof h!="function")throw new TypeError("need wrapper function");return Object.keys(h).forEach(function(i){c[i]=h[i]}),c;function c(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];var e=h.apply(this,i),t=i[i.length-1];return typeof e=="function"&&e!==t&&Object.keys(t).forEach(function(n){e[n]=t[n]}),e}}},{}],80:[function(v,C,T){C.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(v,C,T){C.exports=h;var d=Object.prototype.hasOwnProperty;function h(){for(var p={},c=0;c<arguments.length;c++){var i=arguments[c];for(var r in i)d.call(i,r)&&(p[r]=i[r])}return p}},{}],82:[function(v,C,T){C.exports=function(d){d.prototype[Symbol.iterator]=function*(){for(let h=this.head;h;h=h.next)yield h.value}}},{}],83:[function(v,C,T){C.exports=d,d.Node=i,d.create=d;function d(r){var e=this;if(e instanceof d||(e=new d),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(l){e.push(l)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}d.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e},d.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},d.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}},d.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)p(this,arguments[r]);return this.length},d.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)c(this,arguments[r]);return this.length},d.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},d.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},d.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next},d.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev},d.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value},d.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value},d.prototype.map=function(r,e){e=e||this;for(var t=new d,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t},d.prototype.mapReverse=function(r,e){e=e||this;for(var t=new d,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t},d.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var l=0;n!==null;l++)t=r(t,n.value,l),n=n.next;return t},d.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var l=this.length-1;n!==null;l--)t=r(t,n.value,l),n=n.prev;return t},d.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r},d.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r},d.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new d;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,l=this.head;l!==null&&n<r;n++)l=l.next;for(;l!==null&&n<e;n++,l=l.next)t.push(l.value);return t},d.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new d;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,l=this.tail;l!==null&&n>e;n--)l=l.prev;for(;l!==null&&n>r;n--,l=l.prev)t.push(l.value);return t},d.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,l=this.head;l!==null&&n<r;n++)l=l.next;for(var s=[],n=0;l&&n<e;n++)s.push(l.value),l=this.removeNode(l);l===null&&(l=this.tail),l!==this.head&&l!==this.tail&&(l=l.prev);for(var n=0;n<t.length;n++)l=h(this,l,t[n]);return s},d.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function h(r,e,t){var n=e===r.head?new i(t,null,e,r):new i(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function p(r,e){r.tail=new i(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function c(r,e){r.head=new i(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function i(r,e,t,n){if(!(this instanceof i))return new i(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{v("./iterator.js")(d)}catch{}},{"./iterator.js":82}]},{},[12])(12)})})(We)),We.exports}var Pr=Rr();const Mr=xr(Pr);function Or(w){const[k,v]=we(null),[C,T]=we("idle"),[d,h]=we(null),p=xe(null);return ze(()=>{let c=!1;if(!w){T("idle"),v(null),h(null),p.current&&(p.current.end(!0),p.current=null);return}const i=wr(),r=Sr();T("connecting"),h(null);const e=Mr.connect(i,{clientId:`webclient-${Math.random().toString(16).slice(2)}`,keepalive:30,reconnectPeriod:2e3,clean:!0});return p.current=e,e.on("connect",()=>{c||(T("connected"),e.subscribe(r))}),e.on("reconnect",()=>{c||T("connecting")}),e.on("message",(t,n)=>{if(!c&&t===r)try{const l=JSON.parse(n.toString());(l==null?void 0:l.type)==="person_count"&&typeof l.count=="number"&&(v(l.count),h(null))}catch{h("Bad MQTT payload")}}),e.on("error",t=>{c||(T("error"),h((t==null?void 0:t.message)||"MQTT error"))}),e.on("close",()=>{c||T(t=>t==="error"?"error":"idle")}),()=>{c=!0,p.current&&(p.current.end(!0),p.current=null)}},[w]),{count:k,status:C,error:d}}function Lr(){const[w,k]=we("idle"),[v,C]=we("idle"),[T,d]=we(null),[h,p]=we(null),c=Nt(()=>window.location.host,[]),{count:i,status:r,error:e}=Or(w==="streaming");return ze(()=>{let s=!1;const g=async()=>{try{const a=await Ir();if(s)return;const o=Br(a);k(b=>b==="starting"&&o==="idle"?b:o),p(new Date),d(null)}catch{s||(d("Failed to fetch status"),k(o=>o==="starting"?o:"error"))}};g();const y=setInterval(g,3e3);return()=>{s=!0,clearInterval(y)}},[]),ce("div",{className:"page",children:[ce(_r,{pipelineState:w,videoState:v,mqttState:r,host:c,lastUpdated:h}),ce("div",{className:"card",children:ce(hr,{state:w,onStart:async()=>{d(null),k("starting");try{await kr(),k("starting")}catch(s){d((s==null?void 0:s.message)||"Start failed"),k("error")}},onStop:async()=>{d(null);try{await Ar(),k("idle")}catch(s){d((s==null?void 0:s.message)||"Stop failed"),k("error")}},disabled:w==="starting",error:T||e,mqttState:r})}),ce(Er,{active:w==="streaming",onStatusChange:C,personCount:i})]})}function Br(w){return Object.keys(w.running||{}).length===0?"idle":"streaming"}Qt(ce(cr,{children:ce(Lr,{})}),document.getElementById("root"));
